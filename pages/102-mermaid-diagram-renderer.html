<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Diagram Renderer - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        .content-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .mermaid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
        }
        
        .output-section {
            display: flex;
            flex-direction: column;
        }
        
        .code-editor {
            width: 100%;
            min-height: 400px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            padding: 20px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            resize: vertical;
            background: var(--bg-tertiary);
        }
        
        .code-editor:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .diagram-output {
            width: 100%;
            min-height: 400px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: auto;
        }
        
        .diagram-output.error {
            border-color: #ef4444;
            background: #fef2f2;
            color: #dc2626;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--bg-tertiary);
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        
        .examples-section {
            margin: 30px 0;
        }
        
        .example-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .example-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: white;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .example-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--primary-color);
        }
        
        .example-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .cheatsheet {
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }
        
        .cheatsheet h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .cheatsheet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .cheatsheet-item {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
        }
        
        .cheatsheet-item h4 {
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .cheatsheet-item code {
            background: var(--bg-tertiary);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            display: block;
            margin: 8px 0;
        }
        
        .error-message {
            color: #dc2626;
            background: #fef2f2;
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid #fecaca;
            margin: 15px 0;
        }
        
        .success-message {
            color: #059669;
            background: #f0fdf4;
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid #bbf7d0;
            margin: 15px 0;
        }
        
        .message-area {
            min-height: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .message-area .success-message,
        .message-area .error-message {
            margin: 0 0 15px 0;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            .mermaid-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .example-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Mermaid Diagram Renderer</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Tech</span>
                        <span class="page-number-badge">Page #102</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="content-section">
                <h2>Introduction</h2>
                <p>Create beautiful diagrams using Mermaid syntax! Mermaid is a JavaScript-based diagramming and charting tool that renders text-based descriptions into diagrams. Perfect for creating flowcharts, sequence diagrams, class diagrams, and more.</p>
                
                <div class="highlight-box">
                    <h3>Key Features</h3>
                    <ul>
                        <li>Real-time diagram rendering</li>
                        <li>Export to PNG and SVG formats</li>
                        <li>Pre-loaded examples to get started</li>
                        <li>Comprehensive syntax cheatsheet</li>
                        <li>Error handling and validation</li>
                    </ul>
                </div>
            </div>
            
            <!-- Mermaid Editor -->
            <div class="content-section">
                <h2>Diagram Editor</h2>
                <p>Write your Mermaid syntax in the left panel and see the diagram render in real-time on the right. Use the examples below to get started quickly.</p>
                
                <div class="mermaid-container">
                    <div class="input-section">
                        <h3>Mermaid Code Input</h3>
                        <textarea id="mermaidCode" class="code-editor" placeholder="Enter your Mermaid syntax here..."></textarea>
                        <div class="controls">
                            <button id="renderBtn" class="btn btn-primary">
                                <i class="fas fa-play"></i> Render Diagram
                            </button>
                            <button id="clearBtn" class="btn btn-secondary">
                                <i class="fas fa-eraser"></i> Clear
                            </button>
                        </div>
                        <div class="export-controls">
                            <button id="exportPngBtn" class="btn btn-success">
                                <i class="fas fa-download"></i> Export PNG
                            </button>
                            <button id="exportSvgBtn" class="btn btn-success">
                                <i class="fas fa-download"></i> Export SVG
                            </button>
                        </div>
                    </div>
                    
                    <div class="output-section">
                        <h3>Diagram Output</h3>
                        <div id="messageArea" class="message-area"></div>
                        <div id="diagramOutput" class="diagram-output">
                            <div style="text-align: center; color: var(--text-muted);">
                                <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px; display: block;"></i>
                                <p>Your diagram will appear here</p>
                                <p style="font-size: 0.9rem;">Try one of the examples below to get started</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Examples Section -->
            <div class="content-section">
                <h2>Quick Examples</h2>
                <p>Click any example below to load it into the editor and see how it works.</p>
                
                <div class="example-buttons">
                    <button class="example-btn" data-example="flowchart">Flowchart</button>
                    <button class="example-btn" data-example="sequence">Sequence Diagram</button>
                    <button class="example-btn" data-example="class">Class Diagram</button>
                    <button class="example-btn" data-example="gantt">Gantt Chart</button>
                    <button class="example-btn" data-example="pie">Pie Chart</button>
                    <button class="example-btn" data-example="mindmap">Mind Map</button>
                </div>
            </div>
            
            <!-- Cheatsheet Section -->
            <div class="content-section">
                <h2>Mermaid Syntax Cheatsheet</h2>
                <p>Quick reference for common Mermaid syntax patterns and elements.</p>
                
                <div class="cheatsheet">
                    <h3>Flowcharts</h3>
                    <div class="cheatsheet-grid">
                        <div class="cheatsheet-item">
                            <h4>Basic Nodes</h4>
                            <code>graph TD
A[Start] --> B{Decision}
B -->|Yes| C[Action]
B -->|No| D[End]</code>
                        </div>
                        <div class="cheatsheet-item">
                            <h4>Node Shapes</h4>
                            <code>A[Rectangle]
B(Rounded)
C{Decision}
D((Circle))
E>Parallelogram]</code>
                        </div>
                    </div>
                </div>
                
                <div class="cheatsheet">
                    <h3>Sequence Diagrams</h3>
                    <div class="cheatsheet-grid">
                        <div class="cheatsheet-item">
                            <h4>Basic Sequence</h4>
                            <code>sequenceDiagram
participant A as User
participant B as System
A->>B: Request
B->>A: Response</code>
                        </div>
                        <div class="cheatsheet-item">
                            <h4>Message Types</h4>
                            <code>A->>B: Solid arrow
A-->>B: Dotted arrow
A->>B: Note over A,B: Note</code>
                        </div>
                    </div>
                </div>
                
                <div class="cheatsheet">
                    <h3>Class Diagrams</h3>
                    <div class="cheatsheet-grid">
                        <div class="cheatsheet-item">
                            <h4>Class Definition</h4>
                            <code>classDiagram
class Animal {
    +String name
    +makeSound()
}
class Dog {
    +bark()
}
Animal <|-- Dog</code>
                        </div>
                        <div class="cheatsheet-item">
                            <h4>Relationships</h4>
                            <code>A <|-- B : Inheritance
A *-- B : Composition
A o-- B : Aggregation
A --> B : Association</code>
                        </div>
                    </div>
                </div>
                
                <div class="cheatsheet">
                    <h3>Gantt Charts</h3>
                    <div class="cheatsheet-grid">
                        <div class="cheatsheet-item">
                            <h4>Basic Gantt</h4>
                            <code>gantt
title Project Timeline
section Phase 1
Task 1 :done, des1, 2024-01-01, 2024-01-05
Task 2 :active, des2, 2024-01-06, 2024-01-10</code>
                        </div>
                    </div>
                </div>
                
                <div class="cheatsheet">
                    <h3>Pie Charts</h3>
                    <div class="cheatsheet-grid">
                        <div class="cheatsheet-item">
                            <h4>Basic Pie</h4>
                            <code>pie title Sales Distribution
"Product A" : 30
"Product B" : 25
"Product C" : 45</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-section">
                <h2>Tips & Best Practices</h2>
                <ul>
                    <li><strong>Start Simple:</strong> Begin with basic flowcharts before moving to complex diagrams</li>
                    <li><strong>Use Clear Names:</strong> Descriptive node names make diagrams easier to understand</li>
                    <li><strong>Consistent Styling:</strong> Use consistent colors and shapes for similar elements</li>
                    <li><strong>Test Incrementally:</strong> Build your diagram step by step to catch errors early</li>
                    <li><strong>Export Regularly:</strong> Save your work by exporting to PNG or SVG format</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // DOM elements
        const mermaidCode = document.getElementById('mermaidCode');
        const diagramOutput = document.getElementById('diagramOutput');
        const renderBtn = document.getElementById('renderBtn');
        const clearBtn = document.getElementById('clearBtn');
        const exportPngBtn = document.getElementById('exportPngBtn');
        const exportSvgBtn = document.getElementById('exportSvgBtn');
        const exampleBtns = document.querySelectorAll('.example-btn');
        
        // Example diagrams
        const examples = {
            flowchart: `graph TD
    A[Start] --> B{Is it working?}
    B -->|Yes| C[Great!]
    B -->|No| D[Debug]
    D --> E[Fix issue]
    E --> B
    C --> F[End]`,
            
            sequence: `sequenceDiagram
    participant U as User
    participant S as System
    participant D as Database
    
    U->>S: Login Request
    S->>D: Validate Credentials
    D-->>S: User Data
    S-->>U: Welcome Message`,
            
            class: `classDiagram
    class Animal {
        +String name
        +int age
        +makeSound()
    }
    
    class Dog {
        +bark()
        +wagTail()
    }
    
    class Cat {
        +meow()
        +purr()
    }
    
    Animal <|-- Dog
    Animal <|-- Cat`,
            
            gantt: `gantt
    title Project Timeline
    dateFormat  YYYY-MM-DD
    section Planning
    Research     :done, research, 2024-01-01, 2024-01-05
    Design       :active, design, 2024-01-06, 2024-01-15
    section Development
    Coding       :dev, 2024-01-16, 2024-01-30
    Testing      :test, 2024-01-25, 2024-02-05`,
            
            pie: `pie title Sales by Region
    "North America" : 45
    "Europe" : 30
    "Asia Pacific" : 15
    "Other" : 10`,
            
            mindmap: `mindmap
  root((Mermaid))
    Flowcharts
      Basic
      Advanced
    Sequence Diagrams
      Participants
      Messages
    Class Diagrams
      Classes
      Relationships
    Charts
      Gantt
      Pie`
        };
        
        // Event listeners
        renderBtn.addEventListener('click', renderDiagram);
        clearBtn.addEventListener('click', clearEditor);
        exportPngBtn.addEventListener('click', exportPng);
        exportSvgBtn.addEventListener('click', exportSvg);
        
        // Example button listeners
        exampleBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const exampleType = btn.dataset.example;
                loadExample(exampleType);
                
                // Update active state
                exampleBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        // Auto-render on input change
        let renderTimeout;
        mermaidCode.addEventListener('input', () => {
            clearTimeout(renderTimeout);
            renderTimeout = setTimeout(renderDiagram, 1000);
        });
        
        // Functions
        function renderDiagram() {
            const code = mermaidCode.value.trim();
            if (!code) {
                showError('Please enter some Mermaid code');
                return;
            }
            
            try {
                // Clear previous content
                diagramOutput.innerHTML = '';
                diagramOutput.className = 'diagram-output';
                
                // Render the diagram
                mermaid.render('mermaid-diagram', code).then(({ svg }) => {
                    diagramOutput.innerHTML = svg;
                    showSuccess('Diagram rendered successfully!');
                }).catch(error => {
                    showError('Error rendering diagram: ' + error.message);
                });
            } catch (error) {
                showError('Invalid Mermaid syntax: ' + error.message);
            }
        }
        
        function clearEditor() {
            mermaidCode.value = '';
            diagramOutput.innerHTML = `
                <div style="text-align: center; color: var(--text-muted);">
                    <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 15px; display: block;"></i>
                    <p>Your diagram will appear here</p>
                    <p style="font-size: 0.9rem;">Try one of the examples below to get started</p>
                </div>
            `;
            diagramOutput.className = 'diagram-output';
            
            // Clear message area
            const messageArea = document.getElementById('messageArea');
            messageArea.innerHTML = '';
            
            // Clear active example button
            exampleBtns.forEach(btn => btn.classList.remove('active'));
        }
        
        function loadExample(type) {
            if (examples[type]) {
                mermaidCode.value = examples[type];
                renderDiagram();
            }
        }
        
        function exportPng() {
            const svg = diagramOutput.querySelector('svg');
            if (!svg) {
                showError('No diagram to export');
                return;
            }
            
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);
            
            img.onload = () => {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'mermaid-diagram.png';
                    a.click();
                    URL.revokeObjectURL(url);
                });
            };
            
            img.src = url;
        }
        
        function exportSvg() {
            const svg = diagramOutput.querySelector('svg');
            if (!svg) {
                showError('No diagram to export');
                return;
            }
            
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'mermaid-diagram.svg';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function showError(message) {
            const messageArea = document.getElementById('messageArea');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            
            // Remove previous messages
            messageArea.querySelectorAll('.error-message, .success-message').forEach(el => el.remove());
            
            messageArea.appendChild(errorDiv);
            diagramOutput.classList.add('error');
        }
        
        function showSuccess(message) {
            const messageArea = document.getElementById('messageArea');
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            
            // Remove previous messages
            messageArea.querySelectorAll('.error-message, .success-message').forEach(el => el.remove());
            
            messageArea.appendChild(successDiv);
            diagramOutput.classList.remove('error');
            
            // Auto-hide success message after 3 seconds
            setTimeout(() => {
                if (successDiv.parentNode === messageArea) {
                    successDiv.remove();
                }
            }, 3000);
        }
        
        // Load default example
        window.addEventListener('load', () => {
            loadExample('flowchart');
        });
        
        console.log('Page loaded: Mermaid Diagram Renderer');
    </script>
</body>
</html>
