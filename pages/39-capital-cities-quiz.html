<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capital Cities Quiz - GPT Static Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .quiz-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .quiz-display {
            background: white;
            border: 3px solid var(--border-color);
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
            transition: border-color 0.3s ease;
        }
        
        .quiz-display.correct {
            border-color: #28a745;
        }
        
        .quiz-display.incorrect {
            border-color: #dc3545;
        }
        
        .question-display {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 30px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .question-text {
            margin-bottom: 10px;
        }
        
        .country-name {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        .answer-option {
            padding: 20px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-tertiary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .answer-option:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .answer-option.correct {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }
        
        .answer-option.incorrect {
            border-color: #dc3545;
            background: #dc3545;
            color: white;
        }
        
        .answer-option.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--border-color);
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-3px);
        }
        
        .quiz-settings {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .settings-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .setting-group {
            text-align: center;
        }
        
        .setting-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .setting-group select, .setting-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }
        
        .setting-group select:focus, .setting-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .region-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .region-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .region-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .region-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .results-display {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .results-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .result-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .result-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .quiz-history {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .history-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .history-item {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .history-question {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .history-result {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .history-result.correct {
            color: #28a745;
        }
        
        .history-result.incorrect {
            color: #dc3545;
        }
        
        .difficulty-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .difficulty-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            transition: all 0.3s ease;
        }
        
        .difficulty-dot.active {
            background: var(--primary-color);
        }
        
        .difficulty-dot.easy {
            background: #28a745;
        }
        
        .difficulty-dot.medium {
            background: #ffc107;
        }
        
        .difficulty-dot.hard {
            background: #dc3545;
        }
        
        .explanation-display {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
            display: none;
        }
        
        .explanation-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .explanation-text {
            line-height: 1.6;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        @media (max-width: 768px) {
            .question-display {
                font-size: 1.5rem;
            }
            
            .country-name {
                font-size: 1.2rem;
            }
            
            .answer-options {
                grid-template-columns: 1fr;
            }
            
            .control-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Capital Cities Quiz</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Education & Learning</span>
                        <span class="page-number-badge">Page #39</span>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <div class="content-section">
                <p>Test your knowledge of world capitals with this interactive quiz. Choose from different regions and difficulty levels to challenge yourself and learn about countries and their capital cities.</p>
            </div>

            <!-- Quiz Settings -->
            <div class="content-section">
                <div class="quiz-settings">
                    <div class="settings-title">Quiz Settings</div>
                    <div class="settings-grid">
                        <div class="setting-group">
                            <label for="difficulty">Difficulty Level</label>
                            <select id="difficulty">
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>
                        
                        <div class="setting-group">
                            <label for="questionCount">Questions per Quiz</label>
                            <select id="questionCount">
                                <option value="5">5 questions</option>
                                <option value="10" selected>10 questions</option>
                                <option value="20">20 questions</option>
                                <option value="50">50 questions</option>
                            </select>
                        </div>
                        
                        <div class="setting-group">
                            <label for="timeLimit">Time Limit (seconds)</label>
                            <select id="timeLimit">
                                <option value="0">No limit</option>
                                <option value="30">30 seconds</option>
                                <option value="60" selected>60 seconds</option>
                                <option value="120">2 minutes</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="region-selector">
                        <button class="region-btn active" data-region="all">All Regions</button>
                        <button class="region-btn" data-region="europe">Europe</button>
                        <button class="region-btn" data-region="asia">Asia</button>
                        <button class="region-btn" data-region="africa">Africa</button>
                        <button class="region-btn" data-region="americas">Americas</button>
                        <button class="region-btn" data-region="oceania">Oceania</button>
                    </div>
                    
                    <div class="difficulty-indicators">
                        <div class="difficulty-dot easy"></div>
                        <div class="difficulty-dot medium active"></div>
                        <div class="difficulty-dot hard"></div>
                    </div>
                </div>
            </div>

            <!-- Quiz Display -->
            <div class="content-section">
                <div class="quiz-container">
                    <div class="quiz-display" id="quizDisplay">
                        <div class="question-display" id="questionDisplay">
                            <div class="question-text">What is the capital of</div>
                            <div class="country-name" id="countryName">France?</div>
                        </div>
                        
                        <div class="answer-options" id="answerOptions">
                            <!-- Answer options will be populated by JavaScript -->
                        </div>
                        
                        <div class="quiz-controls">
                            <button class="control-btn btn-primary" id="startBtn" onclick="startQuiz()">
                                <i class="fas fa-play"></i> Start Quiz
                            </button>
                            <button class="control-btn btn-secondary" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                                <i class="fas fa-forward"></i> Next Question
                            </button>
                            <button class="control-btn btn-success" id="finishBtn" onclick="finishQuiz()" style="display: none;">
                                <i class="fas fa-flag-checkered"></i> Finish Quiz
                            </button>
                        </div>
                        
                        <div class="explanation-display" id="explanationDisplay">
                            <div class="explanation-title">Explanation:</div>
                            <div class="explanation-text" id="explanationText"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Display -->
            <div class="content-section">
                <div class="results-display">
                    <div class="results-title">Your Quiz Results</div>
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-value" id="totalQuestions">0</div>
                            <div class="result-label">Questions</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="correctAnswers">0</div>
                            <div class="result-label">Correct</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="accuracy">0%</div>
                            <div class="result-label">Accuracy</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="currentStreak">0</div>
                            <div class="result-label">Streak</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz History -->
            <div class="content-section">
                <div class="quiz-history">
                    <div class="history-title">Recent Questions</div>
                    <div class="history-grid" id="historyGrid">
                        <!-- History will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz data
        const quizData = {
            europe: [
                { country: 'France', capital: 'Paris', region: 'europe', difficulty: 'easy' },
                { country: 'Germany', capital: 'Berlin', region: 'europe', difficulty: 'easy' },
                { country: 'Italy', capital: 'Rome', region: 'europe', difficulty: 'easy' },
                { country: 'Spain', capital: 'Madrid', region: 'europe', difficulty: 'easy' },
                { country: 'United Kingdom', capital: 'London', region: 'europe', difficulty: 'easy' },
                { country: 'Netherlands', capital: 'Amsterdam', region: 'europe', difficulty: 'medium' },
                { country: 'Belgium', capital: 'Brussels', region: 'europe', difficulty: 'medium' },
                { country: 'Switzerland', capital: 'Bern', region: 'europe', difficulty: 'medium' },
                { country: 'Austria', capital: 'Vienna', region: 'europe', difficulty: 'medium' },
                { country: 'Sweden', capital: 'Stockholm', region: 'europe', difficulty: 'medium' },
                { country: 'Norway', capital: 'Oslo', region: 'europe', difficulty: 'medium' },
                { country: 'Denmark', capital: 'Copenhagen', region: 'europe', difficulty: 'medium' },
                { country: 'Finland', capital: 'Helsinki', region: 'europe', difficulty: 'medium' },
                { country: 'Poland', capital: 'Warsaw', region: 'europe', difficulty: 'medium' },
                { country: 'Czech Republic', capital: 'Prague', region: 'europe', difficulty: 'medium' },
                { country: 'Hungary', capital: 'Budapest', region: 'europe', difficulty: 'medium' },
                { country: 'Greece', capital: 'Athens', region: 'europe', difficulty: 'medium' },
                { country: 'Portugal', capital: 'Lisbon', region: 'europe', difficulty: 'medium' },
                { country: 'Ireland', capital: 'Dublin', region: 'europe', difficulty: 'medium' },
                { country: 'Iceland', capital: 'Reykjavik', region: 'europe', difficulty: 'hard' },
                { country: 'Luxembourg', capital: 'Luxembourg City', region: 'europe', difficulty: 'hard' },
                { country: 'Slovenia', capital: 'Ljubljana', region: 'europe', difficulty: 'hard' },
                { country: 'Estonia', capital: 'Tallinn', region: 'europe', difficulty: 'hard' },
                { country: 'Latvia', capital: 'Riga', region: 'europe', difficulty: 'hard' },
                { country: 'Lithuania', capital: 'Vilnius', region: 'europe', difficulty: 'hard' }
            ],
            asia: [
                { country: 'China', capital: 'Beijing', region: 'asia', difficulty: 'easy' },
                { country: 'Japan', capital: 'Tokyo', region: 'asia', difficulty: 'easy' },
                { country: 'India', capital: 'New Delhi', region: 'asia', difficulty: 'easy' },
                { country: 'South Korea', capital: 'Seoul', region: 'asia', difficulty: 'easy' },
                { country: 'Thailand', capital: 'Bangkok', region: 'asia', difficulty: 'medium' },
                { country: 'Vietnam', capital: 'Hanoi', region: 'asia', difficulty: 'medium' },
                { country: 'Malaysia', capital: 'Kuala Lumpur', region: 'asia', difficulty: 'medium' },
                { country: 'Singapore', capital: 'Singapore', region: 'asia', difficulty: 'medium' },
                { country: 'Indonesia', capital: 'Jakarta', region: 'asia', difficulty: 'medium' },
                { country: 'Philippines', capital: 'Manila', region: 'asia', difficulty: 'medium' },
                { country: 'Pakistan', capital: 'Islamabad', region: 'asia', difficulty: 'medium' },
                { country: 'Bangladesh', capital: 'Dhaka', region: 'asia', difficulty: 'medium' },
                { country: 'Sri Lanka', capital: 'Colombo', region: 'asia', difficulty: 'medium' },
                { country: 'Myanmar', capital: 'Naypyidaw', region: 'asia', difficulty: 'hard' },
                { country: 'Cambodia', capital: 'Phnom Penh', region: 'asia', difficulty: 'hard' },
                { country: 'Laos', capital: 'Vientiane', region: 'asia', difficulty: 'hard' },
                { country: 'Mongolia', capital: 'Ulaanbaatar', region: 'asia', difficulty: 'hard' },
                { country: 'Nepal', capital: 'Kathmandu', region: 'asia', difficulty: 'hard' },
                { country: 'Bhutan', capital: 'Thimphu', region: 'asia', difficulty: 'hard' }
            ],
            africa: [
                { country: 'Egypt', capital: 'Cairo', region: 'africa', difficulty: 'easy' },
                { country: 'South Africa', capital: 'Pretoria', region: 'africa', difficulty: 'easy' },
                { country: 'Nigeria', capital: 'Abuja', region: 'africa', difficulty: 'medium' },
                { country: 'Kenya', capital: 'Nairobi', region: 'africa', difficulty: 'medium' },
                { country: 'Ethiopia', capital: 'Addis Ababa', region: 'africa', difficulty: 'medium' },
                { country: 'Morocco', capital: 'Rabat', region: 'africa', difficulty: 'medium' },
                { country: 'Ghana', capital: 'Accra', region: 'africa', difficulty: 'medium' },
                { country: 'Uganda', capital: 'Kampala', region: 'africa', difficulty: 'medium' },
                { country: 'Tanzania', capital: 'Dodoma', region: 'africa', difficulty: 'medium' },
                { country: 'Algeria', capital: 'Algiers', region: 'africa', difficulty: 'medium' },
                { country: 'Sudan', capital: 'Khartoum', region: 'africa', difficulty: 'medium' },
                { country: 'Angola', capital: 'Luanda', region: 'africa', difficulty: 'hard' },
                { country: 'Zimbabwe', capital: 'Harare', region: 'africa', difficulty: 'hard' },
                { country: 'Zambia', capital: 'Lusaka', region: 'africa', difficulty: 'hard' },
                { country: 'Botswana', capital: 'Gaborone', region: 'africa', difficulty: 'hard' },
                { country: 'Namibia', capital: 'Windhoek', region: 'africa', difficulty: 'hard' },
                { country: 'Mozambique', capital: 'Maputo', region: 'africa', difficulty: 'hard' },
                { country: 'Madagascar', capital: 'Antananarivo', region: 'africa', difficulty: 'hard' }
            ],
            americas: [
                { country: 'United States', capital: 'Washington, D.C.', region: 'americas', difficulty: 'easy' },
                { country: 'Canada', capital: 'Ottawa', region: 'americas', difficulty: 'easy' },
                { country: 'Mexico', capital: 'Mexico City', region: 'americas', difficulty: 'easy' },
                { country: 'Brazil', capital: 'Brasília', region: 'americas', difficulty: 'easy' },
                { country: 'Argentina', capital: 'Buenos Aires', region: 'americas', difficulty: 'medium' },
                { country: 'Chile', capital: 'Santiago', region: 'americas', difficulty: 'medium' },
                { country: 'Colombia', capital: 'Bogotá', region: 'americas', difficulty: 'medium' },
                { country: 'Peru', capital: 'Lima', region: 'americas', difficulty: 'medium' },
                { country: 'Venezuela', capital: 'Caracas', region: 'americas', difficulty: 'medium' },
                { country: 'Ecuador', capital: 'Quito', region: 'americas', difficulty: 'medium' },
                { country: 'Bolivia', capital: 'La Paz', region: 'americas', difficulty: 'medium' },
                { country: 'Paraguay', capital: 'Asunción', region: 'americas', difficulty: 'hard' },
                { country: 'Uruguay', capital: 'Montevideo', region: 'americas', difficulty: 'hard' },
                { country: 'Guyana', capital: 'Georgetown', region: 'americas', difficulty: 'hard' },
                { country: 'Suriname', capital: 'Paramaribo', region: 'americas', difficulty: 'hard' },
                { country: 'Panama', capital: 'Panama City', region: 'americas', difficulty: 'medium' },
                { country: 'Costa Rica', capital: 'San José', region: 'americas', difficulty: 'medium' },
                { country: 'Nicaragua', capital: 'Managua', region: 'americas', difficulty: 'hard' },
                { country: 'Honduras', capital: 'Tegucigalpa', region: 'americas', difficulty: 'hard' },
                { country: 'El Salvador', capital: 'San Salvador', region: 'americas', difficulty: 'hard' },
                { country: 'Guatemala', capital: 'Guatemala City', region: 'americas', difficulty: 'hard' },
                { country: 'Belize', capital: 'Belmopan', region: 'americas', difficulty: 'hard' }
            ],
            oceania: [
                { country: 'Australia', capital: 'Canberra', region: 'oceania', difficulty: 'easy' },
                { country: 'New Zealand', capital: 'Wellington', region: 'oceania', difficulty: 'easy' },
                { country: 'Fiji', capital: 'Suva', region: 'oceania', difficulty: 'medium' },
                { country: 'Papua New Guinea', capital: 'Port Moresby', region: 'oceania', difficulty: 'hard' },
                { country: 'Solomon Islands', capital: 'Honiara', region: 'oceania', difficulty: 'hard' },
                { country: 'Vanuatu', capital: 'Port Vila', region: 'oceania', difficulty: 'hard' },
                { country: 'New Caledonia', capital: 'Nouméa', region: 'oceania', difficulty: 'hard' },
                { country: 'Samoa', capital: 'Apia', region: 'oceania', difficulty: 'hard' },
                { country: 'Tonga', capital: 'Nuku\'alofa', region: 'oceania', difficulty: 'hard' }
            ]
        };

        let currentQuestion = 0;
        let questions = [];
        let score = 0;
        let currentStreak = 0;
        let quizHistory = [];
        let selectedRegion = 'all';
        let difficulty = 'medium';
        let questionCount = 10;
        let timeLimit = 60;
        let timer = null;
        let timeLeft = 0;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadQuizHistory();
        });

        function setupEventListeners() {
            // Region buttons
            document.querySelectorAll('.region-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.region-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedRegion = this.dataset.region;
                });
            });

            // Difficulty selector
            document.getElementById('difficulty').addEventListener('change', function() {
                difficulty = this.value;
                updateDifficultyIndicators();
            });

            // Question count selector
            document.getElementById('questionCount').addEventListener('change', function() {
                questionCount = parseInt(this.value);
            });

            // Time limit selector
            document.getElementById('timeLimit').addEventListener('change', function() {
                timeLimit = parseInt(this.value);
            });
        }

        function updateDifficultyIndicators() {
            document.querySelectorAll('.difficulty-dot').forEach((dot, index) => {
                dot.classList.remove('active', 'easy', 'medium', 'hard');
                if (index === 0 && difficulty === 'easy') {
                    dot.classList.add('active', 'easy');
                } else if (index === 1 && difficulty === 'medium') {
                    dot.classList.add('active', 'medium');
                } else if (index === 2 && difficulty === 'hard') {
                    dot.classList.add('active', 'hard');
                }
            });
        }

        function startQuiz() {
            // Generate questions based on settings
            questions = generateQuestions();
            if (questions.length === 0) {
                alert('No questions available for the selected region and difficulty. Please try different settings.');
                return;
            }

            currentQuestion = 0;
            score = 0;
            currentStreak = 0;
            quizHistory = [];

            // Start timer if enabled
            if (timeLimit > 0) {
                timeLeft = timeLimit;
                startTimer();
            }

            showQuestion();
            updateQuizControls();
        }

        function generateQuestions() {
            let allQuestions = [];
            
            // Collect questions from selected regions
            if (selectedRegion === 'all') {
                Object.values(quizData).forEach(regionQuestions => {
                    allQuestions = allQuestions.concat(regionQuestions);
                });
            } else {
                allQuestions = quizData[selectedRegion] || [];
            }

            // Filter by difficulty
            allQuestions = allQuestions.filter(q => q.difficulty === difficulty);

            // Shuffle and limit to question count
            allQuestions = shuffleArray(allQuestions).slice(0, Math.min(questionCount, allQuestions.length));

            return allQuestions;
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                finishQuiz();
                return;
            }

            const question = questions[currentQuestion];
            document.getElementById('countryName').textContent = question.country + '?';

            // Generate answer options
            const options = generateAnswerOptions(question);
            displayAnswerOptions(options);

            // Reset display
            document.getElementById('quizDisplay').classList.remove('correct', 'incorrect');
            document.getElementById('explanationDisplay').style.display = 'none';
        }

        function generateAnswerOptions(correctQuestion) {
            const options = [correctQuestion.capital];
            
            // Get other random capitals from the same region
            let otherCapitals = [];
            if (selectedRegion === 'all') {
                Object.values(quizData).forEach(regionQuestions => {
                    regionQuestions.forEach(q => {
                        if (q.capital !== correctQuestion.capital) {
                            otherCapitals.push(q.capital);
                        }
                    });
                });
            } else {
                quizData[selectedRegion].forEach(q => {
                    if (q.capital !== correctQuestion.capital) {
                        otherCapitals.push(q.capital);
                    }
                });
            }

            // Shuffle and take 3 random options
            otherCapitals = shuffleArray(otherCapitals).slice(0, 3);
            options.push(...otherCapitals);

            return shuffleArray(options);
        }

        function displayAnswerOptions(options) {
            const answerOptions = document.getElementById('answerOptions');
            answerOptions.innerHTML = '';

            options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'answer-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(option);
                answerOptions.appendChild(optionDiv);
            });
        }

        function selectAnswer(selectedCapital) {
            const question = questions[currentQuestion];
            const isCorrect = selectedCapital === question.capital;

            // Mark selected answer
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
                if (option.textContent === selectedCapital) {
                    option.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            });

            // Mark correct answer
            document.querySelectorAll('.answer-option').forEach(option => {
                if (option.textContent === question.capital) {
                    option.classList.add('correct');
                }
            });

            // Update score and streak
            if (isCorrect) {
                score++;
                currentStreak++;
            } else {
                currentStreak = 0;
            }

            // Add to history
            addToHistory(question, selectedCapital, isCorrect);

            // Show explanation
            showExplanation(question, selectedCapital, isCorrect);

            // Update quiz controls
            updateQuizControls();
        }

        function showExplanation(question, selectedCapital, isCorrect) {
            const explanationText = isCorrect 
                ? `Correct! ${question.capital} is indeed the capital of ${question.country}.`
                : `Incorrect. The capital of ${question.country} is ${question.capital}, not ${selectedCapital}.`;

            document.getElementById('explanationText').textContent = explanationText;
            document.getElementById('explanationDisplay').style.display = 'block';
        }

        function updateQuizControls() {
            const startBtn = document.getElementById('startBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');

            if (currentQuestion === 0) {
                startBtn.style.display = 'none';
                nextBtn.style.display = 'inline-flex';
            }

            if (currentQuestion >= questions.length - 1) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'inline-flex';
            }
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function finishQuiz() {
            if (timer) {
                clearInterval(timer);
            }

            // Calculate final results
            const accuracy = Math.round((score / questions.length) * 100);
            
            // Update results display
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('currentStreak').textContent = currentStreak;

            // Reset quiz display
            document.getElementById('quizDisplay').innerHTML = `
                <div class="question-display">
                    <div class="question-text">Quiz Complete!</div>
                    <div class="country-name">Your Score: ${score}/${questions.length}</div>
                </div>
                <div class="quiz-controls">
                    <button class="control-btn btn-primary" onclick="startQuiz()">
                        <i class="fas fa-redo"></i> Try Again
                    </button>
                </div>
            `;

            // Save quiz results
            saveQuizResults();
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    finishQuiz();
                }
            }, 1000);
        }

        function addToHistory(question, selectedCapital, isCorrect) {
            const historyItem = {
                country: question.country,
                correctCapital: question.capital,
                userAnswer: selectedCapital,
                isCorrect: isCorrect,
                region: question.region,
                difficulty: question.difficulty,
                timestamp: new Date().toISOString()
            };
            
            quizHistory.unshift(historyItem);
            
            // Keep only last 50 questions
            if (quizHistory.length > 50) {
                quizHistory = quizHistory.slice(0, 50);
            }
        }

        function saveQuizResults() {
            const results = {
                score: score,
                total: questions.length,
                accuracy: Math.round((score / questions.length) * 100),
                region: selectedRegion,
                difficulty: difficulty,
                timestamp: new Date().toISOString()
            };
            
            const savedResults = JSON.parse(localStorage.getItem('capitalCitiesQuizResults') || '[]');
            savedResults.push(results);
            localStorage.setItem('capitalCitiesQuizResults', JSON.stringify(savedResults));
        }

        function loadQuizHistory() {
            const saved = localStorage.getItem('capitalCitiesQuizResults');
            if (saved) {
                const results = JSON.parse(saved);
                // Could display recent quiz results here
            }
        }
    </script>
</body>
</html>
