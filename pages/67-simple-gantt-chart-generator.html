<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Gantt Chart Generator - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .gantt-container { display: grid; grid-template-columns: 350px 1fr; gap: 30px; margin-bottom: 30px; }
        .controls-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); height: fit-content; }
        .chart-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); overflow-x: auto; }
        
        .control-section { margin-bottom: 30px; }
        .control-section h3 { color: var(--primary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select { width: 100%; padding: 10px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        
        .task-list { margin: 20px 0; }
        .task-item { background: var(--bg-secondary); padding: 15px; border-radius: var(--border-radius); margin-bottom: 10px; border: 1px solid var(--border-color); }
        .task-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .task-name { font-weight: 600; color: var(--text-primary); }
        .task-actions { display: flex; gap: 8px; }
        .btn-small { padding: 4px 8px; border: none; border-radius: var(--border-radius); cursor: pointer; font-size: 0.8rem; transition: var(--transition); }
        .btn-edit { background: var(--primary-color); color: white; }
        .btn-edit:hover { background: var(--primary-dark); }
        .btn-delete { background: #ef4444; color: white; }
        .btn-delete:hover { background: #dc2626; }
        .task-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
        .task-field { display: flex; flex-direction: column; }
        .task-field label { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 2px; }
        .task-field span { font-size: 0.9rem; color: var(--text-primary); }
        
        .add-task-btn { background: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; margin: 20px 0; width: 100%; justify-content: center; }
        .add-task-btn:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .gantt-chart { min-width: 800px; }
        .gantt-header { display: flex; border-bottom: 2px solid var(--border-color); margin-bottom: 20px; }
        .gantt-task-column { width: 200px; padding: 10px; font-weight: 600; color: var(--primary-color); background: var(--bg-secondary); }
        .gantt-date-column { flex: 1; padding: 10px; text-align: center; font-weight: 600; color: var(--text-primary); background: var(--bg-secondary); border-left: 1px solid var(--border-color); }
        
        .gantt-row { display: flex; margin-bottom: 10px; align-items: center; min-height: 40px; }
        .gantt-task-name { width: 200px; padding: 10px; font-weight: 500; color: var(--text-primary); background: white; border-right: 1px solid var(--border-color); }
        .gantt-timeline { flex: 1; position: relative; height: 40px; background: white; border: 1px solid var(--border-color); }
        .gantt-bar { position: absolute; height: 20px; top: 10px; background: var(--primary-color); border-radius: 4px; cursor: pointer; transition: var(--transition); }
        .gantt-bar:hover { transform: scaleY(1.2); box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        
        .action-buttons { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        .btn-primary { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .gantt-container { grid-template-columns: 1fr; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Simple Gantt Chart Generator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Work & Productivity</span>
                        <span class="page-number-badge">Page #67</span>
                    </div>
                </div>
            </div>
            
            <div class="gantt-container">
                <div class="controls-panel">
                    <div class="control-section">
                        <h3>Project Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Project Name</label>
                            <input type="text" class="form-input" id="projectName" placeholder="My Project">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Start Date</label>
                            <input type="date" class="form-input" id="startDate">
                        </div>
                        <div class="form-group">
                            <label class="form-label">End Date</label>
                            <input type="date" class="form-input" id="endDate">
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h3>Add New Task</h3>
                        <div class="form-group">
                            <label class="form-label">Task Name</label>
                            <input type="text" class="form-input" id="newTaskName" placeholder="Task name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Start Date</label>
                            <input type="date" class="form-input" id="newTaskStart">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Duration (days)</label>
                            <input type="number" class="form-input" id="newTaskDuration" placeholder="5" min="1" max="365">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Priority</label>
                            <select class="form-select" id="newTaskPriority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Dependencies</label>
                            <select class="form-select" id="newTaskDependencies" multiple>
                                <option value="">No dependencies</option>
                            </select>
                        </div>
                        <button class="add-task-btn" id="addTaskBtn">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                    
                    <div class="control-section">
                        <h3>Task List</h3>
                        <div id="taskList" class="task-list">
                            <!-- Tasks will be listed here -->
                        </div>
                    </div>
                </div>
                
                <div class="chart-panel">
                    <h2>Gantt Chart</h2>
                    <div id="ganttChart" class="gantt-chart">
                        <!-- Gantt chart will be generated here -->
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-primary" id="exportChart">
                    <i class="fas fa-file-export"></i> Export Chart
                </button>
                <button class="btn-secondary" id="saveProject">
                    <i class="fas fa-save"></i> Save Project
                </button>
                <button class="btn-secondary" id="loadTemplate">
                    <i class="fas fa-download"></i> Load Template
                </button>
            </div>
        </div>
    </div>
    
    <script>
        class GanttChartGenerator {
            constructor() {
                this.tasks = [];
                this.projectStartDate = new Date();
                this.projectEndDate = new Date();
                this.projectEndDate.setDate(this.projectStartDate.getDate() + 30);
                
                this.initializeElements();
                this.setupEventListeners();
                this.loadSavedProject();
                this.updateDependenciesList();
                this.renderGanttChart();
            }
            
            initializeElements() {
                this.projectName = document.getElementById('projectName');
                this.startDate = document.getElementById('startDate');
                this.endDate = document.getElementById('endDate');
                this.newTaskName = document.getElementById('newTaskName');
                this.newTaskStart = document.getElementById('newTaskStart');
                this.newTaskDuration = document.getElementById('newTaskDuration');
                this.newTaskPriority = document.getElementById('newTaskPriority');
                this.newTaskDependencies = document.getElementById('newTaskDependencies');
                this.taskList = document.getElementById('taskList');
                this.ganttChart = document.getElementById('ganttChart');
                
                // Set default dates
                const today = new Date().toISOString().split('T')[0];
                this.startDate.value = today;
                this.endDate.value = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                this.newTaskStart.value = today;
                
                // Set default project name
                this.projectName.value = 'My Project';
            }
            
            setupEventListeners() {
                document.getElementById('addTaskBtn').addEventListener('click', () => {
                    this.addTask();
                });
                
                document.getElementById('exportChart').addEventListener('click', () => {
                    this.exportChart();
                });
                
                document.getElementById('saveProject').addEventListener('click', () => {
                    this.saveProject();
                });
                
                document.getElementById('loadTemplate').addEventListener('click', () => {
                    this.loadTemplate();
                });
                
                // Auto-save on input change
                const inputs = document.querySelectorAll('input, select');
                inputs.forEach(input => {
                    input.addEventListener('input', () => {
                        this.saveProject();
                        if (input === this.startDate || input === this.endDate) {
                            this.updateDependenciesList();
                            this.renderGanttChart();
                        }
                    });
                });
            }
            
            addTask() {
                const taskName = this.newTaskName.value.trim();
                const startDate = this.newTaskStart.value;
                const duration = parseInt(this.newTaskDuration.value);
                const priority = this.newTaskPriority.value;
                const dependencies = Array.from(this.newTaskDependencies.selectedOptions).map(option => option.value).filter(Boolean);
                
                if (!taskName || !startDate || !duration) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                const task = {
                    id: Date.now(),
                    name: taskName,
                    startDate: startDate,
                    duration: duration,
                    priority: priority,
                    dependencies: dependencies,
                    completed: 0 // 0-100 percentage
                };
                
                this.tasks.push(task);
                this.renderTaskList();
                this.updateDependenciesList();
                this.renderGanttChart();
                this.saveProject();
                
                // Reset form
                this.newTaskName.value = '';
                this.newTaskStart.value = this.startDate.value;
                this.newTaskDuration.value = '';
                this.newTaskPriority.value = 'medium';
                this.newTaskDependencies.selectedIndex = 0;
            }
            
            renderTaskList() {
                this.taskList.innerHTML = '';
                
                if (this.tasks.length === 0) {
                    this.taskList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">No tasks added yet. Add your first task above!</p>';
                    return;
                }
                
                this.tasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'task-item';
                    taskElement.innerHTML = `
                        <div class="task-header">
                            <div class="task-name">${task.name}</div>
                            <div class="task-actions">
                                <button class="btn-small btn-edit" onclick="ganttGenerator.editTask(${task.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-small btn-delete" onclick="ganttGenerator.deleteTask(${task.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="task-details">
                            <div class="task-field">
                                <label>Start Date</label>
                                <span>${task.startDate}</span>
                            </div>
                            <div class="task-field">
                                <label>Duration</label>
                                <span>${task.duration} days</span>
                            </div>
                            <div class="task-field">
                                <label>Priority</label>
                                <span>${task.priority}</span>
                            </div>
                            <div class="task-field">
                                <label>Dependencies</label>
                                <span>${task.dependencies.length > 0 ? task.dependencies.join(', ') : 'None'}</span>
                            </div>
                        </div>
                    `;
                    
                    this.taskList.appendChild(taskElement);
                });
            }
            
            updateDependenciesList() {
                const dependenciesSelect = this.newTaskDependencies;
                const currentValue = dependenciesSelect.value;
                
                // Clear existing options except "No dependencies"
                dependenciesSelect.innerHTML = '<option value="">No dependencies</option>';
                
                // Add task names as options
                this.tasks.forEach(task => {
                    const option = document.createElement('option');
                    option.value = task.name;
                    option.textContent = task.name;
                    dependenciesSelect.appendChild(option);
                });
                
                // Restore previous selection if possible
                if (currentValue && this.tasks.some(task => task.name === currentValue)) {
                    dependenciesSelect.value = currentValue;
                }
            }
            
            renderGanttChart() {
                if (this.tasks.length === 0) {
                    this.ganttChart.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 40px;">Add tasks to see your Gantt chart</p>';
                    return;
                }
                
                const startDate = new Date(this.startDate.value);
                const endDate = new Date(this.endDate.value);
                const totalDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
                
                // Generate date headers
                let dateHeaders = '';
                for (let i = 0; i < totalDays; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);
                    const dateStr = currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    dateHeaders += `<div class="gantt-date-column">${dateStr}</div>`;
                }
                
                // Generate task rows
                let taskRows = '';
                this.tasks.forEach(task => {
                    const taskStart = new Date(task.startDate);
                    const daysFromStart = Math.ceil((taskStart - startDate) / (1000 * 60 * 60 * 24));
                    const leftPosition = (daysFromStart / totalDays) * 100;
                    const width = (task.duration / totalDays) * 100;
                    
                    const priorityColors = {
                        'low': '#10b981',
                        'medium': '#3b82f6',
                        'high': '#f59e0b',
                        'critical': '#ef4444'
                    };
                    
                    taskRows += `
                        <div class="gantt-row">
                            <div class="gantt-task-name">${task.name}</div>
                            <div class="gantt-timeline">
                                <div class="gantt-bar" 
                                     style="left: ${leftPosition}%; width: ${width}%; background: ${priorityColors[task.priority]};"
                                     title="${task.name} (${task.duration} days, ${task.priority} priority)">
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                this.ganttChart.innerHTML = `
                    <div class="gantt-header">
                        <div class="gantt-task-column">Task</div>
                        ${dateHeaders}
                    </div>
                    ${taskRows}
                `;
            }
            
            editTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    const newName = prompt('Task name:', task.name);
                    if (newName !== null && newName.trim()) {
                        task.name = newName.trim();
                        this.renderTaskList();
                        this.updateDependenciesList();
                        this.renderGanttChart();
                        this.saveProject();
                    }
                }
            }
            
            deleteTask(taskId) {
                if (confirm('Are you sure you want to delete this task?')) {
                    this.tasks = this.tasks.filter(t => t.id !== taskId);
                    this.renderTaskList();
                    this.updateDependenciesList();
                    this.renderGanttChart();
                    this.saveProject();
                }
            }
            
            loadTemplate() {
                const template = {
                    name: 'Website Development Project',
                    startDate: new Date().toISOString().split('T')[0],
                    endDate: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    tasks: [
                        { id: Date.now() + 1, name: 'Planning & Design', startDate: new Date().toISOString().split('T')[0], duration: 7, priority: 'high', dependencies: [], completed: 0 },
                        { id: Date.now() + 2, name: 'Frontend Development', startDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], duration: 14, priority: 'medium', dependencies: ['Planning & Design'], completed: 0 },
                        { id: Date.now() + 3, name: 'Backend Development', startDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], duration: 21, priority: 'medium', dependencies: ['Planning & Design'], completed: 0 },
                        { id: Date.now() + 4, name: 'Testing & QA', startDate: new Date(Date.now() + 28 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], duration: 7, priority: 'high', dependencies: ['Frontend Development', 'Backend Development'], completed: 0 },
                        { id: Date.now() + 5, name: 'Deployment', startDate: new Date(Date.now() + 35 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], duration: 3, priority: 'critical', dependencies: ['Testing & QA'], completed: 0 }
                    ]
                };
                
                this.projectName.value = template.name;
                this.startDate.value = template.startDate;
                this.endDate.value = template.endDate;
                this.tasks = template.tasks;
                
                this.renderTaskList();
                this.updateDependenciesList();
                this.renderGanttChart();
                this.saveProject();
            }
            
            exportChart() {
                if (this.tasks.length === 0) {
                    alert('No tasks to export!');
                    return;
                }
                
                let csvContent = 'Task Name,Start Date,Duration (days),Priority,Dependencies\n';
                
                this.tasks.forEach(task => {
                    csvContent += `${task.name},${task.startDate},${task.duration},${task.priority},${task.dependencies.join(';')}\n`;
                });
                
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `gantt-chart-${this.projectName.value || 'project'}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            saveProject() {
                const projectData = {
                    name: this.projectName.value,
                    startDate: this.startDate.value,
                    endDate: this.endDate.value,
                    tasks: this.tasks
                };
                
                localStorage.setItem('ganttProjectData', JSON.stringify(projectData));
            }
            
            loadSavedProject() {
                const saved = localStorage.getItem('ganttProjectData');
                if (saved) {
                    try {
                        const projectData = JSON.parse(saved);
                        this.projectName.value = projectData.name || '';
                        this.startDate.value = projectData.startDate || '';
                        this.endDate.value = projectData.endDate || '';
                        this.tasks = projectData.tasks || [];
                        
                        this.renderTaskList();
                        this.updateDependenciesList();
                        this.renderGanttChart();
                    } catch (error) {
                        console.error('Error loading saved project:', error);
                    }
                }
            }
        }
        
        let ganttGenerator;
        document.addEventListener('DOMContentLoaded', () => {
            ganttGenerator = new GanttChartGenerator();
        });
    </script>
</body>
</html>
