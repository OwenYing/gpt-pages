<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Scaling Calculator - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .calculator-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .input-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        .output-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        
        .form-section { margin-bottom: 30px; }
        .form-section h3 { color: var(--primary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select { width: 100%; padding: 10px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        
        .serving-controls { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .serving-input { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .serving-btn { width: 40px; height: 40px; border: 1px solid var(--border-color); background: white; border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .serving-btn:hover { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        .serving-value { font-size: 1.5rem; font-weight: 600; color: var(--primary-color); min-width: 60px; text-align: center; }
        
        .ingredient-list { max-height: 400px; overflow-y: auto; }
        .ingredient-item { background: var(--bg-secondary); padding: 15px; border-radius: var(--border-radius); margin-bottom: 15px; border: 1px solid var(--border-color); }
        .ingredient-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .ingredient-name { font-weight: 600; color: var(--text-primary); }
        .ingredient-actions { display: flex; gap: 5px; }
        .action-btn { width: 24px; height: 24px; border: none; background: var(--bg-tertiary); border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; transition: var(--transition); }
        .action-btn:hover { background: var(--primary-color); color: white; }
        .action-btn.delete:hover { background: #ef4444; }
        .ingredient-inputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        
        .scaled-recipe { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .recipe-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .recipe-title { font-weight: 600; color: var(--text-primary); font-size: 1.1rem; }
        .scaling-factor { background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 10px; font-size: 0.8rem; }
        .scaled-ingredients { display: flex; flex-direction: column; gap: 10px; }
        .scaled-ingredient { background: white; padding: 12px; border-radius: var(--border-radius); border: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .scaled-amount { font-weight: 600; color: var(--primary-color); }
        
        .action-buttons { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        .btn-primary { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        
        .recipe-templates { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-top: 20px; }
        .template-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .template-card { background: white; padding: 15px; border-radius: var(--border-radius); border: 1px solid var(--border-color); cursor: pointer; transition: var(--transition); }
        .template-card:hover { background: var(--bg-tertiary); transform: translateY(-2px); box-shadow: var(--shadow-sm); }
        .template-title { font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .template-servings { font-size: 0.8rem; color: var(--text-secondary); }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .calculator-container { grid-template-columns: 1fr; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
            .ingredient-inputs { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Recipe Scaling Calculator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Home & Lifestyle</span>
                        <span class="page-number-badge">Page #76</span>
                    </div>
                </div>
            </div>
            
            <div class="calculator-container">
                <div class="input-panel">
                    <div class="form-section">
                        <h3>Recipe Input</h3>
                        
                        <div class="serving-controls">
                            <h4>Target Servings</h4>
                            <div class="serving-input">
                                <button class="serving-btn" onclick="adjustServings(-1)">-</button>
                                <div class="serving-value" id="targetServings">4</div>
                                <button class="serving-btn" onclick="adjustServings(1)">+</button>
                            </div>
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                                Original recipe serves <span id="originalServings">4</span> people
                            </p>
                        </div>
                        
                        <div class="ingredient-list" id="ingredientList">
                            <!-- Ingredients will be populated here -->
                        </div>
                        
                        <button class="btn-primary" onclick="addIngredient()">
                            <i class="fas fa-plus"></i> Add Ingredient
                        </button>
                        
                        <div class="recipe-templates">
                            <h4>Recipe Templates</h4>
                            <div class="template-grid" id="templateGrid">
                                <!-- Templates will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="output-panel">
                    <div class="form-section">
                        <h3>Scaled Recipe</h3>
                        
                        <div class="scaled-recipe" id="scaledRecipe">
                            <div class="recipe-header">
                                <div class="recipe-title">Your Scaled Recipe</div>
                                <div class="scaling-factor" id="scalingFactor">1.0x</div>
                            </div>
                            <div class="scaled-ingredients" id="scaledIngredients">
                                <!-- Scaled ingredients will be populated here -->
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn-primary" onclick="exportRecipe()">
                                <i class="fas fa-download"></i> Export Recipe
                            </button>
                            <button class="btn-secondary" onclick="printRecipe()">
                                <i class="fas fa-print"></i> Print Recipe
                            </button>
                            <button class="btn-secondary" onclick="clearRecipe()">
                                <i class="fas fa-trash"></i> Clear Recipe
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Recipe data structure
        let ingredients = [];
        let originalServings = 4;
        let targetServings = 4;
        
        // Recipe templates
        const recipeTemplates = [
            {
                name: 'Chocolate Chip Cookies',
                servings: 24,
                ingredients: [
                    { name: 'All-purpose flour', amount: 2.25, unit: 'cups' },
                    { name: 'Baking soda', amount: 1, unit: 'tsp' },
                    { name: 'Salt', amount: 1, unit: 'tsp' },
                    { name: 'Butter', amount: 1, unit: 'cup' },
                    { name: 'Granulated sugar', amount: 0.75, unit: 'cup' },
                    { name: 'Brown sugar', amount: 0.75, unit: 'cup' },
                    { name: 'Vanilla extract', amount: 1, unit: 'tsp' },
                    { name: 'Eggs', amount: 2, unit: 'large' },
                    { name: 'Chocolate chips', amount: 2, unit: 'cups' }
                ]
            },
            {
                name: 'Pancakes',
                servings: 4,
                ingredients: [
                    { name: 'All-purpose flour', amount: 1.5, unit: 'cups' },
                    { name: 'Baking powder', amount: 3.5, unit: 'tsp' },
                    { name: 'Salt', amount: 1, unit: 'tsp' },
                    { name: 'Sugar', amount: 1, unit: 'tbsp' },
                    { name: 'Milk', amount: 1.25, unit: 'cups' },
                    { name: 'Egg', amount: 1, unit: 'large' },
                    { name: 'Butter', amount: 3, unit: 'tbsp' }
                ]
            },
            {
                name: 'Spaghetti Carbonara',
                servings: 4,
                ingredients: [
                    { name: 'Spaghetti', amount: 1, unit: 'lb' },
                    { name: 'Bacon', amount: 8, unit: 'slices' },
                    { name: 'Eggs', amount: 4, unit: 'large' },
                    { name: 'Parmesan cheese', amount: 1, unit: 'cup' },
                    { name: 'Black pepper', amount: 1, unit: 'tsp' },
                    { name: 'Salt', amount: 1, unit: 'tsp' }
                ]
            }
        ];
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            populateTemplates();
            updateScaling();
        });
        
        function populateTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            templateGrid.innerHTML = '';
            
            recipeTemplates.forEach(template => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card';
                templateCard.innerHTML = `
                    <div class="template-title">${template.name}</div>
                    <div class="template-servings">Serves ${template.servings}</div>
                `;
                templateCard.onclick = () => loadTemplate(template);
                templateGrid.appendChild(templateCard);
            });
        }
        
        function loadTemplate(template) {
            if (confirm(`Load "${template.name}" recipe? This will replace your current ingredients.`)) {
                ingredients = [...template.ingredients];
                originalServings = template.servings;
                targetServings = template.servings;
                
                document.getElementById('originalServings').textContent = originalServings;
                document.getElementById('targetServings').textContent = targetServings;
                
                renderIngredients();
                updateScaling();
                alert(`Recipe "${template.name}" loaded successfully!`);
            }
        }
        
        function addIngredient() {
            const newIngredient = {
                id: Date.now(),
                name: '',
                amount: 1,
                unit: 'cup'
            };
            
            ingredients.push(newIngredient);
            renderIngredients();
        }
        
        function renderIngredients() {
            const ingredientList = document.getElementById('ingredientList');
            ingredientList.innerHTML = '';
            
            if (ingredients.length === 0) {
                ingredientList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">No ingredients added yet. Add some ingredients or load a template!</p>';
                return;
            }
            
            ingredients.forEach((ingredient, index) => {
                const ingredientElement = document.createElement('div');
                ingredientElement.className = 'ingredient-item';
                ingredientElement.innerHTML = `
                    <div class="ingredient-header">
                        <div class="ingredient-name">Ingredient ${index + 1}</div>
                        <div class="ingredient-actions">
                            <button class="action-btn" onclick="editIngredient(${ingredient.id})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" onclick="removeIngredient(${ingredient.id})" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="ingredient-inputs">
                        <input type="text" class="form-input" placeholder="Ingredient name" value="${ingredient.name}" onchange="updateIngredient(${ingredient.id}, 'name', this.value)">
                        <input type="number" class="form-input" placeholder="Amount" value="${ingredient.amount}" step="0.1" min="0" onchange="updateIngredient(${ingredient.id}, 'amount', parseFloat(this.value))">
                        <select class="form-select" onchange="updateIngredient(${ingredient.id}, 'unit', this.value)">
                            <option value="cup" ${ingredient.unit === 'cup' ? 'selected' : ''}>cup</option>
                            <option value="tbsp" ${ingredient.unit === 'tbsp' ? 'selected' : ''}>tbsp</option>
                            <option value="tsp" ${ingredient.unit === 'tsp' ? 'selected' : ''}>tsp</option>
                            <option value="oz" ${ingredient.unit === 'oz' ? 'selected' : ''}>oz</option>
                            <option value="lb" ${ingredient.unit === 'lb' ? 'selected' : ''}>lb</option>
                            <option value="g" ${ingredient.unit === 'g' ? 'selected' : ''}>g</option>
                            <option value="ml" ${ingredient.unit === 'ml' ? 'selected' : ''}>ml</option>
                            <option value="large" ${ingredient.unit === 'large' ? 'selected' : ''}>large</option>
                            <option value="medium" ${ingredient.unit === 'medium' ? 'selected' : ''}>medium</option>
                            <option value="small" ${ingredient.unit === 'small' ? 'selected' : ''}>small</option>
                        </select>
                    </div>
                `;
                ingredientList.appendChild(ingredientElement);
            });
        }
        
        function updateIngredient(id, field, value) {
            const ingredient = ingredients.find(i => i.id === id);
            if (ingredient) {
                ingredient[field] = value;
                updateScaling();
            }
        }
        
        function removeIngredient(id) {
            ingredients = ingredients.filter(i => i.id !== id);
            renderIngredients();
            updateScaling();
        }
        
        function editIngredient(id) {
            const ingredient = ingredients.find(i => i.id === id);
            if (ingredient) {
                const newName = prompt('Enter ingredient name:', ingredient.name);
                if (newName !== null) {
                    ingredient.name = newName;
                    const newAmount = prompt('Enter amount:', ingredient.amount);
                    if (newAmount !== null && !isNaN(newAmount)) {
                        ingredient.amount = parseFloat(newAmount);
                        renderIngredients();
                        updateScaling();
                    }
                }
            }
        }
        
        function adjustServings(change) {
            targetServings = Math.max(1, targetServings + change);
            document.getElementById('targetServings').textContent = targetServings;
            updateScaling();
        }
        
        function updateScaling() {
            if (ingredients.length === 0) return;
            
            const scalingFactor = targetServings / originalServings;
            document.getElementById('scalingFactor').textContent = scalingFactor.toFixed(1) + 'x';
            
            const scaledIngredients = document.getElementById('scaledIngredients');
            scaledIngredients.innerHTML = '';
            
            ingredients.forEach(ingredient => {
                const scaledAmount = ingredient.amount * scalingFactor;
                const formattedAmount = formatAmount(scaledAmount, ingredient.unit);
                
                const ingredientElement = document.createElement('div');
                ingredientElement.className = 'scaled-ingredient';
                ingredientElement.innerHTML = `
                    <span>${ingredient.name}</span>
                    <span class="scaled-amount">${formattedAmount}</span>
                `;
                scaledIngredients.appendChild(ingredientElement);
            });
        }
        
        function formatAmount(amount, unit) {
            if (unit === 'large' || unit === 'medium' || unit === 'small') {
                return Math.round(amount) + ' ' + unit;
            }
            
            if (amount < 1) {
                if (unit === 'tbsp' || unit === 'tsp') {
                    const whole = Math.floor(amount);
                    const fraction = amount - whole;
                    let fractionText = '';
                    
                    if (fraction === 0.25) fractionText = '¼';
                    else if (fraction === 0.33) fractionText = '⅓';
                    else if (fraction === 0.5) fractionText = '½';
                    else if (fraction === 0.67) fractionText = '⅔';
                    else if (fraction === 0.75) fractionText = '¾';
                    else fractionText = fraction.toFixed(2);
                    
                    return whole > 0 ? `${whole} ${fractionText} ${unit}` : `${fractionText} ${unit}`;
                }
            }
            
            return amount.toFixed(2) + ' ' + unit;
        }
        
        function exportRecipe() {
            if (ingredients.length === 0) {
                alert('No recipe to export!');
                return;
            }
            
            const scalingFactor = targetServings / originalServings;
            let exportText = 'SCALED RECIPE\n';
            exportText += 'Generated on: ' + new Date().toLocaleDateString() + '\n\n';
            exportText += `Original servings: ${originalServings}\n`;
            exportText += `Target servings: ${targetServings}\n`;
            exportText += `Scaling factor: ${scalingFactor.toFixed(1)}x\n\n`;
            exportText += 'INGREDIENTS:\n';
            
            ingredients.forEach(ingredient => {
                const scaledAmount = ingredient.amount * scalingFactor;
                const formattedAmount = formatAmount(scaledAmount, ingredient.unit);
                exportText += `• ${formattedAmount} ${ingredient.name}\n`;
            });
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'scaled-recipe.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function printRecipe() {
            if (ingredients.length === 0) {
                alert('No recipe to print!');
                return;
            }
            
            const printWindow = window.open('', '_blank');
            const scalingFactor = targetServings / originalServings;
            
            printWindow.document.write(`
                <html>
                <head>
                    <title>Scaled Recipe</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .ingredient { margin: 10px 0; padding: 5px 0; border-bottom: 1px solid #eee; }
                        .amount { font-weight: bold; color: #6366f1; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Scaled Recipe</h1>
                        <p>Original: ${originalServings} servings | Target: ${targetServings} servings | Scale: ${scalingFactor.toFixed(1)}x</p>
                    </div>
                    <h2>Ingredients:</h2>
                    ${ingredients.map(ingredient => {
                        const scaledAmount = ingredient.amount * scalingFactor;
                        const formattedAmount = formatAmount(scaledAmount, ingredient.unit);
                        return `<div class="ingredient"><span class="amount">${formattedAmount}</span> ${ingredient.name}</div>`;
                    }).join('')}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.print();
        }
        
        function clearRecipe() {
            if (confirm('Are you sure you want to clear the recipe?')) {
                ingredients = [];
                originalServings = 4;
                targetServings = 4;
                document.getElementById('originalServings').textContent = originalServings;
                document.getElementById('targetServings').textContent = targetServings;
                renderIngredients();
                updateScaling();
            }
        }
    </script>
</body>
</html>
