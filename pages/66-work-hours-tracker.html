<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Hours Tracker - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .tracker-container { background: white; padding: 40px; border-radius: var(--border-radius); margin-bottom: 30px; box-shadow: var(--shadow-md); }
        .timer-display { font-size: 3rem; font-weight: 700; font-family: 'Space Grotesk', sans-serif; color: var(--primary-color); text-align: center; margin: 30px 0; text-shadow: 0 2px 10px rgba(99, 102, 241, 0.2); }
        .timer-controls { display: flex; justify-content: center; gap: 15px; margin: 30px 0; flex-wrap: wrap; }
        .timer-btn { padding: 12px 24px; border: none; border-radius: var(--border-radius); font-weight: 600; cursor: pointer; transition: var(--transition); font-size: 1rem; min-width: 120px; }
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .session-form { background: var(--bg-secondary); padding: 25px; border-radius: var(--border-radius); margin: 30px 0; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-label { font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select, .form-textarea { padding: 10px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .form-textarea { resize: vertical; min-height: 80px; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-card { background: white; padding: 25px; border-radius: var(--border-radius); text-align: center; border: 1px solid var(--border-color); }
        .stat-number { font-size: 2rem; font-weight: 700; color: var(--primary-color); margin-bottom: 8px; }
        .stat-label { color: var(--text-secondary); font-size: 0.9rem; }
        
        .time-entries { background: white; padding: 30px; border-radius: var(--border-radius); margin-bottom: 30px; box-shadow: var(--shadow-md); }
        .entry-item { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 15px; border: 1px solid var(--border-color); }
        .entry-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .entry-date { font-weight: 600; color: var(--text-primary); }
        .entry-actions { display: flex; gap: 10px; }
        .btn-small { padding: 6px 12px; border: none; border-radius: var(--border-radius); cursor: pointer; font-size: 0.9rem; transition: var(--transition); }
        .btn-edit { background: var(--primary-color); color: white; }
        .btn-edit:hover { background: var(--primary-dark); }
        .btn-delete { background: #ef4444; color: white; }
        .btn-delete:hover { background: #dc2626; }
        .entry-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .entry-field { display: flex; flex-direction: column; }
        .entry-field label { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px; }
        .entry-field span { font-weight: 500; color: var(--text-primary); }
        
        .action-buttons { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .timer-display { font-size: 2.5rem; }
            .timer-controls { flex-direction: column; align-items: center; }
            .timer-btn { width: 100%; max-width: 200px; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Work Hours Tracker</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Work & Productivity</span>
                        <span class="page-number-badge">Page #66</span>
                    </div>
                </div>
            </div>
            
            <div class="tracker-container">
                <h2>Time Tracking</h2>
                <p>Track your work hours, calculate overtime, and manage project time efficiently.</p>
                
                <div class="timer-display" id="timerDisplay">00:00:00</div>
                
                <div class="timer-controls">
                    <button class="timer-btn btn-primary" id="startBtn">
                        <i class="fas fa-play"></i> Start Work
                    </button>
                    <button class="timer-btn btn-secondary" id="pauseBtn" disabled>
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button class="timer-btn btn-danger" id="stopBtn" disabled>
                        <i class="fas fa-stop"></i> Stop Work
                    </button>
                </div>
                
                <div class="session-form">
                    <h3>Session Details</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Project/Client</label>
                            <input type="text" class="form-input" id="projectName" placeholder="Project name or client">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Task Description</label>
                            <textarea class="form-textarea" id="taskDescription" placeholder="What are you working on?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hourly Rate ($)</label>
                            <input type="number" class="form-input" id="hourlyRate" placeholder="25.00" step="0.01" min="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Break Time (minutes)</label>
                            <input type="number" class="form-input" id="breakTime" placeholder="0" min="0" max="480">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalHours">0</div>
                    <div class="stat-label">Total Hours This Week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="overtimeHours">0</div>
                    <div class="stat-label">Overtime Hours</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalEarnings">$0</div>
                    <div class="stat-label">Total Earnings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="averageHours">0</div>
                    <div class="stat-label">Average Daily Hours</div>
                </div>
            </div>
            
            <div class="time-entries">
                <h2>Time Entries</h2>
                <div id="timeEntriesList">
                    <!-- Time entries will be displayed here -->
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-primary" id="exportData">
                    <i class="fas fa-file-export"></i> Export Data
                </button>
                <button class="btn-secondary" id="clearData">
                    <i class="fas fa-trash"></i> Clear All Data
                </button>
            </div>
        </div>
    </div>
    
    <script>
        class WorkHoursTracker {
            constructor() {
                this.isRunning = false;
                this.isPaused = false;
                this.startTime = null;
                this.pauseTime = 0;
                this.totalPauseTime = 0;
                this.timer = null;
                this.timeEntries = [];
                this.currentSession = null;
                this.standardWorkWeek = 40; // hours
                this.standardWorkDay = 8; // hours
                
                this.initializeElements();
                this.setupEventListeners();
                this.loadSavedData();
                this.updateStats();
                this.renderTimeEntries();
            }
            
            initializeElements() {
                this.timerDisplay = document.getElementById('timerDisplay');
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.stopBtn = document.getElementById('stopBtn');
                this.projectName = document.getElementById('projectName');
                this.taskDescription = document.getElementById('taskDescription');
                this.hourlyRate = document.getElementById('hourlyRate');
                this.breakTime = document.getElementById('breakTime');
                this.timeEntriesList = document.getElementById('timeEntriesList');
                
                // Set default hourly rate
                this.hourlyRate.value = '25.00';
            }
            
            setupEventListeners() {
                this.startBtn.addEventListener('click', () => this.startWork());
                this.pauseBtn.addEventListener('click', () => this.pauseWork());
                this.stopBtn.addEventListener('click', () => this.stopWork());
                
                document.getElementById('exportData').addEventListener('click', () => this.exportData());
                document.getElementById('clearData').addEventListener('click', () => this.clearData());
                
                // Auto-save on input change
                const inputs = document.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    input.addEventListener('input', () => {
                        this.saveData();
                    });
                });
            }
            
            startWork() {
                if (!this.isRunning) {
                    this.isRunning = true;
                    this.isPaused = false;
                    this.startTime = new Date();
                    this.pauseTime = 0;
                    this.totalPauseTime = 0;
                    
                    this.startBtn.disabled = true;
                    this.pauseBtn.disabled = false;
                    this.stopBtn.disabled = false;
                    
                    this.timer = setInterval(() => {
                        this.updateTimer();
                    }, 1000);
                    
                    // Create current session
                    this.currentSession = {
                        startTime: this.startTime,
                        projectName: this.projectName.value || 'General Work',
                        taskDescription: this.taskDescription.value || 'Work session',
                        hourlyRate: parseFloat(this.hourlyRate.value) || 0
                    };
                }
            }
            
            pauseWork() {
                if (this.isRunning && !this.isPaused) {
                    this.isPaused = true;
                    this.pauseTime = new Date();
                    this.pauseBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                    
                    clearInterval(this.timer);
                } else if (this.isPaused) {
                    this.isPaused = false;
                    this.totalPauseTime += new Date() - this.pauseTime;
                    this.pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                    
                    this.timer = setInterval(() => {
                        this.updateTimer();
                    }, 1000);
                }
            }
            
            stopWork() {
                if (this.isRunning) {
                    this.isRunning = false;
                    this.isPaused = false;
                    this.startBtn.disabled = false;
                    this.pauseBtn.disabled = true;
                    this.stopBtn.disabled = true;
                    
                    clearInterval(this.timer);
                    
                    // Calculate session duration
                    const endTime = new Date();
                    const totalDuration = endTime - this.startTime - this.totalPauseTime;
                    const hours = totalDuration / (1000 * 60 * 60);
                    
                    // Create time entry
                    const timeEntry = {
                        id: Date.now(),
                        date: this.startTime.toISOString().split('T')[0],
                        startTime: this.startTime.toTimeString().slice(0, 5),
                        endTime: endTime.toTimeString().slice(0, 5),
                        duration: hours,
                        projectName: this.currentSession.projectName,
                        taskDescription: this.currentSession.taskDescription,
                        hourlyRate: this.currentSession.hourlyRate,
                        earnings: hours * this.currentSession.hourlyRate,
                        breakTime: parseFloat(this.breakTime.value) || 0,
                        notes: ''
                    };
                    
                    this.timeEntries.unshift(timeEntry);
                    this.renderTimeEntries();
                    this.updateStats();
                    this.saveData();
                    
                    // Reset form
                    this.projectName.value = '';
                    this.taskDescription.value = '';
                    this.breakTime.value = '0';
                    
                    // Reset timer display
                    this.timerDisplay.textContent = '00:00:00';
                    this.currentSession = null;
                }
            }
            
            updateTimer() {
                if (this.startTime) {
                    const now = new Date();
                    const elapsed = now - this.startTime - this.totalPauseTime;
                    const hours = Math.floor(elapsed / (1000 * 60 * 60));
                    const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((elapsed % (1000 * 60)) / 1000);
                    
                    this.timerDisplay.textContent = 
                        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }
            
            renderTimeEntries() {
                this.timeEntriesList.innerHTML = '';
                
                if (this.timeEntries.length === 0) {
                    this.timeEntriesList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 40px;">No time entries yet. Start tracking your work hours!</p>';
                    return;
                }
                
                this.timeEntries.forEach(entry => {
                    const entryElement = document.createElement('div');
                    entryElement.className = 'entry-item';
                    entryElement.innerHTML = `
                        <div class="entry-header">
                            <div class="entry-date">${entry.date} - ${entry.startTime} to ${entry.endTime}</div>
                            <div class="entry-actions">
                                <button class="btn-small btn-edit" onclick="tracker.editEntry(${entry.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-small btn-delete" onclick="tracker.deleteEntry(${entry.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="entry-details">
                            <div class="entry-field">
                                <label>Project</label>
                                <span>${entry.projectName}</span>
                            </div>
                            <div class="entry-field">
                                <label>Task</label>
                                <span>${entry.taskDescription}</span>
                            </div>
                            <div class="entry-field">
                                <label>Duration</label>
                                <span>${entry.duration.toFixed(2)} hours</span>
                            </div>
                            <div class="entry-field">
                                <label>Rate</label>
                                <span>$${entry.hourlyRate.toFixed(2)}/hr</span>
                            </div>
                            <div class="entry-field">
                                <label>Earnings</label>
                                <span>$${entry.earnings.toFixed(2)}</span>
                            </div>
                            <div class="entry-field">
                                <label>Break Time</label>
                                <span>${entry.breakTime} minutes</span>
                            </div>
                        </div>
                    `;
                    
                    this.timeEntriesList.appendChild(entryElement);
                });
            }
            
            editEntry(entryId) {
                const entry = this.timeEntries.find(e => e.id === entryId);
                if (entry) {
                    // For simplicity, we'll just allow editing the notes field
                    const notes = prompt('Add notes to this entry:', entry.notes || '');
                    if (notes !== null) {
                        entry.notes = notes;
                        this.renderTimeEntries();
                        this.updateStats();
                        this.saveData();
                    }
                }
            }
            
            deleteEntry(entryId) {
                if (confirm('Are you sure you want to delete this time entry?')) {
                    this.timeEntries = this.timeEntries.filter(e => e.id !== entryId);
                    this.renderTimeEntries();
                    this.updateStats();
                    this.saveData();
                }
            }
            
            updateStats() {
                const now = new Date();
                const weekStart = new Date(now);
                weekStart.setDate(now.getDate() - now.getDay());
                weekStart.setHours(0, 0, 0, 0);
                
                const weekEnd = new Date(weekStart);
                weekEnd.setDate(weekStart.getDate() + 6);
                weekEnd.setHours(23, 59, 59, 999);
                
                // Filter entries for current week
                const weekEntries = this.timeEntries.filter(entry => {
                    const entryDate = new Date(entry.date);
                    return entryDate >= weekStart && entryDate <= weekEnd;
                });
                
                // Calculate totals
                const totalHours = weekEntries.reduce((sum, entry) => sum + entry.duration, 0);
                const overtimeHours = Math.max(0, totalHours - this.standardWorkWeek);
                const totalEarnings = weekEntries.reduce((sum, entry) => sum + entry.earnings, 0);
                
                // Calculate average daily hours
                const workDays = weekEntries.length;
                const averageHours = workDays > 0 ? totalHours / workDays : 0;
                
                // Update display
                document.getElementById('totalHours').textContent = totalHours.toFixed(2);
                document.getElementById('overtimeHours').textContent = overtimeHours.toFixed(2);
                document.getElementById('totalEarnings').textContent = `$${totalEarnings.toFixed(2)}`;
                document.getElementById('averageHours').textContent = averageHours.toFixed(2);
            }
            
            exportData() {
                if (this.timeEntries.length === 0) {
                    alert('No data to export!');
                    return;
                }
                
                let csvContent = 'Date,Start Time,End Time,Duration (hours),Project,Task,Rate ($/hr),Earnings,Break Time (min),Notes\n';
                
                this.timeEntries.forEach(entry => {
                    csvContent += `${entry.date},${entry.startTime},${entry.endTime},${entry.duration.toFixed(2)},${entry.projectName},${entry.taskDescription},${entry.hourlyRate.toFixed(2)},${entry.earnings.toFixed(2)},${entry.breakTime},${entry.notes || ''}\n`;
                });
                
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `work-hours-${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            clearData() {
                if (confirm('Are you sure you want to clear all time entries? This action cannot be undone.')) {
                    this.timeEntries = [];
                    this.renderTimeEntries();
                    this.updateStats();
                    this.saveData();
                }
            }
            
            saveData() {
                const data = {
                    timeEntries: this.timeEntries,
                    hourlyRate: this.hourlyRate.value
                };
                localStorage.setItem('workHoursData', JSON.stringify(data));
            }
            
            loadSavedData() {
                const saved = localStorage.getItem('workHoursData');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.timeEntries = data.timeEntries || [];
                        if (data.hourlyRate) {
                            this.hourlyRate.value = data.hourlyRate;
                        }
                    } catch (error) {
                        console.error('Error loading saved data:', error);
                    }
                }
            }
        }
        
        let tracker;
        document.addEventListener('DOMContentLoaded', () => {
            tracker = new WorkHoursTracker();
        });
    </script>
</body>
</html>
