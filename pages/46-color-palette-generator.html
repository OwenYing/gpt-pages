<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Generator - GPT Static Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .palette-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .palette-display {
            background: var(--bg-tertiary);
            padding: 40px;
            border-radius: 20px;
            margin: 30px 0;
            border: 3px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .palette-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .color-swatch {
            aspect-ratio: 1;
            border-radius: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .color-swatch:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .color-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            font-size: 0.8rem;
            font-weight: 500;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .color-swatch:hover .color-info {
            transform: translateY(0);
        }
        
        .palette-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .palette-btn {
            padding: 15px 30px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .palette-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .palette-btn.primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .palette-btn.primary:hover {
            background: var(--primary-dark);
        }
        
        .palette-filters {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .filter-group {
            text-align: center;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }
        
        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .style-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .style-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .style-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .style-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .palette-tools {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tools-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .tool-item {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .tool-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .tool-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .tool-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .tool-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .tool-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .tool-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .palette-history {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .history-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .history-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .history-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .history-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .history-color {
            aspect-ratio: 1;
            border-radius: 8px;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .history-style {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
        }
        
        .palette-stats {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .stats-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        @media (max-width: 768px) {
            .palette-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .palette-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .palette-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .style-filters {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .history-grid {
                grid-template-columns: 1fr;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Color Palette Generator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Writing & Creativity</span>
                        <span class="page-number-badge">Page #46</span>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <div class="content-section">
                <p>Create beautiful, harmonious color palettes for your design projects! Generate color schemes based on different styles, moods, and color theory principles. Perfect for designers, artists, and anyone looking to create visually appealing color combinations.</p>
            </div>

            <!-- Palette Display -->
            <div class="content-section">
                <div class="palette-container">
                    <div class="palette-display">
                        <div class="palette-grid" id="paletteGrid">
                            <!-- Color swatches will be generated here -->
                        </div>
                        
                        <div class="palette-actions">
                            <button class="palette-btn primary" id="generateBtn">
                                <i class="fas fa-magic"></i> Generate Palette
                            </button>
                            <button class="palette-btn" id="favoriteBtn" style="display: none;">
                                <i class="fas fa-heart"></i> Favorite
                            </button>
                            <button class="palette-btn" id="copyBtn" style="display: none;">
                                <i class="fas fa-copy"></i> Copy Colors
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Palette Filters -->
            <div class="content-section">
                <div class="palette-filters">
                    <div class="filters-title">Customize Your Color Palettes</div>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="paletteSize">Palette Size</label>
                            <select id="paletteSize">
                                <option value="5">5 Colors</option>
                                <option value="6">6 Colors</option>
                                <option value="7">7 Colors</option>
                                <option value="8">8 Colors</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="baseHue">Base Hue</label>
                            <select id="baseHue">
                                <option value="random">Random</option>
                                <option value="red">Red</option>
                                <option value="orange">Orange</option>
                                <option value="yellow">Yellow</option>
                                <option value="green">Green</option>
                                <option value="blue">Blue</option>
                                <option value="purple">Purple</option>
                                <option value="pink">Pink</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="saturation">Saturation</label>
                            <select id="saturation">
                                <option value="random">Random</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="brightness">Brightness</label>
                            <select id="brightness">
                                <option value="random">Random</option>
                                <option value="light">Light</option>
                                <option value="medium">Medium</option>
                                <option value="dark">Dark</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="style-filters">
                        <button class="style-btn active" data-style="analogous">Analogous</button>
                        <button class="style-btn" data-style="complementary">Complementary</button>
                        <button class="style-btn" data-style="triadic">Triadic</button>
                        <button class="style-btn" data-style="monochromatic">Monochromatic</button>
                        <button class="style-btn" data-style="split-complementary">Split-Complementary</button>
                        <button class="style-btn" data-style="tetradic">Tetradic</button>
                    </div>
                </div>
            </div>

            <!-- Color Tools -->
            <div class="content-section">
                <div class="palette-tools">
                    <div class="tools-title">Color Creation Tools</div>
                    
                    <div class="tools-grid">
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-eye-dropper"></i>
                            </div>
                            <div class="tool-name">Color Picker</div>
                            <div class="tool-description">Pick colors from anywhere on the screen to create custom palettes.</div>
                            <button class="tool-btn" onclick="pickColor()">Pick Color</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-palette"></i>
                            </div>
                            <div class="tool-name">Palette Analyzer</div>
                            <div class="tool-description">Analyze your palette for accessibility, contrast, and harmony.</div>
                            <button class="tool-btn" onclick="analyzePalette()">Analyze</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="tool-name">Inspiration</div>
                            <div class="tool-description">Get color inspiration from nature, art, and trending designs.</div>
                            <button class="tool-btn" onclick="getInspiration()">Get Inspired</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-bookmark"></i>
                            </div>
                            <div class="tool-name">Color Library</div>
                            <div class="tool-description">Save and organize your favorite color palettes for future use.</div>
                            <button class="tool-btn" onclick="showColorLibrary()">View Library</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Palette Statistics -->
            <div class="content-section">
                <div class="palette-stats">
                    <div class="stats-title">Your Color Creation Journey</div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalPalettes">0</div>
                            <div class="stat-label">Palettes Created</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="favoritePalettes">0</div>
                            <div class="stat-label">Favorites</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="uniqueStyles">0</div>
                            <div class="stat-label">Styles Used</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalColors">0</div>
                            <div class="stat-label">Colors Generated</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Palette History -->
            <div class="content-section">
                <div class="palette-history">
                    <div class="history-title">Recent Color Palettes</div>
                    
                    <div class="history-grid" id="historyGrid">
                        <!-- History items will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPalette = null;
        let paletteHistory = JSON.parse(localStorage.getItem('paletteHistory')) || [];
        let favoritePalettes = JSON.parse(localStorage.getItem('favoritePalettes')) || [];
        let paletteStats = JSON.parse(localStorage.getItem('paletteStats')) || {
            totalPalettes: 0,
            favoritePalettes: 0,
            uniqueStyles: 0,
            totalColors: 0
        };

        let selectedSize = 5;
        let selectedHue = 'random';
        let selectedSaturation = 'random';
        let selectedBrightness = 'random';
        let selectedStyle = 'analogous';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateStats();
            renderHistory();
            generatePalette();
        });

        function setupEventListeners() {
            document.getElementById('generateBtn').addEventListener('click', generatePalette);
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            document.getElementById('copyBtn').addEventListener('click', copyPalette);
            
            document.getElementById('paletteSize').addEventListener('change', function() {
                selectedSize = parseInt(this.value);
            });
            
            document.getElementById('baseHue').addEventListener('change', function() {
                selectedHue = this.value;
            });
            
            document.getElementById('saturation').addEventListener('change', function() {
                selectedSaturation = this.value;
            });
            
            document.getElementById('brightness').addEventListener('change', function() {
                selectedBrightness = this.value;
            });
            
            document.querySelectorAll('.style-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedStyle = this.dataset.style;
                });
            });
        }

        function generatePalette() {
            const colors = createColorPalette();
            displayPalette(colors);
            addToHistory(colors);
            updateStats();
        }

        function createColorPalette() {
            const colors = [];
            const baseHue = selectedHue === 'random' ? Math.random() * 360 : getHueValue(selectedHue);
            
            for (let i = 0; i < selectedSize; i++) {
                let hue, saturation, lightness;
                
                switch (selectedStyle) {
                    case 'analogous':
                        hue = (baseHue + (i * 30)) % 360;
                        break;
                    case 'complementary':
                        hue = i % 2 === 0 ? baseHue : (baseHue + 180) % 360;
                        break;
                    case 'triadic':
                        hue = (baseHue + (i * 120)) % 360;
                        break;
                    case 'monochromatic':
                        hue = baseHue;
                        break;
                    case 'split-complementary':
                        if (i === 0) hue = baseHue;
                        else if (i === 1) hue = (baseHue + 150) % 360;
                        else hue = (baseHue + 210) % 360;
                        break;
                    case 'tetradic':
                        hue = (baseHue + (i * 90)) % 360;
                        break;
                    default:
                        hue = (baseHue + (i * 60)) % 360;
                }
                
                saturation = getSaturationValue(selectedSaturation);
                lightness = getBrightnessValue(selectedBrightness);
                
                colors.push({
                    hue: Math.round(hue),
                    saturation: Math.round(saturation),
                    lightness: Math.round(lightness),
                    hex: hslToHex(hue, saturation, lightness)
                });
            }
            
            return {
                colors: colors,
                style: selectedStyle,
                timestamp: Date.now(),
                id: Date.now()
            };
        }

        function getHueValue(hueName) {
            const hueMap = {
                'red': 0, 'orange': 30, 'yellow': 60, 'green': 120,
                'blue': 240, 'purple': 270, 'pink': 330
            };
            return hueMap[hueName] || Math.random() * 360;
        }

        function getSaturationValue(satType) {
            switch (satType) {
                case 'high': return 80 + Math.random() * 20;
                case 'medium': return 40 + Math.random() * 40;
                case 'low': return 10 + Math.random() * 30;
                case 'mixed': return 20 + Math.random() * 60;
                default: return 30 + Math.random() * 50;
            }
        }

        function getBrightnessValue(brightType) {
            switch (brightType) {
                case 'light': return 60 + Math.random() * 30;
                case 'medium': return 30 + Math.random() * 40;
                case 'dark': return 10 + Math.random() * 30;
                case 'mixed': return 20 + Math.random() * 60;
                default: return 40 + Math.random() * 40;
            }
        }

        function hslToHex(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            
            const c = (1 - Math.abs(2 * l - 1)) * s;
            const x = c * (1 - Math.abs((h * 6) % 2 - 1));
            const m = l - c / 2;
            let r, g, b;
            
            if (h < 1/6) {
                r = c; g = x; b = 0;
            } else if (h < 2/6) {
                r = x; g = c; b = 0;
            } else if (h < 3/6) {
                r = 0; g = c; b = x;
            } else if (h < 4/6) {
                r = 0; g = x; b = c;
            } else if (h < 5/6) {
                r = x; g = 0; b = c;
            } else {
                r = c; g = 0; b = x;
            }
            
            const rHex = Math.round((r + m) * 255).toString(16).padStart(2, '0');
            const gHex = Math.round((g + m) * 255).toString(16).padStart(2, '0');
            const bHex = Math.round((b + m) * 255).toString(16).padStart(2, '0');
            
            return `#${rHex}${gHex}${bHex}`;
        }

        function displayPalette(palette) {
            currentPalette = palette;
            const grid = document.getElementById('paletteGrid');
            grid.innerHTML = '';
            
            palette.colors.forEach(color => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = color.hex;
                swatch.onclick = () => copyColor(color.hex);
                
                swatch.innerHTML = `
                    <div class="color-info">
                        ${color.hex}<br>
                        HSL(${color.hue}, ${color.saturation}%, ${color.lightness}%)
                    </div>
                `;
                
                grid.appendChild(swatch);
            });
            
            document.getElementById('favoriteBtn').style.display = 'inline-flex';
            document.getElementById('copyBtn').style.display = 'inline-flex';
            
            const isFavorite = favoritePalettes.some(fp => fp.id === palette.id);
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (isFavorite) {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                favoriteBtn.style.color = '#ef4444';
            } else {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Favorite';
                favoriteBtn.style.color = 'white';
            }
        }

        function copyColor(hex) {
            navigator.clipboard.writeText(hex).then(() => {
                // Visual feedback
                const event = new CustomEvent('colorCopied', { detail: { color: hex } });
                document.dispatchEvent(event);
            });
        }

        function toggleFavorite() {
            if (!currentPalette) return;
            
            const index = favoritePalettes.findIndex(fp => fp.id === currentPalette.id);
            
            if (index > -1) {
                favoritePalettes.splice(index, 1);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Favorite';
                document.getElementById('favoriteBtn').style.color = 'white';
            } else {
                favoritePalettes.push(currentPalette);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                document.getElementById('favoriteBtn').style.color = '#ef4444';
            }
            
            localStorage.setItem('favoritePalettes', JSON.stringify(favoritePalettes));
            updateStats();
        }

        function copyPalette() {
            if (!currentPalette) return;
            
            const colorList = currentPalette.colors.map(c => c.hex).join('\n');
            navigator.clipboard.writeText(colorList).then(() => {
                const copyBtn = document.getElementById('copyBtn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                copyBtn.style.background = '#10b981';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.background = '';
                }, 2000);
            });
        }

        function addToHistory(palette) {
            paletteHistory.unshift(palette);
            
            if (paletteHistory.length > 20) {
                paletteHistory = paletteHistory.slice(0, 20);
            }
            
            localStorage.setItem('paletteHistory', JSON.stringify(paletteHistory));
            renderHistory();
        }

        function renderHistory() {
            const historyGrid = document.getElementById('historyGrid');
            historyGrid.innerHTML = '';
            
            if (paletteHistory.length === 0) {
                historyGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-secondary);">
                        <i class="fas fa-history" style="font-size: 3rem; margin-bottom: 20px; display: block;"></i>
                        <h3>No palettes yet</h3>
                        <p>Generate your first color palette to see it here!</p>
                    </div>
                `;
                return;
            }
            
            paletteHistory.forEach(palette => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.onclick = () => displayPalette(palette);
                
                const colorsHtml = palette.colors.map(color => 
                    `<div class="history-color" style="background-color: ${color.hex}"></div>`
                ).join('');
                
                historyItem.innerHTML = `
                    <div class="history-palette">${colorsHtml}</div>
                    <div class="history-meta">
                        <span class="history-style">${palette.style}</span>
                        <span>${new Date(palette.timestamp).toLocaleDateString()}</span>
                    </div>
                `;
                
                historyGrid.appendChild(historyItem);
            });
        }

        function updateStats() {
            paletteStats.totalPalettes = paletteHistory.length;
            paletteStats.favoritePalettes = favoritePalettes.length;
            
            const styles = new Set(paletteHistory.map(p => p.style));
            paletteStats.uniqueStyles = styles.size;
            
            const totalColors = paletteHistory.reduce((sum, p) => sum + p.colors.length, 0);
            paletteStats.totalColors = totalColors;
            
            document.getElementById('totalPalettes').textContent = paletteStats.totalPalettes;
            document.getElementById('favoritePalettes').textContent = paletteStats.favoritePalettes;
            document.getElementById('uniqueStyles').textContent = paletteStats.uniqueStyles;
            document.getElementById('totalColors').textContent = paletteStats.totalColors;
            
            localStorage.setItem('paletteStats', JSON.stringify(paletteStats));
        }

        // Tool functions
        function pickColor() {
            alert('Color picker functionality would be implemented here. This would allow you to select colors from anywhere on your screen to create custom palettes.');
        }

        function analyzePalette() {
            if (!currentPalette) {
                alert('Generate a palette first to analyze it!');
                return;
            }
            
            const colors = currentPalette.colors;
            const contrastRatios = [];
            
            for (let i = 0; i < colors.length; i++) {
                for (let j = i + 1; j < colors.length; j++) {
                    const ratio = calculateContrastRatio(colors[i], colors[j]);
                    contrastRatios.push(ratio);
                }
            }
            
            const avgContrast = (contrastRatios.reduce((a, b) => a + b, 0) / contrastRatios.length).toFixed(2);
            
            alert(`Palette Analysis:\n\nStyle: ${currentPalette.style}\nColors: ${colors.length}\nAverage Contrast Ratio: ${avgContrast}\n\nContrast ratios above 4.5:1 are considered accessible for normal text.`);
        }

        function calculateContrastRatio(color1, color2) {
            const l1 = color1.lightness / 100;
            const l2 = color2.lightness / 100;
            return (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
        }

        function getInspiration() {
            const inspirations = [
                "Sunset over ocean - warm oranges, deep blues, and golden yellows",
                "Spring garden - fresh greens, soft pinks, and bright whites",
                "Autumn forest - rich browns, golden yellows, and deep reds",
                "Ocean depths - deep blues, teals, and mysterious purples",
                "Desert landscape - warm earth tones, sandy beiges, and sky blues",
                "Cherry blossoms - soft pinks, pure whites, and gentle greens"
            ];
            
            const randomInspiration = inspirations[Math.floor(Math.random() * inspirations.length)];
            alert(`Color Inspiration:\n\n"${randomInspiration}"\n\nUse this natural color combination as inspiration for your next palette!`);
        }

        function showColorLibrary() {
            if (favoritePalettes.length === 0) {
                alert('No favorite palettes yet. Generate some color palettes and mark them as favorites!');
                return;
            }
            
            const paletteList = favoritePalettes.map((palette, index) => 
                `${index + 1}. ${palette.style} palette (${palette.colors.length} colors)\n   Style: ${palette.style}`
            ).join('\n\n');
            
            alert(`Your Favorite Color Palettes:\n\n${paletteList}`);
        }
    </script>
</body>
</html>
