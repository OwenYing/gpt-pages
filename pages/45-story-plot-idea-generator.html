<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Plot Idea Generator - GPT Static Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .plot-generator {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .plot-display {
            background: var(--bg-tertiary);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            margin: 40px 0;
            border: 3px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .plot-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(99, 102, 241, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        .plot-display.animate::before {
            transform: translateX(100%);
        }
        
        .plot-content {
            position: relative;
            z-index: 2;
            max-width: 700px;
        }
        
        .plot-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            font-family: 'Space Grotesk', sans-serif;
            line-height: 1.3;
        }
        
        .plot-description {
            font-size: 1.2rem;
            color: var(--text-primary);
            line-height: 1.8;
            margin-bottom: 25px;
            white-space: pre-line;
            font-family: 'Inter', serif;
        }
        
        .plot-elements {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .plot-element {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .plot-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .plot-btn {
            padding: 15px 30px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .plot-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .plot-btn.primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .plot-btn.primary:hover {
            background: var(--primary-dark);
        }
        
        .plot-filters {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .filter-group {
            text-align: center;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .filter-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }
        
        .filter-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .genre-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .genre-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .genre-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .genre-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .plot-tools {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tools-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .tool-item {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .tool-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .tool-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .tool-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .tool-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .tool-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .tool-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .plot-history {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .history-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .history-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .history-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .history-title-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .history-plot {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 15px;
            white-space: pre-line;
            max-height: 120px;
            overflow: hidden;
        }
        
        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .history-genre {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
        }
        
        .plot-stats {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .stats-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        @media (max-width: 768px) {
            .plot-display {
                padding: 30px 20px;
            }
            
            .plot-title {
                font-size: 1.5rem;
            }
            
            .plot-description {
                font-size: 1.1rem;
            }
            
            .plot-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .plot-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .genre-filters {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .history-grid {
                grid-template-columns: 1fr;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Story Plot Idea Generator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Writing & Creativity</span>
                        <span class="page-number-badge">Page #45</span>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <div class="content-section">
                <p>Break through writer's block with our Story Plot Idea Generator! Discover unique story concepts, character motivations, and plot twists across multiple genres. Perfect for novelists, screenwriters, and anyone looking to spark their creative imagination.</p>
            </div>

            <!-- Plot Display -->
            <div class="content-section">
                <div class="plot-generator">
                    <div class="plot-display" id="plotDisplay">
                        <div class="plot-content">
                            <div class="plot-title" id="plotTitle">Click Generate to Create Story Ideas</div>
                            <div class="plot-description" id="plotDescription">Ready to discover your next great story?</div>
                            <div class="plot-elements" id="plotElements">
                                <span class="plot-element">Fantasy</span>
                            </div>
                            
                            <div class="plot-actions">
                                <button class="plot-btn primary" id="generateBtn">
                                    <i class="fas fa-magic"></i> Generate Plot
                                </button>
                                <button class="plot-btn" id="favoriteBtn" style="display: none;">
                                    <i class="fas fa-heart"></i> Favorite
                                </button>
                                <button class="plot-btn" id="copyBtn" style="display: none;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Plot Filters -->
            <div class="content-section">
                <div class="plot-filters">
                    <div class="filters-title">Customize Your Story Ideas</div>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="genreFilter">Genre</label>
                            <select id="genreFilter">
                                <option value="all">All Genres</option>
                                <option value="fantasy">Fantasy</option>
                                <option value="sci-fi">Science Fiction</option>
                                <option value="mystery">Mystery & Thriller</option>
                                <option value="romance">Romance</option>
                                <option value="horror">Horror</option>
                                <option value="adventure">Adventure</option>
                                <option value="drama">Drama</option>
                                <option value="comedy">Comedy</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="toneFilter">Tone</label>
                            <select id="toneFilter">
                                <option value="all">Any Tone</option>
                                <option value="dark">Dark & Gritty</option>
                                <option value="light">Light & Uplifting</option>
                                <option value="mysterious">Mysterious & Intriguing</option>
                                <option value="epic">Epic & Grand</option>
                                <option value="intimate">Intimate & Personal</option>
                                <option value="satirical">Satirical & Witty</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="settingFilter">Setting</label>
                            <select id="settingFilter">
                                <option value="all">Any Setting</option>
                                <option value="modern">Modern Day</option>
                                <option value="historical">Historical</option>
                                <option value="futuristic">Futuristic</option>
                                <option value="fantasy-world">Fantasy World</option>
                                <option value="post-apocalyptic">Post-Apocalyptic</option>
                                <option value="alternate-reality">Alternate Reality</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="complexityFilter">Complexity</label>
                            <select id="complexityFilter">
                                <option value="all">Any Complexity</option>
                                <option value="simple">Simple & Straightforward</option>
                                <option value="moderate">Moderate & Balanced</option>
                                <option value="complex">Complex & Multi-layered</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="genre-filters">
                        <button class="genre-btn active" data-genre="all">All Genres</button>
                        <button class="genre-btn" data-genre="fantasy">Fantasy</button>
                        <button class="genre-btn" data-genre="sci-fi">Sci-Fi</button>
                        <button class="genre-btn" data-genre="mystery">Mystery</button>
                        <button class="genre-btn" data-genre="romance">Romance</button>
                        <button class="genre-btn" data-genre="horror">Horror</button>
                        <button class="genre-btn" data-genre="adventure">Adventure</button>
                    </div>
                </div>
            </div>

            <!-- Story Creation Tools -->
            <div class="content-section">
                <div class="plot-tools">
                    <div class="tools-title">Story Creation Tools</div>
                    
                    <div class="tools-grid">
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="tool-name">Character Generator</div>
                            <div class="tool-description">Create compelling characters with unique personalities, motivations, and backstories.</div>
                            <button class="tool-btn" onclick="generateCharacter()">Generate Character</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-map"></i>
                            </div>
                            <div class="tool-name">World Builder</div>
                            <div class="tool-description">Design rich, immersive worlds with detailed settings, cultures, and histories.</div>
                            <button class="tool-btn" onclick="buildWorld()">Build World</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="tool-name">Conflict Ideas</div>
                            <div class="tool-description">Generate compelling conflicts and obstacles to drive your story forward.</div>
                            <button class="tool-btn" onclick="generateConflict()">Get Conflicts</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-bookmark"></i>
                            </div>
                            <div class="tool-name">Plot Library</div>
                            <div class="tool-description">Save and organize your favorite plot ideas for future reference and development.</div>
                            <button class="tool-btn" onclick="showPlotLibrary()">View Library</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Plot Statistics -->
            <div class="content-section">
                <div class="plot-stats">
                    <div class="stats-title">Your Story Creation Journey</div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalPlots">0</div>
                            <div class="stat-label">Plots Generated</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="favoritePlots">0</div>
                            <div class="stat-label">Favorites</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="uniqueGenres">0</div>
                            <div class="stat-label">Genres Explored</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalWords">0</div>
                            <div class="stat-label">Words Written</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Plot History -->
            <div class="content-section">
                <div class="plot-history">
                    <div class="history-title">Recent Plot Ideas</div>
                    
                    <div class="history-grid" id="historyGrid">
                        <!-- History items will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Story plot database
        const plotDatabase = {
            fantasy: {
                dark: [
                    {
                        title: "The Cursed Crown",
                        description: "A young queen discovers her royal bloodline is cursed, forcing her to choose between breaking the curse and losing her kingdom, or embracing the darkness to maintain power. As ancient evils awaken, she must navigate court politics while uncovering the truth about her ancestors' dark pact.",
                        genre: "fantasy",
                        tone: "dark",
                        setting: "fantasy-world",
                        complexity: "complex",
                        elements: ["Royalty", "Curse", "Court Politics", "Ancient Evil"]
                    },
                    {
                        title: "Shadow Weavers",
                        description: "In a world where magic is drawn from shadows, a group of outcast mages discovers they can manipulate the darkness itself. But as they grow stronger, they realize the shadows are alive and hungry, threatening to consume both them and the world they're trying to save.",
                        genre: "fantasy",
                        tone: "dark",
                        setting: "fantasy-world",
                        complexity: "moderate",
                        elements: ["Magic", "Shadows", "Outcasts", "Corruption"]
                    }
                ],
                epic: [
                    {
                        title: "The Last Dragon Rider",
                        description: "When dragons are hunted to near extinction, the last surviving dragon rider must unite scattered dragon eggs and rebuild the ancient order. But first, they must overcome their own trauma and learn to trust again, while facing a world that fears and hates what they represent.",
                        genre: "fantasy",
                        tone: "epic",
                        setting: "fantasy-world",
                        complexity: "complex",
                        elements: ["Dragons", "Rebuilding", "Trust", "Redemption"]
                    }
                ]
            },
            "sci-fi": {
                mysterious: [
                    {
                        title: "The Memory Loop",
                        description: "A scientist working on memory enhancement technology discovers that her own memories are being altered by an unknown force. As she investigates, she realizes the entire city is trapped in a time loop, and she's the only one who can remember the truth.",
                        genre: "sci-fi",
                        tone: "mysterious",
                        setting: "futuristic",
                        complexity: "complex",
                        elements: ["Memory", "Time Loop", "Conspiracy", "Technology"]
                    },
                    {
                        title: "Quantum Refugees",
                        description: "When Earth becomes uninhabitable, humanity attempts to escape through experimental quantum teleportation. But the process creates multiple versions of each person across parallel dimensions, forcing survivors to confront their alternate selves and decide which version deserves to live.",
                        genre: "sci-fi",
                        tone: "dark",
                        setting: "futuristic",
                        complexity: "complex",
                        elements: ["Quantum Physics", "Parallel Worlds", "Identity", "Survival"]
                    }
                ],
                epic: [
                    {
                        title: "The Stellar Ark",
                        description: "A massive generation ship carrying the last of humanity encounters an alien artifact that could save their dying species. But the artifact demands a terrible price: the sacrifice of half the ship's population to power the technology that will terraform their destination world.",
                        genre: "sci-fi",
                        tone: "epic",
                        setting: "futuristic",
                        complexity: "moderate",
                        elements: ["Generation Ship", "Alien Artifact", "Sacrifice", "Terraforming"]
                    }
                ]
            },
            mystery: {
                mysterious: [
                    {
                        title: "The Vanishing Hour",
                        description: "Every night at exactly 3:33 AM, people disappear from a small town, only to return the next morning with no memory of where they went. A local detective and a journalist team up to investigate, but they soon discover that asking too many questions makes them targets for the next vanishing.",
                        genre: "mystery",
                        tone: "mysterious",
                        setting: "modern",
                        complexity: "moderate",
                        elements: ["Disappearances", "Memory Loss", "Investigation", "Supernatural"]
                    },
                    {
                        title: "The Perfect Alibi",
                        description: "A detective investigating a murder discovers that the prime suspect has an airtight alibi - they were in prison at the time of the crime. But the evidence is overwhelming, leading to a complex web of deception involving identical twins, corrupt officials, and a decades-old conspiracy.",
                        genre: "mystery",
                        tone: "dark",
                        setting: "modern",
                        complexity: "complex",
                        elements: ["Murder", "Alibi", "Twins", "Conspiracy"]
                    }
                ]
            },
            romance: {
                light: [
                    {
                        title: "The Bookshop Encounter",
                        description: "Two book lovers keep missing each other at their favorite bookstore, leaving notes in books for the other to find. When they finally meet, they discover they're actually rivals competing for the same publishing contract, forcing them to choose between love and career.",
                        genre: "romance",
                        tone: "light",
                        setting: "modern",
                        complexity: "moderate",
                        elements: ["Bookstore", "Missed Connections", "Rivalry", "Career vs Love"]
                    }
                ],
                intimate: [
                    {
                        title: "Letters from the Past",
                        description: "A woman discovers a box of love letters from WWII in her grandmother's attic, written by a soldier to his sweetheart. As she reads them, she realizes the letters were never delivered, and she sets out to find the soldier's descendants to deliver the long-lost love story.",
                        genre: "romance",
                        tone: "intimate",
                        setting: "historical",
                        complexity: "simple",
                        elements: ["Love Letters", "WWII", "Family History", "Reconnection"]
                    }
                ]
            },
            horror: {
                dark: [
                    {
                        title: "The Mirror Game",
                        description: "A group of friends discovers an old mirror that shows reflections of their future selves. But the longer they look, the more their reflections begin to change, revealing dark and twisted versions of what they could become. Soon, the reflections start trying to escape the mirror.",
                        genre: "horror",
                        tone: "dark",
                        setting: "modern",
                        complexity: "moderate",
                        elements: ["Mirrors", "Future Selves", "Corruption", "Supernatural"]
                    }
                ]
            },
            adventure: {
                epic: [
                    {
                        title: "The Lost Mapmaker",
                        description: "A cartographer discovers that every map they create reveals hidden locations that don't exist on any other map. When they follow one of these locations, they find themselves in a world where maps literally create reality, and they must navigate a landscape that changes with every drawing.",
                        genre: "adventure",
                        tone: "epic",
                        setting: "fantasy-world",
                        complexity: "moderate",
                        elements: ["Maps", "Reality Creation", "Exploration", "Magic"]
                    }
                ]
            }
        };

        let currentPlot = null;
        let plotHistory = JSON.parse(localStorage.getItem('plotHistory')) || [];
        let favoritePlots = JSON.parse(localStorage.getItem('favoritePlots')) || [];
        let plotStats = JSON.parse(localStorage.getItem('plotStats')) || {
            totalPlots: 0,
            favoritePlots: 0,
            uniqueGenres: 0,
            totalWords: 0
        };

        let selectedGenre = 'all';
        let selectedTone = 'all';
        let selectedSetting = 'all';
        let selectedComplexity = 'all';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateStats();
            renderHistory();
        });

        function setupEventListeners() {
            // Generate button
            document.getElementById('generateBtn').addEventListener('click', generatePlot);
            
            // Favorite button
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            
            // Copy button
            document.getElementById('copyBtn').addEventListener('click', copyPlot);
            
            // Filters
            document.getElementById('genreFilter').addEventListener('change', function() {
                selectedGenre = this.value;
            });
            
            document.getElementById('toneFilter').addEventListener('change', function() {
                selectedTone = this.value;
            });
            
            document.getElementById('settingFilter').addEventListener('change', function() {
                selectedSetting = this.value;
            });
            
            document.getElementById('complexityFilter').addEventListener('change', function() {
                selectedComplexity = this.value;
            });
            
            // Genre buttons
            document.querySelectorAll('.genre-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.genre-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedGenre = this.dataset.genre;
                });
            });
        }

        function generatePlot() {
            const plotDisplay = document.getElementById('plotDisplay');
            plotDisplay.classList.add('animate');
            
            setTimeout(() => {
                const plot = createRandomPlot();
                displayPlot(plot);
                addToHistory(plot);
                updateStats();
                plotDisplay.classList.remove('animate');
            }, 300);
        }

        function createRandomPlot() {
            let availableGenres = selectedGenre === 'all' ? Object.keys(plotDatabase) : [selectedGenre];
            let availableTones = selectedTone === 'all' ? Object.keys(plotDatabase[availableGenres[0]] || {}) : [selectedTone];
            
            // Find a valid genre-tone combination
            let validCombinations = [];
            availableGenres.forEach(genre => {
                if (plotDatabase[genre]) {
                    availableTones.forEach(tone => {
                        if (plotDatabase[genre][tone]) {
                            validCombinations.push({ genre, tone });
                        }
                    });
                }
            });
            
            if (validCombinations.length === 0) {
                // Fallback to any available combination
                Object.keys(plotDatabase).forEach(genre => {
                    Object.keys(plotDatabase[genre]).forEach(tone => {
                        validCombinations.push({ genre, tone });
                    });
                });
            }
            
            const randomCombination = validCombinations[Math.floor(Math.random() * validCombinations.length)];
            const plots = plotDatabase[randomCombination.genre][randomCombination.tone];
            const randomPlot = plots[Math.floor(Math.random() * plots.length)];
            
            return {
                ...randomPlot,
                timestamp: Date.now(),
                id: Date.now()
            };
        }

        function displayPlot(plot) {
            currentPlot = plot;
            
            document.getElementById('plotTitle').textContent = plot.title;
            document.getElementById('plotDescription').textContent = plot.description;
            
            // Display plot elements
            const elementsContainer = document.getElementById('plotElements');
            elementsContainer.innerHTML = '';
            plot.elements.forEach(element => {
                const elementSpan = document.createElement('span');
                elementSpan.className = 'plot-element';
                elementSpan.textContent = element;
                elementsContainer.appendChild(elementSpan);
            });
            
            // Show action buttons
            document.getElementById('favoriteBtn').style.display = 'inline-flex';
            document.getElementById('copyBtn').style.display = 'inline-flex';
            
            // Update favorite button state
            const isFavorite = favoritePlots.some(fp => fp.id === plot.id);
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (isFavorite) {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                favoriteBtn.style.color = '#ef4444';
            } else {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Favorite';
                favoriteBtn.style.color = 'white';
            }
        }

        function toggleFavorite() {
            if (!currentPlot) return;
            
            const index = favoritePlots.findIndex(fp => fp.id === currentPlot.id);
            
            if (index > -1) {
                favoritePlots.splice(index, 1);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Favorite';
                document.getElementById('favoriteBtn').style.color = 'white';
            } else {
                favoritePlots.push(currentPlot);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                document.getElementById('favoriteBtn').style.color = '#ef4444';
            }
            
            localStorage.setItem('favoritePlots', JSON.stringify(favoritePlots));
            updateStats();
        }

        function copyPlot() {
            if (!currentPlot) return;
            
            const textToCopy = `${currentPlot.title}\n\n${currentPlot.description}\n\nElements: ${currentPlot.elements.join(', ')}`;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                const copyBtn = document.getElementById('copyBtn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                copyBtn.style.background = '#10b981';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.background = '';
                }, 2000);
            });
        }

        function addToHistory(plot) {
            plotHistory.unshift(plot);
            
            // Keep only last 20 plots
            if (plotHistory.length > 20) {
                plotHistory = plotHistory.slice(0, 20);
            }
            
            localStorage.setItem('plotHistory', JSON.stringify(plotHistory));
            renderHistory();
        }

        function renderHistory() {
            const historyGrid = document.getElementById('historyGrid');
            historyGrid.innerHTML = '';
            
            if (plotHistory.length === 0) {
                historyGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-secondary);">
                        <i class="fas fa-history" style="font-size: 3rem; margin-bottom: 20px; display: block;"></i>
                        <h3>No plots yet</h3>
                        <p>Generate your first plot idea to see it here!</p>
                    </div>
                `;
                return;
            }
            
            plotHistory.forEach(plot => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.onclick = () => displayPlot(plot);
                
                historyItem.innerHTML = `
                    <div class="history-title-text">${plot.title}</div>
                    <div class="history-plot">${plot.description}</div>
                    <div class="history-meta">
                        <span class="history-genre">${plot.genre}</span>
                        <span>${new Date(plot.timestamp).toLocaleDateString()}</span>
                    </div>
                `;
                
                historyGrid.appendChild(historyItem);
            });
        }

        function updateStats() {
            plotStats.totalPlots = plotHistory.length;
            plotStats.favoritePlots = favoritePlots.length;
            
            // Count unique genres
            const genres = new Set(plotHistory.map(plot => plot.genre));
            plotStats.uniqueGenres = genres.size;
            
            // Count total words
            const totalWords = plotHistory.reduce((sum, plot) => {
                return sum + plot.description.split(' ').length;
            }, 0);
            plotStats.totalWords = totalWords;
            
            document.getElementById('totalPlots').textContent = plotStats.totalPlots;
            document.getElementById('favoritePlots').textContent = plotStats.favoritePlots;
            document.getElementById('uniqueGenres').textContent = plotStats.uniqueGenres;
            document.getElementById('totalWords').textContent = plotStats.totalWords;
            
            localStorage.setItem('plotStats', JSON.stringify(plotStats));
        }

        // Tool functions
        function generateCharacter() {
            const characterTypes = [
                "The Reluctant Hero", "The Wise Mentor", "The Tragic Villain", "The Loyal Sidekick",
                "The Mysterious Stranger", "The Fallen Hero", "The Hidden Protector", "The Corrupted Innocent"
            ];
            
            const motivations = [
                "Revenge for a past wrong", "Protection of loved ones", "Discovery of truth", "Redemption from past sins",
                "Power and control", "Freedom and independence", "Justice and order", "Love and connection"
            ];
            
            const randomType = characterTypes[Math.floor(Math.random() * characterTypes.length)];
            const randomMotivation = motivations[Math.floor(Math.random() * motivations.length)];
            
            alert(`Character Idea:\n\nType: ${randomType}\nMotivation: ${randomMotivation}\n\nUse this as a starting point to develop your character's personality, backstory, and arc!`);
        }

        function buildWorld() {
            const worldElements = [
                "A floating city above the clouds", "An underground civilization in crystal caves", "A world where magic is powered by emotions",
                "A post-apocalyptic society rebuilding in ruins", "A realm where dreams and reality merge", "A world where technology and nature are at war"
            ];
            
            const culturalAspects = [
                "A society where memories are traded as currency", "A culture that worships the changing seasons", "A civilization built around a giant tree",
                "A people who communicate through music and dance", "A society where age is determined by wisdom, not years", "A culture that lives in perfect harmony with nature"
            ];
            
            const randomElement = worldElements[Math.floor(Math.random() * worldElements.length)];
            const randomCulture = culturalAspects[Math.floor(Math.random() * culturalAspects.length)];
            
            alert(`World Building Ideas:\n\nSetting: ${randomElement}\nCultural Aspect: ${randomCulture}\n\nDevelop these elements into a rich, immersive world with its own history, politics, and social structures!`);
        }

        function generateConflict() {
            const conflictTypes = [
                "Internal Struggle: A character must choose between duty and desire",
                "External Threat: An ancient evil awakens and threatens everything",
                "Interpersonal Conflict: Two allies discover they're on opposite sides of a war",
                "Moral Dilemma: The hero must sacrifice one life to save many",
                "Identity Crisis: A character discovers they're not who they thought they were",
                "Power Struggle: Multiple factions compete for control of a powerful artifact"
            ];
            
            const obstacles = [
                "A seemingly impossible deadline", "A betrayal from a trusted ally", "A natural disaster that changes everything",
                "A technological failure at the worst moment", "A cultural taboo that prevents action", "A physical limitation that seems insurmountable"
            ];
            
            const randomConflict = conflictTypes[Math.floor(Math.random() * conflictTypes.length)];
            const randomObstacle = obstacles[Math.floor(Math.random() * obstacles.length)];
            
            alert(`Conflict Ideas:\n\nMain Conflict: ${randomConflict}\nObstacle: ${randomObstacle}\n\nUse these to create tension, drive your plot forward, and test your characters' resolve!`);
        }

        function showPlotLibrary() {
            if (favoritePlots.length === 0) {
                alert('No favorite plots yet. Generate some plot ideas and mark them as favorites!');
                return;
            }
            
            const plotList = favoritePlots.map((plot, index) => 
                `${index + 1}. "${plot.title}" (${plot.genre})\n   Tone: ${plot.tone}\n   Setting: ${plot.setting}`
            ).join('\n\n');
            
            alert(`Your Favorite Plot Ideas:\n\n${plotList}`);
        }
    </script>
</body>
</html>
