<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Writing Prompt Generator - GPT Static Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .prompt-container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .prompt-display {
            background: var(--bg-tertiary);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            margin: 40px 0;
            border: 3px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .prompt-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(99, 102, 241, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        .prompt-display.animate::before {
            transform: translateX(100%);
        }
        
        .prompt-text {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 20px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .prompt-category {
            display: inline-block;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 15px;
        }
        
        .prompt-difficulty {
            display: inline-block;
            padding: 6px 12px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .prompt-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .prompt-btn {
            padding: 15px 30px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .prompt-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .prompt-btn.primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .prompt-btn.primary:hover {
            background: var(--primary-dark);
        }
        
        .prompt-btn.secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        
        .prompt-filters {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .filter-group {
            text-align: center;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .filter-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }
        
        .filter-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .category-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .category-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .category-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .category-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .prompt-history {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .history-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .history-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .history-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .history-text {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .history-category {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
        }
        
        .writing-tools {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tools-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .tool-item {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .tool-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .tool-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .tool-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .tool-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .tool-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .tool-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .prompt-stats {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .stats-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        @media (max-width: 768px) {
            .prompt-display {
                padding: 30px 20px;
            }
            
            .prompt-text {
                font-size: 1.4rem;
            }
            
            .prompt-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .prompt-btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .category-filters {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .history-grid {
                grid-template-columns: 1fr;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Random Writing Prompt Generator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Writing & Creativity</span>
                        <span class="page-number-badge">Page #42</span>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <div class="content-section">
                <p>Break through writer's block with creative writing prompts! Generate random prompts across different genres, difficulties, and themes to spark your imagination and get your creative juices flowing.</p>
            </div>

            <!-- Prompt Display -->
            <div class="content-section">
                <div class="prompt-container">
                    <div class="prompt-display" id="promptDisplay">
                        <div class="prompt-category" id="promptCategory">Click Generate to Start</div>
                        <div class="prompt-text" id="promptText">Ready to create something amazing?</div>
                        <div class="prompt-difficulty" id="promptDifficulty">Beginner</div>
                        
                        <div class="prompt-actions">
                            <button class="prompt-btn primary" id="generateBtn">
                                <i class="fas fa-magic"></i> Generate Prompt
                            </button>
                            <button class="prompt-btn secondary" id="favoriteBtn" style="display: none;">
                                <i class="fas fa-heart"></i> Favorite
                            </button>
                            <button class="prompt-btn secondary" id="shareBtn" style="display: none;">
                                <i class="fas fa-share"></i> Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prompt Filters -->
            <div class="content-section">
                <div class="prompt-filters">
                    <div class="filters-title">Customize Your Prompts</div>
                    
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="genreFilter">Genre</label>
                            <select id="genreFilter">
                                <option value="all">All Genres</option>
                                <option value="fiction">Fiction</option>
                                <option value="mystery">Mystery & Thriller</option>
                                <option value="romance">Romance</option>
                                <option value="scifi">Science Fiction</option>
                                <option value="fantasy">Fantasy</option>
                                <option value="horror">Horror</option>
                                <option value="historical">Historical</option>
                                <option value="contemporary">Contemporary</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="difficultyFilter">Difficulty</label>
                            <select id="difficultyFilter">
                                <option value="all">All Levels</option>
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="lengthFilter">Length</label>
                            <select id="lengthFilter">
                                <option value="all">Any Length</option>
                                <option value="flash">Flash Fiction</option>
                                <option value="short">Short Story</option>
                                <option value="novella">Novella</option>
                                <option value="novel">Novel</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="category-filters">
                        <button class="category-btn active" data-category="all">All Themes</button>
                        <button class="category-btn" data-category="character">Character</button>
                        <button class="category-btn" data-category="plot">Plot</button>
                        <button class="category-btn" data-category="setting">Setting</button>
                        <button class="category-btn" data-category="dialogue">Dialogue</button>
                        <button class="category-btn" data-category="emotion">Emotion</button>
                        <button class="category-btn" data-category="conflict">Conflict</button>
                        <button class="category-btn" data-category="twist">Plot Twist</button>
                    </div>
                </div>
            </div>

            <!-- Writing Tools -->
            <div class="content-section">
                <div class="writing-tools">
                    <div class="tools-title">Writing Tools & Resources</div>
                    
                    <div class="tools-grid">
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="tool-name">Writing Timer</div>
                            <div class="tool-description">Set a timer and write without stopping to boost creativity and overcome writer's block.</div>
                            <button class="tool-btn" onclick="startWritingTimer()">Start Timer</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-dice"></i>
                            </div>
                            <div class="tool-name">Story Dice</div>
                            <div class="tool-description">Roll virtual dice to generate random story elements and plot points.</div>
                            <button class="tool-btn" onclick="rollStoryDice()">Roll Dice</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="tool-name">Idea Bank</div>
                            <div class="tool-description">Save and organize your favorite prompts and story ideas for later use.</div>
                            <button class="tool-btn" onclick="showIdeaBank()">View Ideas</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="tool-name">Progress Tracker</div>
                            <div class="tool-description">Track your writing progress, word count goals, and daily writing streaks.</div>
                            <button class="tool-btn" onclick="showProgressTracker()">View Progress</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prompt Statistics -->
            <div class="content-section">
                <div class="prompt-stats">
                    <div class="stats-title">Your Writing Journey</div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalPrompts">0</div>
                            <div class="stat-label">Prompts Generated</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="favoritePrompts">0</div>
                            <div class="stat-label">Favorites</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="writingStreak">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalWords">0</div>
                            <div class="stat-label">Words Written</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prompt History -->
            <div class="content-section">
                <div class="prompt-history">
                    <div class="history-title">Recent Prompts</div>
                    
                    <div class="history-grid" id="historyGrid">
                        <!-- History items will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Writing prompt database
        const promptDatabase = {
            fiction: [
                "A character discovers they can see through walls, but only when they're not looking directly at them.",
                "Write a story that begins and ends with the same sentence, but the meaning has completely changed.",
                "A person receives a letter from their future self, but the handwriting doesn't match their own.",
                "Two strangers meet on a train and discover they're both running from the same thing.",
                "A character finds a door in their house that wasn't there yesterday."
            ],
            mystery: [
                "A detective solves a murder case, only to realize they're the killer.",
                "A person receives a package containing an item they lost years ago.",
                "A character discovers their reflection is moving independently in mirrors.",
                "Someone finds a diary written in their own handwriting, but they don't remember writing it.",
                "A person wakes up in a room with no doors or windows, only a mirror."
            ],
            romance: [
                "Two people fall in love through letters, but one of them is using a fake name.",
                "A character falls in love with someone they can only see in their dreams.",
                "Two enemies are forced to work together and discover unexpected feelings.",
                "A person meets their soulmate, but they're already married to someone else.",
                "Love letters are being delivered to the wrong person, creating a beautiful misunderstanding."
            ],
            scifi: [
                "Humanity discovers they're not the first intelligent species on Earth.",
                "A person wakes up in a world where everyone has forgotten how to speak.",
                "Time travelers keep appearing in the same location, but from different eras.",
                "A character discovers they can communicate with their future self through dreams.",
                "The laws of physics start changing, but only one person notices."
            ],
            fantasy: [
                "A character discovers they can trade memories for magical abilities.",
                "Someone finds a book that writes itself based on their thoughts.",
                "A person can see the future, but only when they're asleep.",
                "A character discovers they're the last person who can dream.",
                "Someone finds a door that leads to different versions of their life."
            ],
            horror: [
                "A character realizes they're the only person who can see the shadows moving.",
                "Someone discovers their house is one room smaller than it was yesterday.",
                "A person receives a phone call from their own number.",
                "A character finds a photograph of themselves that they don't remember taking.",
                "Someone realizes they've been living the same day for years."
            ],
            historical: [
                "A modern person wakes up in the body of a historical figure.",
                "A character discovers they can see the past through old photographs.",
                "Someone finds a diary that predicts future historical events.",
                "A person discovers they're living in a historical reenactment.",
                "A character finds a letter that changes the course of history."
            ],
            contemporary: [
                "A person discovers their social media profile is predicting their future.",
                "Someone realizes they can hear other people's thoughts through their phone.",
                "A character discovers they're the only person who can see colors.",
                "A person finds a job posting for their dream career, but it's from 50 years ago.",
                "Someone discovers they can communicate with their younger self through old emails."
            ]
        };

        // Prompt themes and categories
        const promptThemes = {
            character: [
                "A character who can't remember their own name",
                "Someone who sees the world in reverse",
                "A person who ages backwards",
                "A character who can read emotions through touch",
                "Someone who can't feel pain"
            ],
            plot: [
                "A mystery that solves itself",
                "A love story that happens in reverse",
                "An adventure that takes place in one room",
                "A journey that leads back to the beginning",
                "A conflict that creates the solution"
            ],
            setting: [
                "A city that exists in two time periods simultaneously",
                "A house that's bigger on the inside than the outside",
                "A forest that changes with the seasons in real-time",
                "A library where books write themselves",
                "A restaurant that serves memories as food"
            ],
            dialogue: [
                "A conversation where only one person can speak",
                "A dialogue that happens entirely through gestures",
                "A conversation that takes place in reverse",
                "A discussion where words have opposite meanings",
                "A talk that happens in multiple languages simultaneously"
            ],
            emotion: [
                "A character who feels everyone else's emotions",
                "Someone who can't feel any emotions",
                "A person whose emotions are contagious",
                "A character who experiences emotions as colors",
                "Someone who can trade emotions with others"
            ],
            conflict: [
                "A problem that gets worse when you try to solve it",
                "A conflict that creates harmony",
                "A battle that can only be won by losing",
                "A disagreement that brings people together",
                "A challenge that requires doing nothing"
            ],
            twist: [
                "The hero is actually the villain",
                "The problem is the solution",
                "The beginning is the end",
                "The enemy is the ally",
                "The weakness is the strength"
            ]
        };

        let currentPrompt = null;
        let promptHistory = JSON.parse(localStorage.getItem('writingPromptHistory')) || [];
        let favoritePrompts = JSON.parse(localStorage.getItem('favoritePrompts')) || [];
        let writingStats = JSON.parse(localStorage.getItem('writingStats')) || {
            totalPrompts: 0,
            favoritePrompts: 0,
            writingStreak: 0,
            totalWords: 0,
            lastWritingDate: null
        };

        let selectedGenre = 'all';
        let selectedDifficulty = 'all';
        let selectedLength = 'all';
        let selectedTheme = 'all';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateStats();
            renderHistory();
        });

        function setupEventListeners() {
            // Generate button
            document.getElementById('generateBtn').addEventListener('click', generatePrompt);
            
            // Favorite button
            document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
            
            // Share button
            document.getElementById('shareBtn').addEventListener('click', sharePrompt);
            
            // Filters
            document.getElementById('genreFilter').addEventListener('change', function() {
                selectedGenre = this.value;
            });
            
            document.getElementById('difficultyFilter').addEventListener('change', function() {
                selectedDifficulty = this.value;
            });
            
            document.getElementById('lengthFilter').addEventListener('change', function() {
                selectedLength = this.value;
            });
            
            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedTheme = this.dataset.category;
                });
            });
        }

        function generatePrompt() {
            const promptDisplay = document.getElementById('promptDisplay');
            promptDisplay.classList.add('animate');
            
            setTimeout(() => {
                const prompt = createRandomPrompt();
                displayPrompt(prompt);
                addToHistory(prompt);
                updateStats();
                promptDisplay.classList.remove('animate');
            }, 300);
        }

        function createRandomPrompt() {
            let availablePrompts = [];
            
            // Collect prompts based on filters
            if (selectedGenre === 'all') {
                Object.values(promptDatabase).forEach(genrePrompts => {
                    availablePrompts.push(...genrePrompts);
                });
            } else {
                availablePrompts.push(...promptDatabase[selectedGenre] || []);
            }
            
            if (selectedTheme !== 'all') {
                availablePrompts.push(...promptThemes[selectedTheme] || []);
            }
            
            // If no prompts available, use all prompts
            if (availablePrompts.length === 0) {
                Object.values(promptDatabase).forEach(genrePrompts => {
                    availablePrompts.push(...genrePrompts);
                });
                Object.values(promptThemes).forEach(themePrompts => {
                    availablePrompts.push(...themePrompts);
                });
            }
            
            const randomPrompt = availablePrompts[Math.floor(Math.random() * availablePrompts.length)];
            const genre = selectedGenre === 'all' ? getRandomGenre() : selectedGenre;
            const difficulty = selectedDifficulty === 'all' ? getRandomDifficulty() : selectedDifficulty;
            
            return {
                text: randomPrompt,
                genre: genre,
                difficulty: difficulty,
                theme: selectedTheme === 'all' ? getRandomTheme() : selectedTheme,
                timestamp: Date.now(),
                id: Date.now()
            };
        }

        function getRandomGenre() {
            const genres = Object.keys(promptDatabase);
            return genres[Math.floor(Math.random() * genres.length)];
        }

        function getRandomDifficulty() {
            const difficulties = ['beginner', 'intermediate', 'advanced'];
            return difficulties[Math.floor(Math.random() * difficulties.length)];
        }

        function getRandomTheme() {
            const themes = Object.keys(promptThemes);
            return themes[Math.floor(Math.random() * themes.length)];
        }

        function displayPrompt(prompt) {
            currentPrompt = prompt;
            
            document.getElementById('promptText').textContent = prompt.text;
            document.getElementById('promptCategory').textContent = prompt.genre.charAt(0).toUpperCase() + prompt.genre.slice(1);
            document.getElementById('promptDifficulty').textContent = prompt.difficulty.charAt(0).toUpperCase() + prompt.difficulty.slice(1);
            
            // Show action buttons
            document.getElementById('favoriteBtn').style.display = 'inline-flex';
            document.getElementById('shareBtn').style.display = 'inline-flex';
            
            // Update favorite button state
            const isFavorite = favoritePrompts.some(fp => fp.text === prompt.text);
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (isFavorite) {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                favoriteBtn.style.color = '#ef4444';
            } else {
                favoriteBtn.innerHTML = '<i class="fas fa-heart"></i> Favorite';
                favoriteBtn.style.color = 'white';
            }
        }

        function toggleFavorite() {
            if (!currentPrompt) return;
            
            const index = favoritePrompts.findIndex(fp => fp.text === currentPrompt.text);
            
            if (index > -1) {
                favoritePrompts.splice(index, 1);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Favorite';
                document.getElementById('favoriteBtn').style.color = 'white';
            } else {
                favoritePrompts.push(currentPrompt);
                document.getElementById('favoriteBtn').innerHTML = '<i class="fas fa-heart"></i> Unfavorite';
                document.getElementById('favoriteBtn').style.color = '#ef4444';
            }
            
            localStorage.setItem('favoritePrompts', JSON.stringify(favoritePrompts));
            updateStats();
        }

        function sharePrompt() {
            if (!currentPrompt) return;
            
            const text = `Writing Prompt: ${currentPrompt.text}\nGenre: ${currentPrompt.genre}\nDifficulty: ${currentPrompt.difficulty}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Writing Prompt',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Prompt copied to clipboard!');
                });
            }
        }

        function addToHistory(prompt) {
            promptHistory.unshift(prompt);
            
            // Keep only last 20 prompts
            if (promptHistory.length > 20) {
                promptHistory = promptHistory.slice(0, 20);
            }
            
            localStorage.setItem('writingPromptHistory', JSON.stringify(promptHistory));
            renderHistory();
        }

        function renderHistory() {
            const historyGrid = document.getElementById('historyGrid');
            historyGrid.innerHTML = '';
            
            if (promptHistory.length === 0) {
                historyGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-secondary);">
                        <i class="fas fa-history" style="font-size: 3rem; margin-bottom: 20px; display: block;"></i>
                        <h3>No prompts yet</h3>
                        <p>Generate your first prompt to see it here!</p>
                    </div>
                `;
                return;
            }
            
            promptHistory.forEach(prompt => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.onclick = () => displayPrompt(prompt);
                
                historyItem.innerHTML = `
                    <div class="history-text">${prompt.text}</div>
                    <div class="history-meta">
                        <span class="history-category">${prompt.genre}</span>
                        <span>${new Date(prompt.timestamp).toLocaleDateString()}</span>
                    </div>
                `;
                
                historyGrid.appendChild(historyItem);
            });
        }

        function updateStats() {
            writingStats.totalPrompts = promptHistory.length;
            writingStats.favoritePrompts = favoritePrompts.length;
            
            document.getElementById('totalPrompts').textContent = writingStats.totalPrompts;
            document.getElementById('favoritePrompts').textContent = writingStats.favoritePrompts;
            document.getElementById('writingStreak').textContent = writingStats.writingStreak;
            document.getElementById('totalWords').textContent = writingStats.totalWords.toLocaleString();
            
            localStorage.setItem('writingStats', JSON.stringify(writingStats));
        }

        // Writing tools functions
        function startWritingTimer() {
            const minutes = prompt('Enter writing time in minutes:', '15');
            if (!minutes || isNaN(minutes)) return;
            
            const timeInMs = parseInt(minutes) * 60 * 1000;
            const startTime = Date.now();
            
            const timer = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = timeInMs - elapsed;
                
                if (remaining <= 0) {
                    clearInterval(timer);
                    alert('Time\'s up! Great writing session!');
                    return;
                }
                
                const minutesLeft = Math.floor(remaining / 60000);
                const secondsLeft = Math.floor((remaining % 60000) / 1000);
                
                document.title = `Writing Timer: ${minutesLeft}:${secondsLeft.toString().padStart(2, '0')}`;
            }, 1000);
            
            alert(`Timer started for ${minutes} minutes! Focus on writing and don't stop until the timer ends.`);
        }

        function rollStoryDice() {
            const elements = [
                'Character: A mysterious stranger',
                'Setting: An abandoned library',
                'Conflict: A secret that must be kept',
                'Object: A broken clock',
                'Emotion: Unexpected joy',
                'Weather: A sudden storm',
                'Time: Midnight',
                'Action: A discovery'
            ];
            
            const results = [];
            for (let i = 0; i < 3; i++) {
                const randomElement = elements[Math.floor(Math.random() * elements.length)];
                results.push(randomElement);
            }
            
            alert(`Story Elements:\n\n${results.join('\n')}\n\nUse these elements to create a story!`);
        }

        function showIdeaBank() {
            if (favoritePrompts.length === 0) {
                alert('No favorite prompts yet. Generate some prompts and mark them as favorites!');
                return;
            }
            
            const promptList = favoritePrompts.map((prompt, index) => 
                `${index + 1}. ${prompt.text} (${prompt.genre})`
            ).join('\n\n');
            
            alert(`Your Favorite Prompts:\n\n${promptList}`);
        }

        function showProgressTracker() {
            const stats = `Writing Statistics:\n\n` +
                         `Total Prompts: ${writingStats.totalPrompts}\n` +
                         `Favorite Prompts: ${writingStats.favoritePrompts}\n` +
                         `Writing Streak: ${writingStats.writingStreak} days\n` +
                         `Total Words: ${writingStats.totalWords.toLocaleString()}\n\n` +
                         `Keep writing to improve your stats!`;
            
            alert(stats);
        }
    </script>
</body>
</html>
