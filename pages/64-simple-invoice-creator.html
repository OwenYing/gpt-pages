<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Invoice Creator - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .invoice-container { background: white; padding: 40px; border-radius: var(--border-radius); margin-bottom: 30px; box-shadow: var(--shadow-md); }
        .invoice-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; flex-wrap: wrap; gap: 20px; }
        .company-info h1 { color: var(--primary-color); margin-bottom: 10px; font-size: 2rem; }
        .invoice-details { text-align: right; }
        .invoice-number { font-size: 1.2rem; font-weight: 600; color: var(--text-primary); margin-bottom: 5px; }
        .invoice-date { color: var(--text-secondary); }
        
        .invoice-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
        .invoice-section h3 { color: var(--primary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-textarea { width: 100%; padding: 12px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .form-textarea { resize: vertical; min-height: 80px; }
        
        .items-section { margin-bottom: 40px; }
        .invoice-items { margin: 20px 0; }
        .invoice-item { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 15px; border: 1px solid var(--border-color); }
        .item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .item-title { font-weight: 600; color: var(--text-primary); }
        .item-actions { display: flex; gap: 10px; }
        .btn-small { padding: 6px 12px; border: none; border-radius: var(--border-radius); cursor: pointer; font-size: 0.9rem; transition: var(--transition); }
        .btn-edit { background: var(--primary-color); color: white; }
        .btn-edit:hover { background: var(--primary-dark); }
        .btn-delete { background: #ef4444; color: white; }
        .btn-delete:hover { background: #dc2626; }
        .item-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .item-field { display: flex; flex-direction: column; }
        .item-field label { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px; }
        
        .add-item-btn { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; margin: 20px 0; }
        .add-item-btn:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .totals-section { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 30px; }
        .total-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding: 8px 0; }
        .total-row.final { font-size: 1.2rem; font-weight: 700; color: var(--primary-color); border-top: 2px solid var(--border-color); padding-top: 15px; margin-top: 15px; }
        
        .action-buttons { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn-primary { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .invoice-sections { grid-template-columns: 1fr; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Simple Invoice Creator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Work & Productivity</span>
                        <span class="page-number-badge">Page #64</span>
                    </div>
                </div>
            </div>
            
            <div class="invoice-container">
                <div class="invoice-header">
                    <div class="company-info">
                        <h1>Your Company Name</h1>
                        <p>123 Business Street<br>City, State 12345<br>Phone: (555) 123-4567<br>Email: info@company.com</p>
                    </div>
                    <div class="invoice-details">
                        <div class="invoice-number">Invoice #<span id="invoiceNumber">001</span></div>
                        <div class="invoice-date">Date: <span id="invoiceDate"></span></div>
                        <div class="invoice-date">Due Date: <span id="dueDate"></span></div>
                    </div>
                </div>
                
                <div class="invoice-sections">
                    <div class="invoice-section">
                        <h3>Bill To</h3>
                        <div class="form-group">
                            <label class="form-label">Client Name</label>
                            <input type="text" class="form-input" id="clientName" placeholder="Client or Company Name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Client Address</label>
                            <textarea class="form-textarea" id="clientAddress" placeholder="Client's full address"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Client Email</label>
                            <input type="email" class="form-input" id="clientEmail" placeholder="client@email.com">
                        </div>
                    </div>
                    
                    <div class="invoice-section">
                        <h3>Invoice Details</h3>
                        <div class="form-group">
                            <label class="form-label">Project Description</label>
                            <textarea class="form-textarea" id="projectDescription" placeholder="Brief description of the project or services"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Terms</label>
                            <input type="text" class="form-input" id="paymentTerms" placeholder="Net 30, Due on receipt, etc.">
                        </div>
                    </div>
                </div>
                
                <div class="items-section">
                    <h3>Invoice Items</h3>
                    <div id="invoiceItems" class="invoice-items">
                        <!-- Invoice items will be added here -->
                    </div>
                    <button class="add-item-btn" id="addInvoiceItem">
                        <i class="fas fa-plus"></i> Add Item
                    </button>
                </div>
                
                <div class="totals-section">
                    <div class="total-row">
                        <span>Subtotal:</span>
                        <span id="subtotal">$0.00</span>
                    </div>
                    <div class="total-row">
                        <span>Tax Rate (%):</span>
                        <input type="number" id="taxRate" value="0" min="0" max="100" style="width: 80px; text-align: center; border: 1px solid var(--border-color); border-radius: 4px; padding: 4px;">
                    </div>
                    <div class="total-row">
                        <span>Tax Amount:</span>
                        <span id="taxAmount">$0.00</span>
                    </div>
                    <div class="total-row final">
                        <span>Total:</span>
                        <span id="totalAmount">$0.00</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn-primary" id="generateInvoice">
                        <i class="fas fa-file-pdf"></i> Generate PDF
                    </button>
                    <button class="btn-secondary" id="saveInvoice">
                        <i class="fas fa-save"></i> Save Invoice
                    </button>
                    <button class="btn-secondary" id="loadTemplate">
                        <i class="fas fa-download"></i> Load Template
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        class InvoiceCreator {
            constructor() {
                this.invoiceItems = [];
                this.invoiceNumber = 1;
                this.initializeElements();
                this.setupEventListeners();
                this.loadSavedInvoice();
                this.updateDates();
                this.updateTotals();
            }
            
            initializeElements() {
                this.clientName = document.getElementById('clientName');
                this.clientAddress = document.getElementById('clientAddress');
                this.clientEmail = document.getElementById('clientEmail');
                this.projectDescription = document.getElementById('projectDescription');
                this.paymentTerms = document.getElementById('paymentTerms');
                this.taxRate = document.getElementById('taxRate');
                this.invoiceItemsContainer = document.getElementById('invoiceItems');
                
                // Set default payment terms
                this.paymentTerms.value = 'Net 30';
            }
            
            setupEventListeners() {
                document.getElementById('addInvoiceItem').addEventListener('click', () => {
                    this.addInvoiceItem();
                });
                
                document.getElementById('generateInvoice').addEventListener('click', () => {
                    this.generatePDF();
                });
                
                document.getElementById('saveInvoice').addEventListener('click', () => {
                    this.saveInvoice();
                });
                
                document.getElementById('loadTemplate').addEventListener('click', () => {
                    this.loadTemplate();
                });
                
                // Auto-save on input change
                const inputs = document.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    input.addEventListener('input', () => {
                        this.updateTotals();
                        this.saveInvoice();
                    });
                });
                
                this.taxRate.addEventListener('input', () => {
                    this.updateTotals();
                });
            }
            
            updateDates() {
                const today = new Date();
                const dueDate = new Date(today);
                dueDate.setDate(today.getDate() + 30);
                
                document.getElementById('invoiceDate').textContent = today.toLocaleDateString();
                document.getElementById('dueDate').textContent = dueDate.toLocaleDateString();
            }
            
            addInvoiceItem() {
                const itemId = Date.now();
                const invoiceItem = {
                    id: itemId,
                    description: '',
                    quantity: 1,
                    rate: 0,
                    amount: 0
                };
                
                this.invoiceItems.push(invoiceItem);
                this.renderInvoiceItems();
                this.updateTotals();
            }
            
            renderInvoiceItems() {
                this.invoiceItemsContainer.innerHTML = '';
                
                this.invoiceItems.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'invoice-item';
                    itemElement.innerHTML = `
                        <div class="item-header">
                            <div class="item-title">Item ${index + 1}</div>
                            <div class="item-actions">
                                <button class="btn-small btn-edit" onclick="invoiceCreator.editInvoiceItem(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-small btn-delete" onclick="invoiceCreator.deleteInvoiceItem(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="item-content">
                            <div class="item-field">
                                <label>Description</label>
                                <input type="text" class="form-input" value="${item.description}" 
                                       onchange="invoiceCreator.updateInvoiceItem(${item.id}, 'description', this.value)"
                                       placeholder="Service or product description">
                            </div>
                            <div class="item-field">
                                <label>Quantity</label>
                                <input type="number" class="form-input" value="${item.quantity}" min="1" max="999"
                                       onchange="invoiceCreator.updateInvoiceItem(${item.id}, 'quantity', this.value)">
                            </div>
                            <div class="item-field">
                                <label>Rate ($)</label>
                                <input type="number" class="form-input" value="${item.rate}" min="0" step="0.01"
                                       onchange="invoiceCreator.updateInvoiceItem(${item.id}, 'rate', this.value)">
                            </div>
                            <div class="item-field">
                                <label>Amount ($)</label>
                                <input type="number" class="form-input" value="${item.amount}" min="0" step="0.01" readonly>
                            </div>
                        </div>
                    `;
                    
                    this.invoiceItemsContainer.appendChild(itemElement);
                });
            }
            
            updateInvoiceItem(itemId, field, value) {
                const item = this.invoiceItems.find(item => item.id === itemId);
                if (item) {
                    item[field] = parseFloat(value) || 0;
                    if (field === 'quantity' || field === 'rate') {
                        item.amount = item.quantity * item.rate;
                        this.updateTotals();
                    }
                    this.renderInvoiceItems();
                }
            }
            
            editInvoiceItem(itemId) {
                const itemElement = document.querySelector(`[onclick*="${itemId}"]`).closest('.invoice-item');
                const firstInput = itemElement.querySelector('input');
                if (firstInput) {
                    firstInput.focus();
                }
            }
            
            deleteInvoiceItem(itemId) {
                this.invoiceItems = this.invoiceItems.filter(item => item.id !== itemId);
                this.renderInvoiceItems();
                this.updateTotals();
            }
            
            updateTotals() {
                const subtotal = this.invoiceItems.reduce((sum, item) => sum + (item.amount || 0), 0);
                const taxRate = parseFloat(this.taxRate.value) || 0;
                const taxAmount = subtotal * (taxRate / 100);
                const total = subtotal + taxAmount;
                
                document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('taxAmount').textContent = `$${taxAmount.toFixed(2)}`;
                document.getElementById('totalAmount').textContent = `$${total.toFixed(2)}`;
            }
            
            loadTemplate() {
                const template = {
                    clientName: 'Sample Client',
                    clientAddress: '123 Client Street\nClient City, CS 12345',
                    clientEmail: 'client@example.com',
                    projectDescription: 'Website development and design services',
                    paymentTerms: 'Net 30',
                    items: [
                        { description: 'Website Design', quantity: 1, rate: 1500, amount: 1500 },
                        { description: 'Frontend Development', quantity: 40, rate: 75, amount: 3000 },
                        { description: 'Backend Development', quantity: 30, rate: 80, amount: 2400 }
                    ]
                };
                
                this.clientName.value = template.clientName;
                this.clientAddress.value = template.clientAddress;
                this.clientEmail.value = template.clientEmail;
                this.projectDescription.value = template.projectDescription;
                this.paymentTerms.value = template.paymentTerms;
                
                this.invoiceItems = template.items.map(item => ({
                    ...item,
                    id: Date.now() + Math.random()
                }));
                
                this.renderInvoiceItems();
                this.updateTotals();
            }
            
            saveInvoice() {
                const invoice = {
                    clientName: this.clientName.value,
                    clientAddress: this.clientAddress.value,
                    clientEmail: this.clientEmail.value,
                    projectDescription: this.projectDescription.value,
                    paymentTerms: this.paymentTerms.value,
                    taxRate: this.taxRate.value,
                    invoiceItems: this.invoiceItems,
                    createdAt: new Date().toISOString()
                };
                
                localStorage.setItem('savedInvoice', JSON.stringify(invoice));
            }
            
            loadSavedInvoice() {
                const saved = localStorage.getItem('savedInvoice');
                if (saved) {
                    try {
                        const invoice = JSON.parse(saved);
                        this.clientName.value = invoice.clientName || '';
                        this.clientAddress.value = invoice.clientAddress || '';
                        this.clientEmail.value = invoice.clientEmail || '';
                        this.projectDescription.value = invoice.projectDescription || '';
                        this.paymentTerms.value = invoice.paymentTerms || 'Net 30';
                        this.taxRate.value = invoice.taxRate || 0;
                        this.invoiceItems = invoice.invoiceItems || [];
                        
                        this.renderInvoiceItems();
                        this.updateTotals();
                    } catch (error) {
                        console.error('Error loading saved invoice:', error);
                    }
                }
            }
            
            generatePDF() {
                // Simple PDF generation using browser print
                const printWindow = window.open('', '_blank');
                const invoiceContent = this.generateInvoiceHTML();
                
                printWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Invoice</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 40px; }
                            .invoice-header { display: flex; justify-content: space-between; margin-bottom: 40px; }
                            .company-info h1 { color: #4f46e5; margin-bottom: 10px; }
                            .invoice-details { text-align: right; }
                            .invoice-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px; }
                            .invoice-section h3 { color: #4f46e5; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px; }
                            .invoice-items { margin: 20px 0; }
                            .invoice-item { background: #f9fafb; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
                            .item-row { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 15px; margin-bottom: 10px; }
                            .item-header { font-weight: bold; color: #4f46e5; }
                            .totals { background: #f9fafb; padding: 20px; border-radius: 8px; margin-top: 30px; }
                            .total-row { display: flex; justify-content: space-between; margin-bottom: 10px; }
                            .total-row.final { font-size: 1.2rem; font-weight: bold; color: #4f46e5; border-top: 2px solid #e5e7eb; padding-top: 15px; margin-top: 15px; }
                            @media print { body { margin: 20px; } }
                        </style>
                    </head>
                    <body>
                        ${invoiceContent}
                    </body>
                    </html>
                `);
                
                printWindow.document.close();
                printWindow.focus();
                
                // Auto-print after a short delay
                setTimeout(() => {
                    printWindow.print();
                }, 500);
            }
            
            generateInvoiceHTML() {
                const subtotal = this.invoiceItems.reduce((sum, item) => sum + (item.amount || 0), 0);
                const taxRate = parseFloat(this.taxRate.value) || 0;
                const taxAmount = subtotal * (taxRate / 100);
                const total = subtotal + taxAmount;
                
                return `
                    <div class="invoice-header">
                        <div class="company-info">
                            <h1>Your Company Name</h1>
                            <p>123 Business Street<br>City, State 12345<br>Phone: (555) 123-4567<br>Email: info@company.com</p>
                        </div>
                        <div class="invoice-details">
                            <div class="invoice-number">Invoice #${this.invoiceNumber.toString().padStart(3, '0')}</div>
                            <div class="invoice-date">Date: ${new Date().toLocaleDateString()}</div>
                            <div class="invoice-date">Due Date: ${new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString()}</div>
                        </div>
                    </div>
                    
                    <div class="invoice-sections">
                        <div class="invoice-section">
                            <h3>Bill To</h3>
                            <p><strong>${this.clientName.value || 'Client Name'}</strong><br>${this.clientAddress.value || 'Client Address'}<br>Email: ${this.clientEmail.value || 'client@email.com'}</p>
                        </div>
                        <div class="invoice-section">
                            <h3>Project Details</h3>
                            <p><strong>Description:</strong> ${this.projectDescription.value || 'Project description'}<br><strong>Payment Terms:</strong> ${this.paymentTerms.value || 'Net 30'}</p>
                        </div>
                    </div>
                    
                    <div class="invoice-items">
                        <h3>Invoice Items</h3>
                        <div class="item-row item-header">
                            <div>Description</div>
                            <div>Quantity</div>
                            <div>Rate</div>
                            <div>Amount</div>
                        </div>
                        ${this.invoiceItems.map(item => `
                            <div class="invoice-item">
                                <div class="item-row">
                                    <div>${item.description || 'Item description'}</div>
                                    <div>${item.quantity || 0}</div>
                                    <div>$${(item.rate || 0).toFixed(2)}</div>
                                    <div>$${(item.amount || 0).toFixed(2)}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="totals">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span>$${subtotal.toFixed(2)}</span>
                        </div>
                        <div class="total-row">
                            <span>Tax (${taxRate}%):</span>
                            <span>$${taxAmount.toFixed(2)}</span>
                        </div>
                        <div class="total-row final">
                            <span>Total:</span>
                            <span>$${total.toFixed(2)}</span>
                        </div>
                    </div>
                `;
            }
        }
        
        let invoiceCreator;
        document.addEventListener('DOMContentLoaded', () => {
            invoiceCreator = new InvoiceCreator();
        });
    </script>
</body>
</html>
