<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chore Schedule Template - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .chore-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .schedule-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        .setup-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        
        .form-section { margin-bottom: 30px; }
        .form-section h3 { color: var(--primary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 10px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .form-textarea { resize: vertical; min-height: 100px; }
        
        .week-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; margin-bottom: 20px; }
        .day-column { text-align: center; }
        .day-header { background: var(--primary-color); color: white; padding: 10px; border-radius: var(--border-radius) var(--border-radius) 0 0; font-weight: 600; font-size: 0.9rem; }
        .day-content { background: var(--bg-secondary); padding: 15px; border-radius: 0 0 var(--border-radius) var(--border-radius); min-height: 150px; border: 2px solid transparent; }
        .day-content:hover { border-color: var(--primary-color); }
        
        .chore-item { background: white; padding: 8px; margin: 5px 0; border-radius: var(--border-radius); border: 1px solid var(--border-color); cursor: pointer; transition: var(--transition); font-size: 0.8rem; position: relative; }
        .chore-item:hover { background: var(--bg-tertiary); transform: translateY(-1px); box-shadow: var(--shadow-sm); }
        .chore-item.completed { opacity: 0.6; text-decoration: line-through; background: var(--bg-tertiary); }
        .chore-item.overdue { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .chore-item.due-soon { border-color: #f59e0b; background: rgba(245, 158, 11, 0.1); }
        
        .chore-priority { position: absolute; top: 4px; right: 4px; width: 8px; height: 8px; border-radius: 50%; }
        .chore-priority.high { background: #ef4444; }
        .chore-priority.medium { background: #f59e0b; }
        .chore-priority.low { background: #10b981; }
        
        .chore-actions { display: flex; gap: 5px; margin-top: 5px; }
        .chore-action-btn { width: 20px; height: 20px; border: none; background: var(--bg-tertiary); border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; transition: var(--transition); }
        .chore-action-btn:hover { background: var(--primary-color); color: white; }
        .chore-action-btn.complete:hover { background: #10b981; }
        .chore-action-btn.delete:hover { background: #ef4444; }
        
        .chore-form { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .chore-form-grid { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 15px; align-items: end; }
        
        .rotation-system { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .rotation-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .rotation-card { background: white; padding: 15px; border-radius: var(--border-radius); border: 1px solid var(--border-color); }
        .rotation-title { font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .rotation-info { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px; }
        .rotation-members { display: flex; gap: 5px; flex-wrap: wrap; }
        .rotation-member { background: var(--primary-color); color: white; padding: 4px 8px; border-radius: 10px; font-size: 0.7rem; }
        
        .progress-summary { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-top: 20px; }
        .progress-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; }
        .progress-item { text-align: center; }
        .progress-value { font-size: 1.5rem; font-weight: 600; color: var(--primary-color); }
        .progress-label { font-size: 0.8rem; color: var(--text-secondary); text-transform: uppercase; }
        .progress-bar { background: var(--bg-tertiary); height: 8px; border-radius: 4px; margin-top: 8px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-color); transition: width 0.3s ease; }
        
        .action-buttons { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        .btn-primary { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        
        .member-management { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .member-list { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 15px; }
        .member-tag { background: white; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius); display: flex; align-items: center; gap: 8px; }
        .member-remove { background: var(--bg-tertiary); border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; }
        .member-remove:hover { background: #ef4444; color: white; }
        
        .chore-templates { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .template-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .template-card { background: white; padding: 15px; border-radius: var(--border-radius); border: 1px solid var(--border-color); cursor: pointer; transition: var(--transition); }
        .template-card:hover { background: var(--bg-tertiary); transform: translateY(-2px); box-shadow: var(--shadow-sm); }
        .template-title { font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .template-description { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px; }
        .template-chores { font-size: 0.7rem; color: var(--text-muted); }
        
        .filter-controls { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; transition: var(--transition); font-size: 0.9rem; }
        .filter-btn:hover { background: var(--bg-tertiary); }
        .filter-btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .chore-container { grid-template-columns: 1fr; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
            .week-grid { grid-template-columns: repeat(4, 1fr); }
            .week-grid .day-column:nth-child(n+5) { grid-column: span 2; }
            .chore-form-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Chore Schedule Template</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Home & Lifestyle</span>
                        <span class="page-number-badge">Page #73</span>
                    </div>
                </div>
            </div>
            
            <div class="chore-container">
                <div class="schedule-panel">
                    <div class="form-section">
                        <h3>Weekly Chore Schedule</h3>
                        
                        <div class="filter-controls">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="pending">Pending</button>
                            <button class="filter-btn" data-filter="completed">Completed</button>
                            <button class="filter-btn" data-filter="overdue">Overdue</button>
                        </div>
                        
                        <div class="week-grid" id="weekGrid">
                            <div class="day-column">
                                <div class="day-header">Monday</div>
                                <div class="day-content" data-day="monday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Tuesday</div>
                                <div class="day-content" data-day="tuesday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Wednesday</div>
                                <div class="day-content" data-day="wednesday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Thursday</div>
                                <div class="day-content" data-day="thursday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Friday</div>
                                <div class="day-content" data-day="friday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Saturday</div>
                                <div class="day-content" data-day="saturday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Sunday</div>
                                <div class="day-content" data-day="sunday">
                                    <!-- Chores will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-summary" id="progressSummary">
                            <h4>Weekly Progress</h4>
                            <div class="progress-grid">
                                <div class="progress-item">
                                    <div class="progress-value" id="totalChores">0</div>
                                    <div class="progress-label">Total Chores</div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="completedChores">0</div>
                                    <div class="progress-label">Completed</div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="completionBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="pendingChores">0</div>
                                    <div class="progress-label">Pending</div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="overdueChores">0</div>
                                    <div class="progress-label">Overdue</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn-primary" onclick="exportSchedule()">
                                <i class="fas fa-download"></i> Export Schedule
                            </button>
                            <button class="btn-secondary" onclick="clearCompleted()">
                                <i class="fas fa-check-double"></i> Clear Completed
                            </button>
                            <button class="btn-secondary" onclick="resetWeek()">
                                <i class="fas fa-redo"></i> Reset Week
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="setup-panel">
                    <div class="form-section">
                        <h3>Chore Management</h3>
                        
                        <div class="chore-form">
                            <h4>Add New Chore</h4>
                            <div class="chore-form-grid">
                                <div class="form-group">
                                    <label class="form-label">Chore Name</label>
                                    <input type="text" class="form-input" id="choreName" placeholder="e.g., Vacuum living room">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Day</label>
                                    <select class="form-select" id="choreDay">
                                        <option value="monday">Monday</option>
                                        <option value="tuesday">Tuesday</option>
                                        <option value="wednesday">Wednesday</option>
                                        <option value="thursday">Thursday</option>
                                        <option value="friday">Friday</option>
                                        <option value="saturday">Saturday</option>
                                        <option value="sunday">Sunday</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Priority</label>
                                    <select class="form-select" id="chorePriority">
                                        <option value="low">Low</option>
                                        <option value="medium">Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </div>
                                <button class="btn-primary" onclick="addChore()">
                                    <i class="fas fa-plus"></i> Add
                                </button>
                            </div>
                        </div>
                        
                        <div class="member-management">
                            <h4>Household Members</h4>
                            <div class="member-list" id="memberList">
                                <!-- Members will be populated here -->
                            </div>
                            <div class="form-group">
                                <label class="form-label">Add Member</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="text" class="form-input" id="newMember" placeholder="Member name">
                                    <button class="btn-secondary" onclick="addMember()">Add</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rotation-system">
                            <h4>Chore Rotation System</h4>
                            <div class="rotation-grid" id="rotationGrid">
                                <!-- Rotation cards will be populated here -->
                            </div>
                            <button class="btn-secondary" onclick="setupRotation()">
                                <i class="fas fa-random"></i> Setup Rotation
                            </button>
                        </div>
                        
                        <div class="chore-templates">
                            <h4>Chore Templates</h4>
                            <div class="template-grid" id="templateGrid">
                                <!-- Template cards will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Chore data structure
        let chores = [];
        let members = ['Mom', 'Dad', 'Child 1', 'Child 2'];
        let currentWeek = new Date();
        let activeFilter = 'all';
        
        // Sample chore templates
        const choreTemplates = [
            {
                name: 'Daily Basics',
                description: 'Essential daily household tasks',
                chores: [
                    { name: 'Make beds', day: 'monday', priority: 'medium' },
                    { name: 'Wash dishes', day: 'monday', priority: 'high' },
                    { name: 'Take out trash', day: 'monday', priority: 'medium' }
                ]
            },
            {
                name: 'Weekly Deep Clean',
                description: 'Weekly cleaning tasks for each room',
                chores: [
                    { name: 'Vacuum living room', day: 'monday', priority: 'medium' },
                    { name: 'Clean bathrooms', day: 'tuesday', priority: 'high' },
                    { name: 'Dust furniture', day: 'wednesday', priority: 'low' },
                    { name: 'Mop floors', day: 'thursday', priority: 'medium' },
                    { name: 'Change bed sheets', day: 'friday', priority: 'medium' }
                ]
            },
            {
                name: 'Kitchen Tasks',
                description: 'Kitchen and meal preparation chores',
                chores: [
                    { name: 'Clean kitchen counters', day: 'monday', priority: 'high' },
                    { name: 'Organize pantry', day: 'tuesday', priority: 'low' },
                    { name: 'Clean refrigerator', day: 'wednesday', priority: 'medium' },
                    { name: 'Wipe down appliances', day: 'thursday', priority: 'low' }
                ]
            }
        ];
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadChores();
            loadMembers();
            populateTemplates();
            renderChoreSchedule();
            updateProgress();
        });
        
        function loadChores() {
            const saved = localStorage.getItem('chores');
            if (saved) {
                chores = JSON.parse(saved);
            } else {
                // Load default chores
                chores = [
                    { id: 1, name: 'Make beds', day: 'monday', priority: 'medium', completed: false, assignedTo: 'Mom', dueDate: getNextDay('monday') },
                    { id: 2, name: 'Wash dishes', day: 'monday', priority: 'high', completed: false, assignedTo: 'Dad', dueDate: getNextDay('monday') },
                    { id: 3, name: 'Vacuum living room', day: 'tuesday', priority: 'medium', completed: false, assignedTo: 'Child 1', dueDate: getNextDay('tuesday') },
                    { id: 4, name: 'Clean bathrooms', day: 'wednesday', priority: 'high', completed: false, assignedTo: 'Mom', dueDate: getNextDay('wednesday') },
                    { id: 5, name: 'Take out trash', day: 'thursday', priority: 'medium', completed: false, assignedTo: 'Child 2', dueDate: getNextDay('thursday') }
                ];
            }
        }
        
        function loadMembers() {
            const saved = localStorage.getItem('members');
            if (saved) {
                members = JSON.parse(saved);
            }
            renderMembers();
        }
        
        function getNextDay(dayName) {
            const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const today = new Date();
            const targetDay = days.indexOf(dayName.toLowerCase());
            const currentDay = today.getDay();
            const daysUntilTarget = (targetDay - currentDay + 7) % 7;
            const nextDay = new Date(today);
            nextDay.setDate(today.getDate() + daysUntilTarget);
            return nextDay.toISOString().split('T')[0];
        }
        
        function renderChoreSchedule() {
            const weekGrid = document.getElementById('weekGrid');
            
            // Clear existing chores
            weekGrid.querySelectorAll('.day-content').forEach(dayContent => {
                dayContent.innerHTML = '';
            });
            
            // Add chores to appropriate days
            chores.forEach(chore => {
                if (shouldShowChore(chore)) {
                    const dayContent = weekGrid.querySelector(`[data-day="${chore.day}"]`);
                    if (dayContent) {
                        const choreElement = createChoreElement(chore);
                        dayContent.appendChild(choreElement);
                    }
                }
            });
        }
        
        function shouldShowChore(chore) {
            switch (activeFilter) {
                case 'pending':
                    return !chore.completed;
                case 'completed':
                    return chore.completed;
                case 'overdue':
                    return !chore.completed && new Date(chore.dueDate) < new Date();
                default:
                    return true;
            }
        }
        
        function createChoreElement(chore) {
            const choreElement = document.createElement('div');
            choreElement.className = `chore-item ${chore.completed ? 'completed' : ''}`;
            choreElement.dataset.id = chore.id;
            
            // Add overdue/due soon styling
            if (!chore.completed) {
                const dueDate = new Date(chore.dueDate);
                const today = new Date();
                const daysDiff = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                
                if (daysDiff < 0) {
                    choreElement.classList.add('overdue');
                } else if (daysDiff <= 1) {
                    choreElement.classList.add('due-soon');
                }
            }
            
            choreElement.innerHTML = `
                <div class="chore-priority ${chore.priority}"></div>
                <div style="font-weight: 600; margin-bottom: 3px;">${chore.name}</div>
                <div style="font-size: 0.7rem; color: var(--text-secondary);">Assigned to: ${chore.assignedTo}</div>
                <div class="chore-actions">
                    <button class="chore-action-btn complete" onclick="toggleChoreComplete(${chore.id})" title="Mark complete">
                        <i class="fas fa-check"></i>
                    </button>
                    <button class="chore-action-btn" onclick="editChore(${chore.id})" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="chore-action-btn delete" onclick="deleteChore(${chore.id})" title="Delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            return choreElement;
        }
        
        function addChore() {
            const name = document.getElementById('choreName').value.trim();
            const day = document.getElementById('choreDay').value;
            const priority = document.getElementById('chorePriority').value;
            
            if (!name) {
                alert('Please enter a chore name');
                return;
            }
            
            const newChore = {
                id: Date.now(),
                name,
                day,
                priority,
                completed: false,
                assignedTo: members[Math.floor(Math.random() * members.length)],
                dueDate: getNextDay(day),
                createdAt: new Date().toISOString()
            };
            
            chores.push(newChore);
            saveChores();
            renderChoreSchedule();
            updateProgress();
            
            // Clear form
            document.getElementById('choreName').value = '';
            document.getElementById('choreDay').value = 'monday';
            document.getElementById('chorePriority').value = 'medium';
        }
        
        function toggleChoreComplete(choreId) {
            const chore = chores.find(c => c.id === choreId);
            if (chore) {
                chore.completed = !chore.completed;
                if (chore.completed) {
                    chore.completedAt = new Date().toISOString();
                } else {
                    delete chore.completedAt;
                }
                saveChores();
                renderChoreSchedule();
                updateProgress();
            }
        }
        
        function editChore(choreId) {
            const chore = chores.find(c => c.id === choreId);
            if (chore) {
                document.getElementById('choreName').value = chore.name;
                document.getElementById('choreDay').value = chore.day;
                document.getElementById('chorePriority').value = chore.priority;
                
                // Remove the old chore
                deleteChore(choreId);
                
                // Focus on name input for editing
                document.getElementById('choreName').focus();
            }
        }
        
        function deleteChore(choreId) {
            chores = chores.filter(c => c.id !== choreId);
            saveChores();
            renderChoreSchedule();
            updateProgress();
        }
        
        function addMember() {
            const newMember = document.getElementById('newMember').value.trim();
            if (newMember && !members.includes(newMember)) {
                members.push(newMember);
                saveMembers();
                renderMembers();
                document.getElementById('newMember').value = '';
            }
        }
        
        function removeMember(memberName) {
            if (members.length > 1) {
                members = members.filter(m => m !== memberName);
                saveMembers();
                renderMembers();
            } else {
                alert('You need at least one household member');
            }
        }
        
        function renderMembers() {
            const memberList = document.getElementById('memberList');
            memberList.innerHTML = '';
            
            members.forEach(member => {
                const memberTag = document.createElement('div');
                memberTag.className = 'member-tag';
                memberTag.innerHTML = `
                    <span>${member}</span>
                    <button class="member-remove" onclick="removeMember('${member}')">×</button>
                `;
                memberList.appendChild(memberTag);
            });
        }
        
        function setupRotation() {
            if (members.length < 2) {
                alert('You need at least 2 members for rotation');
                return;
            }
            
            // Clear existing rotation
            document.getElementById('rotationGrid').innerHTML = '';
            
            // Create rotation cards for each day
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            days.forEach((day, index) => {
                const assignedMember = members[index % members.length];
                
                const rotationCard = document.createElement('div');
                rotationCard.className = 'rotation-card';
                rotationCard.innerHTML = `
                    <div class="rotation-title">${day.charAt(0).toUpperCase() + day.slice(1)}</div>
                    <div class="rotation-info">Primary: ${assignedMember}</div>
                    <div class="rotation-members">
                        ${members.map(m => `<span class="rotation-member">${m}</span>`).join('')}
                    </div>
                `;
                
                document.getElementById('rotationGrid').appendChild(rotationCard);
            });
        }
        
        function populateTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            templateGrid.innerHTML = '';
            
            choreTemplates.forEach(template => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card';
                templateCard.innerHTML = `
                    <div class="template-title">${template.name}</div>
                    <div class="template-description">${template.description}</div>
                    <div class="template-chores">${template.chores.length} chores</div>
                `;
                templateCard.onclick = () => loadTemplate(template);
                templateGrid.appendChild(templateCard);
            });
        }
        
        function loadTemplate(template) {
            if (confirm(`Load "${template.name}" template? This will add ${template.chores.length} new chores.`)) {
                template.chores.forEach(choreData => {
                    const newChore = {
                        id: Date.now() + Math.random(),
                        name: choreData.name,
                        day: choreData.day,
                        priority: choreData.priority,
                        completed: false,
                        assignedTo: members[Math.floor(Math.random() * members.length)],
                        dueDate: getNextDay(choreData.day),
                        createdAt: new Date().toISOString()
                    };
                    chores.push(newChore);
                });
                
                saveChores();
                renderChoreSchedule();
                updateProgress();
                alert(`Template "${template.name}" loaded successfully!`);
            }
        }
        
        function updateProgress() {
            const totalChores = chores.length;
            const completedChores = chores.filter(c => c.completed).length;
            const pendingChores = totalChores - completedChores;
            const overdueChores = chores.filter(c => !c.completed && new Date(c.dueDate) < new Date()).length;
            
            document.getElementById('totalChores').textContent = totalChores;
            document.getElementById('completedChores').textContent = completedChores;
            document.getElementById('pendingChores').textContent = pendingChores;
            document.getElementById('overdueChores').textContent = overdueChores;
            
            const completionPercentage = totalChores > 0 ? (completedChores / totalChores) * 100 : 0;
            document.getElementById('completionBar').style.width = completionPercentage + '%';
        }
        
        function clearCompleted() {
            chores = chores.filter(c => !c.completed);
            saveChores();
            renderChoreSchedule();
            updateProgress();
        }
        
        function resetWeek() {
            if (confirm('Reset all chores for the new week? This will mark all chores as incomplete.')) {
                chores.forEach(chore => {
                    chore.completed = false;
                    chore.dueDate = getNextDay(chore.day);
                    delete chore.completedAt;
                });
                saveChores();
                renderChoreSchedule();
                updateProgress();
            }
        }
        
        function exportSchedule() {
            if (chores.length === 0) {
                alert('No chores to export!');
                return;
            }
            
            let exportText = 'CHORE SCHEDULE\n';
            exportText += 'Generated on: ' + new Date().toLocaleDateString() + '\n\n';
            
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            days.forEach(day => {
                const dayChores = chores.filter(c => c.day === day);
                if (dayChores.length > 0) {
                    exportText += `${day.charAt(0).toUpperCase() + day.slice(1).toUpperCase()}:\n`;
                    dayChores.forEach(chore => {
                        const checkbox = chore.completed ? '[x]' : '[ ]';
                        const priority = chore.priority.toUpperCase();
                        exportText += `${checkbox} ${chore.name} (${priority}) - ${chore.assignedTo}\n`;
                    });
                    exportText += '\n';
                }
            });
            
            exportText += `Total Chores: ${chores.length}\n`;
            exportText += `Completed: ${chores.filter(c => c.completed).length}\n`;
            exportText += `Pending: ${chores.filter(c => !c.completed).length}`;
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chore-schedule.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function saveChores() {
            localStorage.setItem('chores', JSON.stringify(chores));
        }
        
        function saveMembers() {
            localStorage.setItem('members', JSON.stringify(members));
        }
        
        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                activeFilter = this.dataset.filter;
                renderChoreSchedule();
            });
        });
    </script>
</body>
</html>
