<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Maintenance Checklist - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: var(--gradient-primary); color: white; border-radius: var(--border-radius); position: relative; overflow: hidden; }
        .page-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .page-header-content { position: relative; z-index: 2; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; font-family: 'Space Grotesk', sans-serif; }
        .page-meta { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .page-category-badge, .page-number-badge { padding: 8px 16px; background: rgba(255, 255, 255, 0.2); border-radius: 20px; font-size: 0.9rem; font-weight: 500; }
        .back-button { position: fixed; top: 20px; left: 20px; background: var(--primary-color); color: white; padding: 12px 20px; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition); z-index: 1000; display: flex; align-items: center; gap: 8px; }
        .back-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        
        .maintenance-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .checklist-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        .management-panel { background: white; padding: 30px; border-radius: var(--border-radius); box-shadow: var(--shadow-md); }
        
        .form-section { margin-bottom: 30px; }
        .form-section h3 { color: var(--primary-color); margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 8px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 10px; border: 2px solid var(--border-color); border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .form-textarea { resize: vertical; min-height: 100px; }
        
        .seasonal-tabs { display: flex; gap: 5px; margin-bottom: 20px; background: var(--bg-secondary); padding: 5px; border-radius: var(--border-radius); }
        .season-tab { flex: 1; padding: 10px; text-align: center; background: transparent; border: none; border-radius: var(--border-radius); cursor: pointer; transition: var(--transition); font-weight: 500; }
        .season-tab.active { background: var(--primary-color); color: white; }
        .season-tab:hover:not(.active) { background: var(--bg-tertiary); }
        
        .maintenance-categories { margin-bottom: 20px; }
        .category-section { margin-bottom: 25px; }
        .category-header { display: flex; align-items: center; justify-content: space-between; background: var(--primary-color); color: white; padding: 12px 15px; border-radius: var(--border-radius) var(--border-radius) 0 0; font-weight: 600; }
        .category-count { background: rgba(255, 255, 255, 0.2); padding: 4px 8px; border-radius: 10px; font-size: 0.8rem; }
        .category-items { background: var(--bg-secondary); padding: 15px; border-radius: 0 0 var(--border-radius) var(--border-radius); }
        
        .maintenance-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: white; border-radius: var(--border-radius); margin-bottom: 10px; border: 1px solid var(--border-color); transition: var(--transition); }
        .maintenance-item:hover { transform: translateY(-1px); box-shadow: var(--shadow-sm); }
        .maintenance-item.completed { opacity: 0.6; text-decoration: line-through; background: var(--bg-tertiary); }
        .maintenance-item.overdue { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .maintenance-item.due-soon { border-color: #f59e0b; background: rgba(245, 158, 11, 0.1); }
        
        .maintenance-checkbox { width: 18px; height: 18px; cursor: pointer; }
        .maintenance-details { flex: 1; }
        .maintenance-title { font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .maintenance-meta { font-size: 0.8rem; color: var(--text-secondary); }
        .maintenance-priority { padding: 4px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 500; }
        .maintenance-priority.high { background: #fee2e2; color: #991b1b; }
        .maintenance-priority.medium { background: #fef3c7; color: #92400e; }
        .maintenance-priority.low { background: #dcfce7; color: #166534; }
        .maintenance-actions { display: flex; gap: 5px; }
        .action-btn { width: 24px; height: 24px; border: none; background: var(--bg-tertiary); border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; transition: var(--transition); }
        .action-btn:hover { background: var(--primary-color); color: white; }
        .action-btn.delete:hover { background: #ef4444; }
        
        .maintenance-form { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .maintenance-form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .progress-summary { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-top: 20px; }
        .progress-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; }
        .progress-item { text-align: center; }
        .progress-value { font-size: 1.5rem; font-weight: 600; color: var(--primary-color); }
        .progress-label { font-size: 0.8rem; color: var(--text-secondary); text-transform: uppercase; }
        .progress-bar { background: var(--bg-tertiary); height: 8px; border-radius: 4px; margin-top: 8px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-color); transition: width 0.3s ease; }
        
        .action-buttons { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        .btn-primary { background: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-secondary { background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: var(--border-radius); cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; gap: 8px; }
        .btn-secondary:hover { background: var(--bg-tertiary); border-color: var(--primary-color); }
        
        .maintenance-templates { background: var(--bg-secondary); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .template-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .template-card { background: white; padding: 15px; border-radius: var(--border-radius); border: 1px solid var(--border-color); cursor: pointer; transition: var(--transition); }
        .template-card:hover { background: var(--bg-tertiary); transform: translateY(-2px); box-shadow: var(--shadow-sm); }
        .template-title { font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
        .template-description { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 10px; }
        .template-tasks { font-size: 0.7rem; color: var(--text-muted); }
        
        .filter-controls { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; transition: var(--transition); font-size: 0.9rem; }
        .filter-btn:hover { background: var(--bg-tertiary); }
        .filter-btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        
        @media (max-width: 768px) {
            .page-title { font-size: 2rem; }
            .maintenance-container { grid-template-columns: 1fr; }
            .back-button { position: relative; top: auto; left: auto; margin-bottom: 20px; display: inline-block; }
            .maintenance-form-grid { grid-template-columns: 1fr; }
            .seasonal-tabs { flex-wrap: wrap; }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Home Maintenance Checklist</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Home & Lifestyle</span>
                        <span class="page-number-badge">Page #77</span>
                    </div>
                </div>
            </div>
            
            <div class="maintenance-container">
                <div class="checklist-panel">
                    <div class="form-section">
                        <h3>Seasonal Maintenance</h3>
                        
                        <div class="seasonal-tabs">
                            <button class="season-tab active" data-season="spring">Spring</button>
                            <button class="season-tab" data-season="summer">Summer</button>
                            <button class="season-tab" data-season="fall">Fall</button>
                            <button class="season-tab" data-season="winter">Winter</button>
                        </div>
                        
                        <div class="filter-controls">
                            <button class="filter-btn active" data-filter="all">All Tasks</button>
                            <button class="filter-btn" data-filter="pending">Pending</button>
                            <button class="filter-btn" data-filter="completed">Completed</button>
                            <button class="filter-btn" data-filter="overdue">Overdue</button>
                        </div>
                        
                        <div class="maintenance-categories" id="maintenanceCategories">
                            <!-- Maintenance categories will be populated here -->
                        </div>
                        
                        <div class="progress-summary" id="progressSummary">
                            <h4>Season Progress</h4>
                            <div class="progress-grid">
                                <div class="progress-item">
                                    <div class="progress-value" id="totalTasks">0</div>
                                    <div class="progress-label">Total Tasks</div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="completedTasks">0</div>
                                    <div class="progress-label">Completed</div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="completionBar" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="pendingTasks">0</div>
                                    <div class="progress-label">Pending</div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-value" id="overdueTasks">0</div>
                                    <div class="progress-label">Overdue</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn-primary" onclick="exportChecklist()">
                                <i class="fas fa-download"></i> Export Checklist
                            </button>
                            <button class="btn-secondary" onclick="clearCompleted()">
                                <i class="fas fa-check-double"></i> Clear Completed
                            </button>
                            <button class="btn-secondary" onclick="resetSeason()">
                                <i class="fas fa-redo"></i> Reset Season
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="management-panel">
                    <div class="form-section">
                        <h3>Task Management</h3>
                        
                        <div class="maintenance-form">
                            <h4>Add New Task</h4>
                            <div class="maintenance-form-grid">
                                <div class="form-group">
                                    <label class="form-label">Task Name</label>
                                    <input type="text" class="form-input" id="taskName" placeholder="e.g., Clean gutters">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Category</label>
                                    <select class="form-select" id="taskCategory">
                                        <option value="exterior">Exterior</option>
                                        <option value="interior">Interior</option>
                                        <option value="plumbing">Plumbing</option>
                                        <option value="electrical">Electrical</option>
                                        <option value="hvac">HVAC</option>
                                        <option value="landscaping">Landscaping</option>
                                        <option value="safety">Safety</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Season</label>
                                    <select class="form-select" id="taskSeason">
                                        <option value="spring">Spring</option>
                                        <option value="summer">Summer</option>
                                        <option value="fall">Fall</option>
                                        <option value="winter">Winter</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Priority</label>
                                    <select class="form-select" id="taskPriority">
                                        <option value="low">Low</option>
                                        <option value="medium">Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Due Date</label>
                                    <input type="date" class="form-input" id="taskDueDate">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Estimated Cost ($)</label>
                                    <input type="number" class="form-input" id="taskCost" placeholder="0" min="0" step="0.01">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea class="form-textarea" id="taskDescription" placeholder="Detailed description of the maintenance task..."></textarea>
                            </div>
                            <button class="btn-primary" onclick="addTask()">
                                <i class="fas fa-plus"></i> Add Task
                            </button>
                        </div>
                        
                        <div class="maintenance-templates">
                            <h4>Maintenance Templates</h4>
                            <div class="template-grid" id="templateGrid">
                                <!-- Templates will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Maintenance data structure
        let maintenanceTasks = [];
        let currentSeason = 'spring';
        let activeFilter = 'all';
        
        // Maintenance templates
        const maintenanceTemplates = [
            {
                name: 'Spring Cleaning',
                description: 'Essential spring maintenance tasks',
                season: 'spring',
                tasks: [
                    { name: 'Clean gutters and downspouts', category: 'exterior', priority: 'high', description: 'Remove debris and ensure proper drainage' },
                    { name: 'Inspect roof for damage', category: 'exterior', priority: 'high', description: 'Look for missing shingles or leaks' },
                    { name: 'Service HVAC system', category: 'hvac', priority: 'medium', description: 'Clean filters and schedule professional inspection' },
                    { name: 'Test smoke detectors', category: 'safety', priority: 'high', description: 'Replace batteries and test functionality' }
                ]
            },
            {
                name: 'Summer Prep',
                description: 'Summer maintenance checklist',
                season: 'summer',
                tasks: [
                    { name: 'Inspect and clean AC unit', category: 'hvac', priority: 'high', description: 'Clean condenser coils and check refrigerant levels' },
                    { name: 'Check irrigation system', category: 'landscaping', priority: 'medium', description: 'Test sprinklers and adjust timers' },
                    { name: 'Inspect windows and doors', category: 'interior', priority: 'low', description: 'Check seals and weatherstripping' }
                ]
            },
            {
                name: 'Fall Maintenance',
                description: 'Prepare home for winter',
                season: 'fall',
                tasks: [
                    { name: 'Clean chimney and fireplace', category: 'interior', priority: 'medium', description: 'Remove creosote buildup and inspect flue' },
                    { name: 'Winterize outdoor faucets', category: 'plumbing', priority: 'high', description: 'Drain and cover to prevent freezing' },
                    { name: 'Inspect insulation', category: 'interior', priority: 'medium', description: 'Check attic and wall insulation levels' }
                ]
            },
            {
                name: 'Winter Safety',
                description: 'Cold weather maintenance',
                season: 'winter',
                tasks: [
                    { name: 'Check heating system', category: 'hvac', priority: 'high', description: 'Test furnace and replace filters' },
                    { name: 'Inspect weather stripping', category: 'interior', priority: 'medium', description: 'Replace damaged seals around doors and windows' },
                    { name: 'Test carbon monoxide detectors', category: 'safety', priority: 'high', description: 'Ensure proper operation and replace if needed' }
                ]
            }
        ];
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            populateTemplates();
            renderMaintenanceTasks();
            updateProgress();
        });
        
        function loadData() {
            const saved = localStorage.getItem('maintenanceTasks');
            if (saved) {
                maintenanceTasks = JSON.parse(saved);
            } else {
                // Load sample tasks
                maintenanceTasks = [
                    {
                        id: 1,
                        name: 'Clean gutters and downspouts',
                        category: 'exterior',
                        season: 'spring',
                        priority: 'high',
                        description: 'Remove debris and ensure proper drainage',
                        dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        cost: 0,
                        completed: false,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        name: 'Service HVAC system',
                        category: 'hvac',
                        season: 'spring',
                        priority: 'medium',
                        description: 'Clean filters and schedule professional inspection',
                        dueDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        cost: 150,
                        completed: false,
                        createdAt: new Date().toISOString()
                    }
                ];
            }
        }
        
        function renderMaintenanceTasks() {
            const categoriesContainer = document.getElementById('maintenanceCategories');
            categoriesContainer.innerHTML = '';
            
            const currentSeasonTasks = maintenanceTasks.filter(task => task.season === currentSeason);
            const filteredTasks = filterTasks(currentSeasonTasks);
            
            if (filteredTasks.length === 0) {
                categoriesContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">No maintenance tasks found for this season</p>';
                return;
            }
            
            // Group tasks by category
            const groupedTasks = {};
            filteredTasks.forEach(task => {
                if (!groupedTasks[task.category]) {
                    groupedTasks[task.category] = [];
                }
                groupedTasks[task.category].push(task);
            });
            
            // Render each category
            Object.entries(groupedTasks).forEach(([category, tasks]) => {
                const categorySection = document.createElement('div');
                categorySection.className = 'category-section';
                
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'category-header';
                categoryHeader.innerHTML = `
                    <span>${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                    <span class="category-count">${tasks.length}</span>
                `;
                
                const categoryItems = document.createElement('div');
                categoryItems.className = 'category-items';
                
                tasks.forEach(task => {
                    const taskElement = createMaintenanceElement(task);
                    categoryItems.appendChild(taskElement);
                });
                
                categorySection.appendChild(categoryHeader);
                categorySection.appendChild(categoryItems);
                categoriesContainer.appendChild(categorySection);
            });
        }
        
        function filterTasks(tasks) {
            switch (activeFilter) {
                case 'pending':
                    return tasks.filter(t => !t.completed);
                case 'completed':
                    return tasks.filter(t => t.completed);
                case 'overdue':
                    return tasks.filter(t => !t.completed && new Date(t.dueDate) < new Date());
                default:
                    return tasks;
            }
        }
        
        function createMaintenanceElement(task) {
            const taskElement = document.createElement('div');
            taskElement.className = `maintenance-item ${task.completed ? 'completed' : ''}`;
            taskElement.dataset.id = task.id;
            
            // Add overdue/due soon styling
            if (!task.completed) {
                const dueDate = new Date(task.dueDate);
                const today = new Date();
                const daysDiff = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                
                if (daysDiff < 0) {
                    taskElement.classList.add('overdue');
                } else if (daysDiff <= 3) {
                    taskElement.classList.add('due-soon');
                }
            }
            
            const priorityText = {
                'high': 'HIGH',
                'medium': 'MED',
                'low': 'LOW'
            };
            
            taskElement.innerHTML = `
                <input type="checkbox" class="maintenance-checkbox" ${task.completed ? 'checked' : ''}>
                <div class="maintenance-details">
                    <div class="maintenance-title">${task.name}</div>
                    <div class="maintenance-meta">
                        Due: ${new Date(task.dueDate).toLocaleDateString()} • 
                        Cost: $${task.cost} • 
                        ${task.description}
                    </div>
                </div>
                <span class="maintenance-priority ${task.priority}">${priorityText[task.priority]}</span>
                <div class="maintenance-actions">
                    <button class="action-btn" onclick="editTask(${task.id})" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="action-btn delete" onclick="deleteTask(${task.id})" title="Delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            // Add checkbox event listener
            const checkbox = taskElement.querySelector('.maintenance-checkbox');
            checkbox.addEventListener('change', function() {
                toggleTaskComplete(task.id);
            });
            
            return taskElement;
        }
        
        function addTask() {
            const name = document.getElementById('taskName').value.trim();
            const category = document.getElementById('taskCategory').value;
            const season = document.getElementById('taskSeason').value;
            const priority = document.getElementById('taskPriority').value;
            const dueDate = document.getElementById('taskDueDate').value;
            const cost = parseFloat(document.getElementById('taskCost').value) || 0;
            const description = document.getElementById('taskDescription').value.trim();
            
            if (!name || !dueDate) {
                alert('Please enter task name and due date');
                return;
            }
            
            const newTask = {
                id: Date.now(),
                name,
                category,
                season,
                priority,
                description,
                dueDate,
                cost,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            maintenanceTasks.push(newTask);
            saveData();
            renderMaintenanceTasks();
            updateProgress();
            
            // Clear form
            document.getElementById('taskName').value = '';
            document.getElementById('taskCategory').value = 'exterior';
            document.getElementById('taskSeason').value = 'spring';
            document.getElementById('taskPriority').value = 'medium';
            document.getElementById('taskDueDate').value = '';
            document.getElementById('taskCost').value = '';
            document.getElementById('taskDescription').value = '';
        }
        
        function toggleTaskComplete(taskId) {
            const task = maintenanceTasks.find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                if (task.completed) {
                    task.completedAt = new Date().toISOString();
                } else {
                    delete task.completedAt;
                }
                saveData();
                renderMaintenanceTasks();
                updateProgress();
            }
        }
        
        function editTask(taskId) {
            const task = maintenanceTasks.find(t => t.id === taskId);
            if (task) {
                document.getElementById('taskName').value = task.name;
                document.getElementById('taskCategory').value = task.category;
                document.getElementById('taskSeason').value = task.season;
                document.getElementById('taskPriority').value = task.priority;
                document.getElementById('taskDueDate').value = task.dueDate;
                document.getElementById('taskCost').value = task.cost;
                document.getElementById('taskDescription').value = task.description;
                
                // Remove the old task
                deleteTask(taskId);
                
                // Focus on name input for editing
                document.getElementById('taskName').focus();
            }
        }
        
        function deleteTask(taskId) {
            maintenanceTasks = maintenanceTasks.filter(t => t.id !== taskId);
            saveData();
            renderMaintenanceTasks();
            updateProgress();
        }
        
        function populateTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            templateGrid.innerHTML = '';
            
            maintenanceTemplates.forEach(template => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card';
                templateCard.innerHTML = `
                    <div class="template-title">${template.name}</div>
                    <div class="template-description">${template.description}</div>
                    <div class="template-tasks">${template.tasks.length} tasks</div>
                `;
                templateCard.onclick = () => loadTemplate(template);
                templateGrid.appendChild(templateCard);
            });
        }
        
        function loadTemplate(template) {
            if (confirm(`Load "${template.name}" template? This will add ${template.tasks.length} new tasks.`)) {
                template.tasks.forEach(taskData => {
                    const newTask = {
                        id: Date.now() + Math.random(),
                        name: taskData.name,
                        category: taskData.category,
                        season: template.season,
                        priority: taskData.priority,
                        description: taskData.description,
                        dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        cost: 0,
                        completed: false,
                        createdAt: new Date().toISOString()
                    };
                    maintenanceTasks.push(newTask);
                });
                
                saveData();
                renderMaintenanceTasks();
                updateProgress();
                alert(`Template "${template.name}" loaded successfully!`);
            }
        }
        
        function updateProgress() {
            const currentSeasonTasks = maintenanceTasks.filter(task => task.season === currentSeason);
            const totalTasks = currentSeasonTasks.length;
            const completedTasks = currentSeasonTasks.filter(t => t.completed).length;
            const pendingTasks = totalTasks - completedTasks;
            const overdueTasks = currentSeasonTasks.filter(t => !t.completed && new Date(t.dueDate) < new Date()).length;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('completedTasks').textContent = completedTasks;
            document.getElementById('pendingTasks').textContent = pendingTasks;
            document.getElementById('overdueTasks').textContent = overdueTasks;
            
            const completionPercentage = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
            document.getElementById('completionBar').style.width = completionPercentage + '%';
        }
        
        function clearCompleted() {
            maintenanceTasks = maintenanceTasks.filter(t => !t.completed);
            saveData();
            renderMaintenanceTasks();
            updateProgress();
        }
        
        function resetSeason() {
            if (confirm(`Reset all ${currentSeason} tasks? This will mark all tasks as incomplete.`)) {
                maintenanceTasks.forEach(task => {
                    if (task.season === currentSeason) {
                        task.completed = false;
                        delete task.completedAt;
                    }
                });
                saveData();
                renderMaintenanceTasks();
                updateProgress();
            }
        }
        
        function exportChecklist() {
            if (maintenanceTasks.length === 0) {
                alert('No tasks to export!');
                return;
            }
            
            let exportText = 'HOME MAINTENANCE CHECKLIST\n';
            exportText += 'Generated on: ' + new Date().toLocaleDateString() + '\n';
            exportText += 'Season: ' + currentSeason.charAt(0).toUpperCase() + currentSeason.slice(1) + '\n\n';
            
            const currentSeasonTasks = maintenanceTasks.filter(task => task.season === currentSeason);
            
            // Group by category
            const groupedTasks = {};
            currentSeasonTasks.forEach(task => {
                if (!groupedTasks[task.category]) {
                    groupedTasks[task.category] = [];
                }
                groupedTasks[task.category].push(task);
            });
            
            Object.entries(groupedTasks).forEach(([category, tasks]) => {
                exportText += `${category.toUpperCase()}:\n`;
                tasks.forEach(task => {
                    const checkbox = task.completed ? '[x]' : '[ ]';
                    const priority = task.priority.toUpperCase();
                    exportText += `${checkbox} ${task.name} (${priority}) - Due: ${new Date(task.dueDate).toLocaleDateString()}\n`;
                    if (task.description) {
                        exportText += `    ${task.description}\n`;
                    }
                });
                exportText += '\n';
            });
            
            exportText += `Total Tasks: ${currentSeasonTasks.length}\n`;
            exportText += `Completed: ${currentSeasonTasks.filter(t => t.completed).length}\n`;
            exportText += `Pending: ${currentSeasonTasks.filter(t => !t.completed).length}`;
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentSeason}-maintenance-checklist.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function saveData() {
            localStorage.setItem('maintenanceTasks', JSON.stringify(maintenanceTasks));
        }
        
        // Season tab functionality
        document.querySelectorAll('.season-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.season-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                currentSeason = this.dataset.season;
                renderMaintenanceTasks();
                updateProgress();
            });
        });
        
        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                activeFilter = this.dataset.filter;
                renderMaintenanceTasks();
            });
        });
    </script>
</body>
</html>
