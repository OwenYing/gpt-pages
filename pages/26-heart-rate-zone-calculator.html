<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Rate Zone Calculator - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        .content-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .content-section p {
            line-height: 1.8;
            margin-bottom: 16px;
            color: var(--text-secondary);
        }
        
        .heart-tips {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }
        
        .heart-tips h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .heart-tips ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .heart-tips li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .calculator-input {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
        }
        
        .calculator-input h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 1rem;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .calculator-result {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
        }
        
        .calculator-result h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .heart-summary {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .heart-summary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="heartbeat" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M50,20 Q60,10 70,20 Q80,30 70,40 Q60,50 50,60 Q40,50 30,40 Q20,30 30,20 Q40,10 50,20" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23heartbeat)"/></svg>');
            opacity: 0.3;
        }
        
        .heart-summary-content {
            position: relative;
            z-index: 2;
        }
        
        .heart-summary .label {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .heart-summary .amount {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .heart-summary .breakdown {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .calculator-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .heart-zones {
            margin: 20px 0;
        }
        
        .zone-item {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            margin-bottom: 15px;
            transition: var(--transition);
        }
        
        .zone-item:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-md);
        }
        
        .zone-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .zone-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }
        
        .zone-range {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .zone-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .detail-item {
            text-align: center;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .zone-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            font-style: italic;
        }
        
        .zone-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            text-align: center;
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .zone-chart {
            margin: 20px 0;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            margin: 20px 0;
        }
        
        .zone-bars {
            display: flex;
            gap: 10px;
            align-items: end;
            height: 200px;
            margin: 20px 0;
        }
        
        .zone-bar {
            flex: 1;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            position: relative;
            min-height: 20px;
            transition: height 0.5s ease;
        }
        
        .zone-bar.zone1 { background: #10b981; }
        .zone-bar.zone2 { background: #3b82f6; }
        .zone-bar.zone3 { background: #f59e0b; }
        .zone-bar.zone4 { background: #ef4444; }
        .zone-bar.zone5 { background: #8b5cf6; }
        
        .zone-label {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
        }
        
        .zone-value {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .preset-profiles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .profile-card {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .profile-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .profile-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .profile-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .profile-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .training-recommendations {
            margin: 20px 0;
        }
        
        .recommendation-card {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            margin-bottom: 15px;
            transition: var(--transition);
        }
        
        .recommendation-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-md);
        }
        
        .recommendation-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .recommendation-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .recommendation-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }
        
        .recommendation-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .back-button {
                position: relative;
                top: auto;
                left: auto;
                margin-bottom: 20px;
                display: inline-flex;
            }
            
            .input-row {
                grid-template-columns: 1fr;
            }
            
            .preset-profiles {
                grid-template-columns: 1fr;
            }
            
            .calculator-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .zone-details {
                grid-template-columns: 1fr;
            }
            
            .zone-bars {
                flex-direction: column;
                height: auto;
                gap: 20px;
            }
            
            .zone-bar {
                height: 60px;
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Heart Rate Zone Calculator</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Health & Fitness</span>
                        <span class="page-number-badge">Page #26</span>
                    </div>
                </div>
            </div>
            
            <!-- Introduction -->
            <div class="content-section">
                <h2>About Heart Rate Zones</h2>
                <p>
                    Calculate your heart rate training zones to optimize your workouts and improve cardiovascular fitness. 
                    Understanding your zones helps you train at the right intensity for your goals.
                </p>
                
                <div class="heart-tips">
                    <h3>Heart Rate Training Tips</h3>
                    <ul>
                        <li><strong>Zone 1 (Recovery):</strong> Light activity for active recovery and warm-up</li>
                        <li><strong>Zone 2 (Aerobic):</strong> Builds endurance and fat-burning capacity</li>
                        <li><strong>Zone 3 (Tempo):</strong> Improves lactate threshold and aerobic capacity</li>
                        <li><strong>Zone 4 (Threshold):</strong> High-intensity intervals for performance gains</li>
                        <li><strong>Zone 5 (Maximum):</strong> Short bursts for maximum power and speed</li>
                        <li><strong>Rest Days:</strong> Include recovery days to prevent overtraining</li>
                    </ul>
                </div>
            </div>
            
            <!-- Heart Rate Zone Calculator -->
            <div class="content-section">
                <h2>Calculate Your Heart Rate Zones</h2>
                <p>Enter your information to determine your personalized heart rate training zones.</p>
                
                <div class="calculator-container">
                    <div class="calculator-input">
                        <h3>Personal Information</h3>
                        
                        <div class="input-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" placeholder="30" min="15" max="100" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label for="gender">Gender</label>
                            <select id="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="fitnessLevel">Fitness Level</label>
                            <select id="fitnessLevel">
                                <option value="beginner">Beginner</option>
                                <option value="intermediate" selected>Intermediate</option>
                                <option value="advanced">Advanced</option>
                                <option value="athlete">Athlete</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="restingHR">Resting Heart Rate (bpm)</label>
                            <input type="number" id="restingHR" placeholder="70" min="40" max="120" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label for="maxHR">Maximum Heart Rate (bpm)</label>
                            <input type="number" id="maxHR" placeholder="190" min="120" max="220" step="1">
                        </div>
                        
                        <div class="calculator-controls">
                            <button class="btn btn-primary" onclick="calculateHeartRateZones()">
                                <i class="fas fa-heartbeat"></i> Calculate Zones
                            </button>
                            <button class="btn btn-secondary" onclick="resetCalculator()">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                            <button class="btn btn-success" onclick="saveCalculation()">
                                <i class="fas fa-save"></i> Save
                            </button>
                        </div>
                    </div>
                    
                    <div class="calculator-result">
                        <h3>Heart Rate Zones</h3>
                        
                        <div class="heart-summary">
                            <div class="heart-summary-content">
                                <div class="label">Maximum Heart Rate</div>
                                <div class="amount" id="displayMaxHR">190 bpm</div>
                                <div class="breakdown" id="displayBreakdown">Based on your inputs</div>
                            </div>
                        </div>
                        
                        <div class="heart-zones" id="heartZones">
                            <!-- Heart rate zones will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Statistics -->
            <div class="content-section">
                <h2>Zone Summary</h2>
                <p>Key metrics to understand your heart rate training zones.</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚ù§Ô∏è</div>
                        <div class="stat-value" id="statMaxHR">190</div>
                        <div class="stat-label">Max HR (bpm)</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üò¥</div>
                        <div class="stat-value" id="statRestingHR">70</div>
                        <div class="stat-label">Resting HR (bpm)</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="statHRR">120</div>
                        <div class="stat-label">Heart Rate Reserve</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-value" id="statTargetHR">152</div>
                        <div class="stat-label">Target HR (70%)</div>
                    </div>
                </div>
            </div>
            
            <!-- Zone Chart -->
            <div class="content-section">
                <h2>Zone Visualization</h2>
                <p>Visual representation of your heart rate training zones.</p>
                
                <div class="zone-chart">
                    <div class="chart-container">
                        <div class="zone-bars" id="zoneChart">
                            <!-- Zone bars will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Training Recommendations -->
            <div class="content-section">
                <h2>Training Recommendations</h2>
                <p>Personalized advice for training in each heart rate zone.</p>
                
                <div class="training-recommendations" id="trainingRecommendations">
                    <!-- Recommendations will be generated here -->
                </div>
            </div>
            
            <!-- Preset Profiles -->
            <div class="content-section">
                <h2>Quick Start Profiles</h2>
                <p>Click any profile to quickly set common heart rate parameters.</p>
        
                <div class="preset-profiles">
                    <div class="profile-card" onclick="setProfile('Beginner', 30, 'male', 'beginner', 75, 190)">
                        <div class="profile-icon">üåü</div>
                        <div class="profile-title">Beginner</div>
                        <div class="profile-description">30 years, male, beginner fitness level</div>
                    </div>
                    
                    <div class="profile-card" onclick="setProfile('Intermediate', 35, 'female', 'intermediate', 68, 185)">
                        <div class="profile-icon">üí™</div>
                        <div class="profile-title">Intermediate</div>
                        <div class="profile-description">35 years, female, intermediate fitness</div>
                    </div>
                    
                    <div class="profile-card" onclick="setProfile('Advanced', 28, 'male', 'advanced', 62, 192)">
                        <div class="profile-icon">üèÉ</div>
                        <div class="profile-title">Advanced</div>
                        <div class="profile-description">28 years, male, advanced fitness level</div>
                    </div>
                    
                    <div class="profile-card" onclick="setProfile('Athlete', 25, 'female', 'athlete', 58, 195)">
                        <div class="profile-icon">üèÜ</div>
                        <div class="profile-title">Athlete</div>
                        <div class="profile-description">25 years, female, athlete level fitness</div>
                    </div>
                    
                    <div class="profile-card" onclick="setProfile('Senior', 65, 'male', 'beginner', 72, 155)">
                        <div class="profile-icon">üëµ</div>
                        <div class="profile-title">Senior</div>
                        <div class="profile-description">65 years, male, beginner fitness level</div>
                    </div>
                    
                    <div class="profile-card" onclick="setProfile('Youth', 18, 'female', 'intermediate', 70, 202)">
                        <div class="profile-icon">üéì</div>
                        <div class="profile-title">Youth</div>
                        <div class="profile-description">18 years, female, intermediate fitness</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Heart rate calculator state
        let heartRateHistory = JSON.parse(localStorage.getItem('heartRateHistory')) || {};
        let currentCalculation = null;
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set default values
            document.getElementById('age').value = '30';
            document.getElementById('gender').value = 'male';
            document.getElementById('fitnessLevel').value = 'intermediate';
            document.getElementById('restingHR').value = '70';
            document.getElementById('maxHR').value = '190';
            
            // Calculate initial zones
            calculateHeartRateZones();
        });
        
        // Set profile
        function setProfile(name, age, gender, fitnessLevel, restingHR, maxHR) {
            document.getElementById('age').value = age;
            document.getElementById('gender').value = gender;
            document.getElementById('fitnessLevel').value = fitnessLevel;
            document.getElementById('restingHR').value = restingHR;
            document.getElementById('maxHR').value = maxHR;
            
            // Calculate immediately
            calculateHeartRateZones();
            
            showMessage(`Set to ${name} profile`);
        }
        
        // Show message
        function showMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.textContent = message;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-color);
                color: white;
                padding: 15px 20px;
                border-radius: var(--border-radius);
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(messageEl);
            
            setTimeout(() => {
                messageEl.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                }, 300);
            }, 3000);
        }
        
        // Calculate heart rate zones
        function calculateHeartRateZones() {
            const age = parseInt(document.getElementById('age').value) || 30;
            const gender = document.getElementById('gender').value;
            const fitnessLevel = document.getElementById('fitnessLevel').value;
            const restingHR = parseInt(document.getElementById('restingHR').value) || 70;
            const maxHR = parseInt(document.getElementById('maxHR').value) || 190;
            
            try {
                // Calculate heart rate reserve (HRR)
                const hrr = maxHR - restingHR;
                
                // Calculate zones using Karvonen method
                const zones = [
                    {
                        name: 'Zone 1 - Recovery',
                        percentage: '50-60%',
                        minHR: Math.round(restingHR + (hrr * 0.5)),
                        maxHR: Math.round(restingHR + (hrr * 0.6)),
                        description: 'Light activity for active recovery, warm-up, and cool-down. Very easy effort.',
                        color: '#10b981'
                    },
                    {
                        name: 'Zone 2 - Aerobic',
                        percentage: '60-70%',
                        minHR: Math.round(restingHR + (hrr * 0.6)),
                        maxHR: Math.round(restingHR + (hrr * 0.7)),
                        description: 'Builds endurance and fat-burning capacity. Comfortable, sustainable pace.',
                        color: '#3b82f6'
                    },
                    {
                        name: 'Zone 3 - Tempo',
                        percentage: '70-80%',
                        minHR: Math.round(restingHR + (hrr * 0.7)),
                        maxHR: Math.round(restingHR + (hrr * 0.8)),
                        description: 'Improves lactate threshold and aerobic capacity. Moderate effort.',
                        color: '#f59e0b'
                    },
                    {
                        name: 'Zone 4 - Threshold',
                        percentage: '80-90%',
                        minHR: Math.round(restingHR + (hrr * 0.8)),
                        maxHR: Math.round(restingHR + (hrr * 0.9)),
                        description: 'High-intensity intervals for performance gains. Hard effort.',
                        color: '#ef4444'
                    },
                    {
                        name: 'Zone 5 - Maximum',
                        percentage: '90-100%',
                        minHR: Math.round(restingHR + (hrr * 0.9)),
                        maxHR: maxHR,
                        description: 'Short bursts for maximum power and speed. Very hard effort.',
                        color: '#8b5cf6'
                    }
                ];
                
                // Store calculation
                currentCalculation = {
                    age,
                    gender,
                    fitnessLevel,
                    restingHR,
                    maxHR,
                    hrr,
                    zones,
                    calculatedAt: new Date().toISOString()
                };
                
                // Update display
                updateDisplay();
                updateStats();
                updateHeartZones();
                updateZoneChart();
                updateTrainingRecommendations();
                
            } catch (error) {
                alert('Error calculating heart rate zones. Please check your inputs.');
                console.error('Calculation error:', error);
            }
        }
        
        // Update display
        function updateDisplay() {
            if (!currentCalculation) return;
            
            document.getElementById('displayMaxHR').textContent = `${currentCalculation.maxHR} bpm`;
            document.getElementById('displayBreakdown').textContent = `Age: ${currentCalculation.age}, Resting HR: ${currentCalculation.restingHR} bpm`;
        }
        
        // Update statistics
        function updateStats() {
            if (!currentCalculation) return;
            
            document.getElementById('statMaxHR').textContent = currentCalculation.maxHR;
            document.getElementById('statRestingHR').textContent = currentCalculation.restingHR;
            document.getElementById('statHRR').textContent = currentCalculation.hrr;
            document.getElementById('statTargetHR').textContent = Math.round(currentCalculation.restingHR + (currentCalculation.hrr * 0.7));
        }
        
        // Update heart rate zones
        function updateHeartZones() {
            if (!currentCalculation) return;
            
            const container = document.getElementById('heartZones');
            container.innerHTML = '';
            
            currentCalculation.zones.forEach((zone, index) => {
                const zoneDiv = document.createElement('div');
                zoneDiv.className = 'zone-item';
                
                zoneDiv.innerHTML = `
                    <div class="zone-header">
                        <div class="zone-name">
                            <span class="zone-color" style="background: ${zone.color}"></span>
                            ${zone.name}
                        </div>
                        <div class="zone-range">${zone.minHR}-${zone.maxHR} bpm</div>
                    </div>
                    <div class="zone-details">
                        <div class="detail-item">
                            <div class="detail-label">Intensity</div>
                            <div class="detail-value">${zone.percentage}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Min HR</div>
                            <div class="detail-value">${zone.minHR} bpm</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Max HR</div>
                            <div class="detail-value">${zone.maxHR} bpm</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Range</div>
                            <div class="detail-value">${zone.maxHR - zone.minHR} bpm</div>
                        </div>
                    </div>
                    <div class="zone-description">${zone.description}</div>
                `;
                
                container.appendChild(zoneDiv);
            });
        }
        
        // Update zone chart
        function updateZoneChart() {
            if (!currentCalculation) return;
            
            const container = document.getElementById('zoneChart');
            container.innerHTML = '';
            
            currentCalculation.zones.forEach((zone, index) => {
                const zoneDiv = document.createElement('div');
                zoneDiv.className = `zone-bar zone${index + 1}`;
                
                // Calculate height based on zone range
                const zoneRange = zone.maxHR - zone.minHR;
                const maxRange = Math.max(...currentCalculation.zones.map(z => z.maxHR - z.minHR));
                const height = (zoneRange / maxRange) * 100;
                
                zoneDiv.style.height = `${height}%`;
                
                zoneDiv.innerHTML = `
                    <div class="zone-value">${zone.minHR}-${zone.maxHR}</div>
                    <div class="zone-label">Zone ${index + 1}</div>
                `;
                
                container.appendChild(zoneDiv);
            });
        }
        
        // Update training recommendations
        function updateTrainingRecommendations() {
            if (!currentCalculation) return;
            
            const container = document.getElementById('trainingRecommendations');
            const recommendations = generateTrainingRecommendations(currentCalculation);
            
            container.innerHTML = '';
            
            recommendations.forEach(rec => {
                const recDiv = document.createElement('div');
                recDiv.className = 'recommendation-card';
                
                recDiv.innerHTML = `
                    <div class="recommendation-header">
                        <div class="recommendation-icon">${rec.icon}</div>
                        <div class="recommendation-title">${rec.title}</div>
                    </div>
                    <div class="recommendation-description">${rec.description}</div>
                `;
                
                container.appendChild(recDiv);
            });
        }
        
        // Generate training recommendations
        function generateTrainingRecommendations(calculation) {
            const recommendations = [];
            
            recommendations.push({
                icon: 'üìä',
                title: 'Zone Distribution',
                description: `For balanced training, spend 70% of your time in Zones 1-2 (recovery/aerobic), 20% in Zone 3 (tempo), and 10% in Zones 4-5 (threshold/maximum).`
            });
            
            recommendations.push({
                icon: 'üèÉ',
                title: 'Weekly Training Plan',
                description: `Include 2-3 easy days (Zones 1-2), 1-2 moderate days (Zone 3), and 1-2 hard days (Zones 4-5) per week, with at least 1 rest day.`
            });
            
            recommendations.push({
                icon: '‚è∞',
                title: 'Zone Duration',
                description: `Zone 1-2: 30-90 minutes, Zone 3: 20-60 minutes, Zone 4: 10-30 minutes, Zone 5: 1-5 minutes with rest intervals.`
            });
            
            recommendations.push({
                icon: 'üéØ',
                title: 'Goal-Specific Training',
                description: `Endurance: Focus on Zones 2-3. Performance: Include Zones 4-5 intervals. Recovery: Stay in Zones 1-2.`
            });
            
            recommendations.push({
                icon: '‚ö†Ô∏è',
                title: 'Safety Guidelines',
                description: `Always warm up in Zone 1-2 for 10-15 minutes. Listen to your body and don't push beyond your limits. Consult a doctor before starting intense training.`
            });
            
            return recommendations;
        }
        
        // Reset calculator
        function resetCalculator() {
            document.getElementById('age').value = '30';
            document.getElementById('gender').value = 'male';
            document.getElementById('fitnessLevel').value = 'intermediate';
            document.getElementById('restingHR').value = '70';
            document.getElementById('maxHR').value = '190';
            
            // Clear display
            currentCalculation = null;
            updateDisplay();
            
            // Reset display values
            document.getElementById('displayMaxHR').textContent = '190 bpm';
            document.getElementById('displayBreakdown').textContent = 'Based on your inputs';
            
            // Reset stats
            document.getElementById('statMaxHR').textContent = '190';
            document.getElementById('statRestingHR').textContent = '70';
            document.getElementById('statHRR').textContent = '120';
            document.getElementById('statTargetHR').textContent = '152';
            
            // Clear zones, chart, and recommendations
            document.getElementById('heartZones').innerHTML = '';
            document.getElementById('zoneChart').innerHTML = '';
            document.getElementById('trainingRecommendations').innerHTML = '';
        }
        
        // Save calculation
        function saveCalculation() {
            if (!currentCalculation) {
                alert('Please calculate heart rate zones first.');
                return;
            }
            
            const calculation = {
                ...currentCalculation,
                id: Date.now()
            };
            
            heartRateHistory[calculation.calculatedAt.split('T')[0]] = calculation;
            localStorage.setItem('heartRateHistory', JSON.stringify(heartRateHistory));
            
            alert('Calculation saved successfully!');
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
