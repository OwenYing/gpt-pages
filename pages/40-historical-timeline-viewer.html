<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historical Timeline Viewer - GPT Static Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        
        .timeline {
            position: relative;
            padding: 40px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--primary-color);
            transform: translateX(-50%);
            z-index: 1;
        }
        
        .timeline-item {
            position: relative;
            margin: 40px 0;
            width: 100%;
        }
        
        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: 0;
            margin-right: 55%;
            text-align: right;
        }
        
        .timeline-item:nth-child(even) .timeline-content {
            margin-left: 55%;
            margin-right: 0;
            text-align: left;
        }
        
        .timeline-item:nth-child(odd) .timeline-content::before {
            left: 100%;
            border-left: 15px solid var(--primary-color);
            border-right: 0;
        }
        
        .timeline-item:nth-child(even) .timeline-content::before {
            right: 100%;
            border-right: 15px solid var(--primary-color);
            border-left: 0;
        }
        
        .timeline-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }
        
        .timeline-content::before {
            content: '';
            position: absolute;
            top: 20px;
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
        }
        
        .timeline-date {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .timeline-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .timeline-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .timeline-category {
            display: inline-block;
            padding: 5px 12px;
            background: var(--bg-tertiary);
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .timeline-marker {
            position: absolute;
            left: 50%;
            top: 20px;
            width: 20px;
            height: 20px;
            background: var(--primary-color);
            border: 4px solid white;
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 2;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .timeline-filters {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .filters-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .filter-group {
            text-align: center;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }
        
        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .category-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .category-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .category-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .category-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .search-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .search-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .search-input::placeholder {
            color: var(--text-secondary);
            font-style: italic;
        }
        
        .search-results {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .search-result {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .search-result:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .search-date {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .search-title {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .search-category {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .timeline-stats {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .stats-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .timeline-controls {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .controls-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 24px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .control-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }
        
        @media (max-width: 768px) {
            .timeline::before {
                left: 20px;
            }
            
            .timeline-item:nth-child(odd) .timeline-content,
            .timeline-item:nth-child(even) .timeline-content {
                margin-left: 50px;
                margin-right: 0;
                text-align: left;
            }
            
            .timeline-item:nth-child(odd) .timeline-content::before,
            .timeline-item:nth-child(even) .timeline-content::before {
                left: -15px;
                border-left: 15px solid var(--primary-color);
                border-right: 0;
            }
            
            .timeline-marker {
                left: 20px;
                transform: none;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .category-filters {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Hub
    </a>
    
    <div class="container">
        <div class="page-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title">Historical Timeline Viewer</h1>
                    <div class="page-meta">
                        <span class="page-category-badge">Education & Learning</span>
                        <span class="page-number-badge">Page #40</span>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <div class="content-section">
                <p>Explore historical events through an interactive timeline. Filter by era, category, or search for specific events to learn about the fascinating moments that shaped our world.</p>
            </div>

            <!-- Timeline Filters -->
            <div class="content-section">
                <div class="timeline-filters">
                    <div class="filters-title">Filter Timeline</div>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="eraFilter">Historical Era</label>
                            <select id="eraFilter">
                                <option value="all">All Eras</option>
                                <option value="ancient">Ancient History</option>
                                <option value="medieval">Medieval Period</option>
                                <option value="renaissance">Renaissance</option>
                                <option value="modern">Modern Era</option>
                                <option value="contemporary">Contemporary</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="yearRange">Year Range</label>
                            <select id="yearRange">
                                <option value="all">All Years</option>
                                <option value="ancient">3000 BCE - 500 CE</option>
                                <option value="medieval">500 - 1500</option>
                                <option value="renaissance">1300 - 1600</option>
                                <option value="modern">1500 - 1900</option>
                                <option value="contemporary">1900 - Present</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="sortOrder">Sort Order</label>
                            <select id="sortOrder">
                                <option value="chronological">Chronological</option>
                                <option value="reverse">Reverse Chronological</option>
                                <option value="category">By Category</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="category-filters">
                        <button class="category-btn active" data-category="all">All Categories</button>
                        <button class="category-btn" data-category="politics">Politics</button>
                        <button class="category-btn" data-category="war">War & Conflict</button>
                        <button class="category-btn" data-category="science">Science & Technology</button>
                        <button class="category-btn" data-category="culture">Culture & Arts</button>
                        <button class="category-btn" data-category="exploration">Exploration</button>
                        <button class="category-btn" data-category="religion">Religion</button>
                        <button class="category-btn" data-category="economics">Economics</button>
                    </div>
                </div>
            </div>

            <!-- Search Section -->
            <div class="content-section">
                <div class="search-section">
                    <div class="search-title">Search Historical Events</div>
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput" 
                        placeholder="Search for events, people, places, or keywords..."
                    >
                    <div class="search-results" id="searchResults"></div>
                </div>
            </div>

            <!-- Timeline Statistics -->
            <div class="content-section">
                <div class="timeline-stats">
                    <div class="stats-title">Timeline Overview</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalEvents">0</div>
                            <div class="stat-label">Total Events</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="timeSpan">0</div>
                            <div class="stat-label">Years Span</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="activeCategories">0</div>
                            <div class="stat-label">Categories</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="filteredEvents">0</div>
                            <div class="stat-label">Filtered Events</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline Controls -->
            <div class="content-section">
                <div class="timeline-controls">
                    <div class="controls-title">Timeline Controls</div>
                    <div class="control-buttons">
                        <button class="control-btn" id="zoomInBtn">
                            <i class="fas fa-search-plus"></i> Zoom In
                        </button>
                        <button class="control-btn" id="zoomOutBtn">
                            <i class="fas fa-search-minus"></i> Zoom Out
                        </button>
                        <button class="control-btn" id="resetViewBtn">
                            <i class="fas fa-home"></i> Reset View
                        </button>
                        <button class="control-btn" id="exportBtn">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
            </div>

            <!-- Timeline Display -->
            <div class="content-section">
                <div class="timeline-container">
                    <div class="timeline" id="timeline">
                        <!-- Timeline items will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Historical timeline data
        const timelineData = [
            // Ancient History
            { date: '3000 BCE', title: 'First Egyptian Dynasty', description: 'Narmer unites Upper and Lower Egypt, establishing the first dynasty and beginning the Pharaonic period.', category: 'politics', era: 'ancient' },
            { date: '2500 BCE', title: 'Great Pyramid of Giza', description: 'Construction of the Great Pyramid, one of the Seven Wonders of the Ancient World, is completed.', category: 'culture', era: 'ancient' },
            { date: '2000 BCE', title: 'Indus Valley Civilization', description: 'Peak of the sophisticated urban civilization in the Indus Valley with advanced city planning and trade.', category: 'culture', era: 'ancient' },
            { date: '1200 BCE', title: 'Trojan War', description: 'Legendary conflict between the kingdoms of Troy and Mycenaean Greece, immortalized in Homer\'s Iliad.', category: 'war', era: 'ancient' },
            { date: '800 BCE', title: 'Rise of Greek City-States', description: 'Development of independent city-states like Athens and Sparta, laying foundations for democracy.', category: 'politics', era: 'ancient' },
            { date: '500 BCE', title: 'Persian Empire Expansion', description: 'Cyrus the Great establishes the Achaemenid Empire, the largest empire of the ancient world.', category: 'politics', era: 'ancient' },
            { date: '300 BCE', title: 'Alexander the Great', description: 'Macedonian king conquers the Persian Empire and spreads Greek culture across three continents.', category: 'war', era: 'ancient' },
            { date: '100 BCE', title: 'Roman Republic Peak', description: 'Rome becomes the dominant power in the Mediterranean, controlling vast territories.', category: 'politics', era: 'ancient' },
            { date: '44 BCE', title: 'Assassination of Julius Caesar', description: 'The murder of Caesar leads to the end of the Roman Republic and rise of the Empire.', category: 'politics', era: 'ancient' },
            { date: '1 CE', title: 'Birth of Jesus Christ', description: 'Traditional date marking the beginning of the Christian era and calendar system.', category: 'religion', era: 'ancient' },
            { date: '100 CE', title: 'Roman Empire Peak', description: 'Rome reaches its greatest territorial extent under Emperor Trajan.', category: 'politics', era: 'ancient' },
            { date: '300 CE', title: 'Constantine\'s Conversion', description: 'Emperor Constantine converts to Christianity, making it the official religion of Rome.', category: 'religion', era: 'ancient' },
            
            // Medieval Period
            { date: '500 CE', title: 'Fall of Western Rome', description: 'Odoacer deposes the last Roman emperor, marking the end of the Western Roman Empire.', category: 'politics', era: 'medieval' },
            { date: '600 CE', title: 'Rise of Islam', description: 'Prophet Muhammad receives revelations, leading to the foundation of Islam and rapid expansion.', category: 'religion', era: 'medieval' },
            { date: '800 CE', title: 'Charlemagne Crowned', description: 'Charlemagne is crowned Holy Roman Emperor, uniting much of Western Europe.', category: 'politics', era: 'medieval' },
            { date: '1000 CE', title: 'Viking Age Peak', description: 'Norse seafarers explore and settle across Europe, reaching North America.', category: 'exploration', era: 'medieval' },
            { date: '1095 CE', title: 'First Crusade', description: 'Pope Urban II calls for the First Crusade to reclaim the Holy Land from Muslim control.', category: 'war', era: 'medieval' },
            { date: '1200 CE', title: 'Magna Carta', description: 'King John of England signs the Magna Carta, establishing the principle of limited monarchy.', category: 'politics', era: 'medieval' },
            { date: '1300 CE', title: 'Black Death', description: 'The bubonic plague devastates Europe, killing up to 60% of the population.', category: 'culture', era: 'medieval' },
            
            // Renaissance
            { date: '1400 CE', title: 'Renaissance Begins', description: 'Cultural rebirth in Italy marked by renewed interest in classical learning and arts.', category: 'culture', era: 'renaissance' },
            { date: '1453 CE', title: 'Fall of Constantinople', description: 'Ottoman Turks capture Constantinople, ending the Byzantine Empire.', category: 'war', era: 'renaissance' },
            { date: '1492 CE', title: 'Columbus Discovers America', description: 'Christopher Columbus reaches the Americas, beginning European colonization.', category: 'exploration', era: 'renaissance' },
            { date: '1500 CE', title: 'Age of Exploration', description: 'European nations begin global exploration and colonization of new territories.', category: 'exploration', era: 'renaissance' },
            { date: '1517 CE', title: 'Protestant Reformation', description: 'Martin Luther posts his 95 Theses, sparking the Protestant Reformation.', category: 'religion', era: 'renaissance' },
            
            // Modern Era
            { date: '1600 CE', title: 'Scientific Revolution', description: 'Galileo, Newton, and others establish modern scientific methods and discoveries.', category: 'science', era: 'modern' },
            { date: '1700 CE', title: 'Age of Enlightenment', description: 'Intellectual movement emphasizing reason, individualism, and skepticism.', category: 'culture', era: 'modern' },
            { date: '1776 CE', title: 'American Revolution', description: 'Thirteen colonies declare independence from Britain, forming the United States.', category: 'politics', era: 'modern' },
            { date: '1789 CE', title: 'French Revolution', description: 'Revolutionary period that transforms French society and influences Europe.', category: 'politics', era: 'modern' },
            { date: '1800 CE', title: 'Industrial Revolution', description: 'Rapid industrialization transforms manufacturing and society in Britain and Europe.', category: 'science', era: 'modern' },
            { date: '1815 CE', title: 'Napoleon\'s Defeat', description: 'Napoleon is defeated at Waterloo, ending the Napoleonic Wars.', category: 'war', era: 'modern' },
            { date: '1850 CE', title: 'American Civil War', description: 'Conflict between Northern and Southern states over slavery and states\' rights.', category: 'war', era: 'modern' },
            { date: '1900 CE', title: 'Turn of the Century', description: 'World enters the 20th century with rapid technological and social change.', category: 'culture', era: 'modern' },
            
            // Contemporary Era
            { date: '1914 CE', title: 'World War I', description: 'Global conflict involving most of the world\'s nations, ending in 1918.', category: 'war', era: 'contemporary' },
            { date: '1929 CE', title: 'Great Depression', description: 'Severe worldwide economic depression affecting most industrialized nations.', category: 'economics', era: 'contemporary' },
            { date: '1939 CE', title: 'World War II', description: 'Global conflict involving most nations, ending in 1945 with atomic bombings.', category: 'war', era: 'contemporary' },
            { date: '1945 CE', title: 'United Nations Founded', description: 'International organization established to promote peace and cooperation.', category: 'politics', era: 'contemporary' },
            { date: '1969 CE', title: 'Moon Landing', description: 'Neil Armstrong becomes the first human to walk on the Moon.', category: 'science', era: 'contemporary' },
            { date: '1989 CE', title: 'Fall of Berlin Wall', description: 'Symbolic end of the Cold War and division between East and West Germany.', category: 'politics', era: 'contemporary' },
            { date: '2001 CE', title: '9/11 Attacks', description: 'Terrorist attacks on the United States, leading to global changes in security.', category: 'war', era: 'contemporary' },
            { date: '2008 CE', title: 'Global Financial Crisis', description: 'Severe worldwide economic crisis affecting financial markets and economies.', category: 'economics', era: 'contemporary' },
            { date: '2020 CE', title: 'COVID-19 Pandemic', description: 'Global pandemic causing unprecedented health and economic challenges.', category: 'culture', era: 'contemporary' }
        ];

        let filteredEvents = [...timelineData];
        let selectedCategories = ['all'];
        let selectedEra = 'all';
        let sortOrder = 'chronological';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            renderTimeline();
            updateStats();
        });

        function setupEventListeners() {
            // Era filter
            document.getElementById('eraFilter').addEventListener('change', function() {
                selectedEra = this.value;
                filterEvents();
            });

            // Year range filter
            document.getElementById('yearRange').addEventListener('change', function() {
                filterEvents();
            });

            // Sort order
            document.getElementById('sortOrder').addEventListener('change', function() {
                sortOrder = this.value;
                filterEvents();
            });

            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    if (category === 'all') {
                        selectedCategories = ['all'];
                        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                    } else {
                        if (selectedCategories.includes('all')) {
                            selectedCategories = [];
                        }
                        
                        if (selectedCategories.includes(category)) {
                            selectedCategories = selectedCategories.filter(c => c !== category);
                            this.classList.remove('active');
                        } else {
                            selectedCategories.push(category);
                            this.classList.add('active');
                        }
                        
                        if (selectedCategories.length === 0) {
                            selectedCategories = ['all'];
                            document.querySelector('.category-btn[data-category="all"]').classList.add('active');
                        }
                    }
                    
                    filterEvents();
                });
            });

            // Search input
            document.getElementById('searchInput').addEventListener('input', function() {
                const query = this.value.toLowerCase();
                if (query.length > 0) {
                    searchEvents(query);
                } else {
                    document.getElementById('searchResults').innerHTML = '';
                    filterEvents();
                }
            });

            // Control buttons
            document.getElementById('zoomInBtn').addEventListener('click', function() {
                zoomTimeline(1.2);
            });

            document.getElementById('zoomOutBtn').addEventListener('click', function() {
                zoomTimeline(0.8);
            });

            document.getElementById('resetViewBtn').addEventListener('click', function() {
                resetTimelineView();
            });

            document.getElementById('exportBtn').addEventListener('click', function() {
                exportTimeline();
            });
        }

        function filterEvents() {
            filteredEvents = timelineData.filter(event => {
                // Filter by era
                if (selectedEra !== 'all' && event.era !== selectedEra) {
                    return false;
                }
                
                // Filter by category
                if (!selectedCategories.includes('all') && !selectedCategories.includes(event.category)) {
                    return false;
                }
                
                return true;
            });

            // Sort events
            if (sortOrder === 'chronological') {
                filteredEvents.sort((a, b) => parseYear(a.date) - parseYear(b.date));
            } else if (sortOrder === 'reverse') {
                filteredEvents.sort((a, b) => parseYear(b.date) - parseYear(a.date));
            } else if (sortOrder === 'category') {
                filteredEvents.sort((a, b) => a.category.localeCompare(b.category));
            }

            renderTimeline();
            updateStats();
        }

        function parseYear(dateStr) {
            if (dateStr.includes('BCE')) {
                return -parseInt(dateStr);
            } else if (dateStr.includes('CE')) {
                return parseInt(dateStr);
            } else {
                return parseInt(dateStr);
            }
        }

        function searchEvents(query) {
            const results = timelineData.filter(event => 
                event.title.toLowerCase().includes(query) ||
                event.description.toLowerCase().includes(query) ||
                event.category.toLowerCase().includes(query) ||
                event.era.toLowerCase().includes(query)
            );
            
            displaySearchResults(results);
        }

        function displaySearchResults(results) {
            const searchResults = document.getElementById('searchResults');
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No events found.</p>';
                return;
            }
            
            results.forEach(event => {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'search-result';
                resultDiv.onclick = () => scrollToEvent(event);
                
                resultDiv.innerHTML = `
                    <div class="search-date">${event.date}</div>
                    <div class="search-title">${event.title}</div>
                    <div class="search-category">${event.category} â€¢ ${event.era}</div>
                `;
                
                searchResults.appendChild(resultDiv);
            });
        }

        function scrollToEvent(event) {
            const eventElement = document.querySelector(`[data-date="${event.date}"]`);
            if (eventElement) {
                eventElement.scrollIntoView({ behavior: 'smooth' });
                eventElement.style.animation = 'pulse 1s';
            }
        }

        function renderTimeline() {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';
            
            filteredEvents.forEach((event, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                timelineItem.dataset.date = event.date;
                
                timelineItem.innerHTML = `
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">${event.date}</div>
                        <div class="timeline-title">${event.title}</div>
                        <div class="timeline-description">${event.description}</div>
                        <div class="timeline-category">${event.category}</div>
                    </div>
                `;
                
                timeline.appendChild(timelineItem);
            });
        }

        function updateStats() {
            document.getElementById('totalEvents').textContent = timelineData.length;
            document.getElementById('filteredEvents').textContent = filteredEvents.length;
            
            // Calculate time span
            const years = timelineData.map(event => parseYear(event.date));
            const timeSpan = Math.max(...years) - Math.min(...years);
            document.getElementById('timeSpan').textContent = timeSpan.toLocaleString();
            
            // Count active categories
            const activeCategories = new Set(filteredEvents.map(event => event.category)).size;
            document.getElementById('activeCategories').textContent = activeCategories;
        }

        function zoomTimeline(factor) {
            const timeline = document.getElementById('timeline');
            const currentScale = timeline.style.transform ? parseFloat(timeline.style.transform.match(/scale\(([^)]+)\)/)?.[1] || 1) : 1;
            const newScale = Math.max(0.5, Math.min(2, currentScale * factor));
            timeline.style.transform = `scale(${newScale})`;
        }

        function resetTimelineView() {
            const timeline = document.getElementById('timeline');
            timeline.style.transform = 'scale(1)';
        }

        function exportTimeline() {
            const dataStr = JSON.stringify(filteredEvents, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'historical-timeline.json';
            link.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
