<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T69M8TNFWB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T69M8TNFWB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Answer Formatter - GPT Ideas Hub</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }
        
        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }
        
        .page-header-content {
            position: relative;
            z-index: 2;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .page-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .page-category-badge,
        .page-number-badge {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .content-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
        }
        
        .formatter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .input-section,
        .preview-section {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .input-group textarea {
            width: 100%;
            min-height: 260px;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            line-height: 1.6;
            transition: var(--transition);
            resize: vertical;
        }
        
        .input-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 16px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--border-color);
        }
        
        .hint {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-top: 14px;
        }
        
        .chatgpt-shell {
            background: #f7f7f8;
            border-radius: 18px;
            padding: 20px;
        }
        
        .chatgpt-output {
            background: #ffffff;
            border-radius: 14px;
            padding: 22px 24px;
            border: 1px solid #e6e6e6;
            font-family: 'Inter', sans-serif;
            color: #111827;
            line-height: 1.7;
        }
        
        .chatgpt-output h1,
        .chatgpt-output h2,
        .chatgpt-output h3,
        .chatgpt-output h4,
        .chatgpt-output h5,
        .chatgpt-output h6 {
            font-family: 'Space Grotesk', sans-serif;
            margin: 20px 0 12px;
            color: #0f172a;
        }
        
        .chatgpt-output p {
            margin: 12px 0;
        }
        
        .chatgpt-output ul,
        .chatgpt-output ol {
            margin: 12px 0 12px 22px;
        }
        
        .chatgpt-output li {
            margin: 6px 0;
        }
        
        .chatgpt-output blockquote {
            margin: 16px 0;
            padding: 12px 16px;
            border-left: 4px solid #4f46e5;
            background: #eef2ff;
            color: #1f2937;
        }
        
        .chatgpt-output code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 6px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.95em;
        }
        
        .chatgpt-output pre {
            background: #0f172a;
            color: #f8fafc;
            padding: 16px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 16px 0;
        }
        
        .chatgpt-output pre code {
            background: transparent;
            color: inherit;
            padding: 0;
        }
        
        .chatgpt-output a {
            color: #4f46e5;
            text-decoration: none;
        }
        
        .chatgpt-output a:hover {
            text-decoration: underline;
        }

        .chatgpt-output table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.95rem;
        }

        .chatgpt-output th,
        .chatgpt-output td {
            border: 1px solid #e5e7eb;
            padding: 10px 12px;
            text-align: left;
        }

        .chatgpt-output th {
            background: #f3f4f6;
            font-weight: 600;
        }
        
        .empty-state {
            color: #6b7280;
            text-align: center;
            padding: 40px 20px;
            font-size: 1rem;
        }
        
        @media (max-width: 900px) {
            .formatter-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="individual-page">
    <a href="../index.html" class="back-button">
        <i class="fas fa-arrow-left"></i>
        Back to Hub
    </a>

    <div class="page-content">
        <header class="page-header">
            <div class="page-header-content">
                <h1 class="page-title">âœ¨ ChatGPT Answer Formatter</h1>
                <div class="page-meta">
                    <span class="page-category-badge">Work & Productivity</span>
                    <span class="page-number-badge">Page 104</span>
                </div>
                <p style="margin-top: 20px; font-size: 1.1rem; opacity: 0.9;">
                    Paste your ChatGPT answer, match the familiar style, and export a PDF
                </p>
            </div>
        </header>

        <div class="content-section">
            <h2>Make Answers Look Like ChatGPT</h2>
            <p>Paste an answer and it will auto-format into a ChatGPT-style layout. When ready, generate a PDF with the same styling.</p>
            
            <div class="formatter-grid">
                <div class="input-section">
                    <div class="input-group">
                        <label for="answerInput">ChatGPT Answer</label>
                        <textarea id="answerInput" placeholder="Paste your ChatGPT answer here..."></textarea>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-primary" id="formatBtn">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            Make It Pretty
                        </button>
                        <button class="btn btn-secondary" id="clearBtn">
                            <i class="fas fa-eraser"></i>
                            Clear
                        </button>
                        <button class="btn btn-secondary" id="pdfBtn">
                            <i class="fas fa-file-pdf"></i>
                            Download PDF
                        </button>
                    </div>
                    <p class="hint">Supports headings, lists, bold, italics, code blocks, and links.</p>
                </div>
                <div class="preview-section">
                    <h3>Preview</h3>
                    <div class="chatgpt-shell">
                        <div class="chatgpt-output" id="preview">
                            <div class="empty-state">Paste an answer to preview the formatted output.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const answerInput = document.getElementById('answerInput');
        const preview = document.getElementById('preview');
        const formatBtn = document.getElementById('formatBtn');
        const clearBtn = document.getElementById('clearBtn');
        const pdfBtn = document.getElementById('pdfBtn');

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, (m) => map[m]);
        }

        function renderMarkdown(text) {
            const trimmed = text.trim();
            if (!trimmed) {
                return '<div class="empty-state">Paste an answer to preview the formatted output.</div>';
            }

            const codeBlocks = [];
            let content = escapeHtml(trimmed);

            content = content.replace(/```([\s\S]*?)```/g, (match, code) => {
                const token = `@@CODE${codeBlocks.length}@@`;
                codeBlocks.push(`<pre><code>${code}</code></pre>`);
                return token;
            });

            const lines = content.split('\n');
            let html = '';
            let paragraph = [];
            let inUl = false;
            let inOl = false;

            function flushParagraph() {
                if (paragraph.length) {
                    html += `<p>${paragraph.join(' ')}</p>`;
                    paragraph = [];
                }
            }

            function closeLists() {
                if (inUl) {
                    html += '</ul>';
                    inUl = false;
                }
                if (inOl) {
                    html += '</ol>';
                    inOl = false;
                }
            }

            function isTableSeparator(line) {
                const trimmed = line.trim();
                if (!trimmed.includes('|')) {
                    return false;
                }
                const cleaned = trimmed.replace(/\|/g, '').trim();
                return /^:?-{3,}:?(?:\s+:?-{3,}:?)*$/.test(cleaned.replace(/\s+/g, ' '));
            }

            function parseTableRow(line) {
                return line
                    .trim()
                    .replace(/^\|/, '')
                    .replace(/\|$/, '')
                    .split('|')
                    .map(cell => cell.trim());
            }

            for (let i = 0; i < lines.length; i += 1) {
                const line = lines[i];
                const nextLine = lines[i + 1] || '';

                if (line.includes('|') && isTableSeparator(nextLine)) {
                    flushParagraph();
                    closeLists();

                    const headerCells = parseTableRow(line);
                    const columnCount = headerCells.length;
                    i += 2;
                    const bodyRows = [];

                    for (; i < lines.length; i += 1) {
                        const rowLine = lines[i];
                        if (!rowLine.trim() || !rowLine.includes('|')) {
                            break;
                        }
                        bodyRows.push(parseTableRow(rowLine));
                    }

                    html += '<table><thead><tr>';
                    headerCells.forEach(cell => {
                        html += `<th>${cell || ''}</th>`;
                    });
                    html += '</tr></thead><tbody>';
                    bodyRows.forEach(row => {
                        html += '<tr>';
                        for (let col = 0; col < columnCount; col += 1) {
                            html += `<td>${row[col] || ''}</td>`;
                        }
                        html += '</tr>';
                    });
                    html += '</tbody></table>';

                    if (lines[i] && lines[i].trim() === '') {
                        continue;
                    }
                    i -= 1;
                    continue;
                }
                if (line.includes('@@CODE')) {
                    flushParagraph();
                    closeLists();
                    html += line;
                    continue;
                }

                if (/^######\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h6>${line.replace(/^######\s+/, '')}</h6>`;
                    continue;
                }
                if (/^#####\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h5>${line.replace(/^#####\s+/, '')}</h5>`;
                    continue;
                }
                if (/^####\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h4>${line.replace(/^####\s+/, '')}</h4>`;
                    continue;
                }
                if (/^###\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h3>${line.replace(/^###\s+/, '')}</h3>`;
                    continue;
                }
                if (/^##\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h2>${line.replace(/^##\s+/, '')}</h2>`;
                    continue;
                }
                if (/^#\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<h1>${line.replace(/^#\s+/, '')}</h1>`;
                    continue;
                }
                if (/^>\s+/.test(line)) {
                    flushParagraph();
                    closeLists();
                    html += `<blockquote>${line.replace(/^>\s+/, '')}</blockquote>`;
                    continue;
                }
                if (/^\s*[-*]\s+/.test(line)) {
                    flushParagraph();
                    if (inOl) {
                        html += '</ol>';
                        inOl = false;
                    }
                    if (!inUl) {
                        html += '<ul>';
                        inUl = true;
                    }
                    html += `<li>${line.replace(/^\s*[-*]\s+/, '')}</li>`;
                    continue;
                }
                if (/^\s*\d+\.\s+/.test(line)) {
                    flushParagraph();
                    if (inUl) {
                        html += '</ul>';
                        inUl = false;
                    }
                    if (!inOl) {
                        html += '<ol>';
                        inOl = true;
                    }
                    html += `<li>${line.replace(/^\s*\d+\.\s+/, '')}</li>`;
                    continue;
                }
                if (line.trim() === '') {
                    flushParagraph();
                    closeLists();
                    continue;
                }

                paragraph.push(line.trim());
            }

            flushParagraph();
            closeLists();

            html = html
                .replace(/`([^`]+)`/g, '<code>$1</code>')
                .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
                .replace(/\*([^*]+)\*/g, '<em>$1</em>')
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener">$1</a>');

            html = html.replace(/@@CODE(\d+)@@/g, (match, index) => codeBlocks[index] || '');
            return html;
        }

        function renderPreview() {
            preview.innerHTML = renderMarkdown(answerInput.value);
        }

        function generatePDF() {
            const content = renderMarkdown(answerInput.value);
            if (!answerInput.value.trim()) {
                alert('Paste a ChatGPT answer before generating a PDF.');
                return;
            }

            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <title>ChatGPT Answer</title>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
                    <style>
                        body {
                            font-family: 'Inter', Arial, sans-serif;
                            margin: 32px;
                            color: #111827;
                        }
                        .chatgpt-output {
                            line-height: 1.7;
                        }
                        h1, h2, h3, h4, h5, h6 {
                            font-family: 'Space Grotesk', sans-serif;
                            margin: 20px 0 12px;
                            color: #0f172a;
                        }
                        p { margin: 12px 0; }
                        ul, ol { margin: 12px 0 12px 22px; }
                        li { margin: 6px 0; }
                        blockquote {
                            margin: 16px 0;
                            padding: 12px 16px;
                            border-left: 4px solid #4f46e5;
                            background: #eef2ff;
                        }
                        code {
                            background: #f3f4f6;
                            padding: 2px 6px;
                            border-radius: 6px;
                            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
                            font-size: 0.95em;
                        }
                        pre {
                            background: #0f172a;
                            color: #f8fafc;
                            padding: 16px;
                            border-radius: 10px;
                            overflow-x: auto;
                            margin: 16px 0;
                        }
                        pre code {
                            background: transparent;
                            color: inherit;
                            padding: 0;
                        }
                        a {
                            color: #4f46e5;
                            text-decoration: none;
                        }
                        a:hover {
                            text-decoration: underline;
                        }
                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin: 16px 0;
                            font-size: 0.95rem;
                        }
                        th, td {
                            border: 1px solid #e5e7eb;
                            padding: 10px 12px;
                            text-align: left;
                        }
                        th {
                            background: #f3f4f6;
                            font-weight: 600;
                        }
                        @page { margin: 24mm; }
                    </style>
                </head>
                <body>
                    <div class="chatgpt-output">${content}</div>
                </body>
                </html>
            `);

            printWindow.document.close();
            printWindow.focus();

            setTimeout(() => {
                printWindow.print();
            }, 500);
        }

        formatBtn.addEventListener('click', renderPreview);
        clearBtn.addEventListener('click', () => {
            answerInput.value = '';
            renderPreview();
        });
        pdfBtn.addEventListener('click', generatePDF);
        answerInput.addEventListener('input', renderPreview);
    </script>
</body>
</html>
